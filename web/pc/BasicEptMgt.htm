

<div class="bConfL bConfLBC"></div>
<div class="bConfR bConfRBC"></div>
<div id="bConCnt">
	<div class="bConfLCnt bConfLBC positionRel">
		<h1 class="bMdelTitle">{%label.eptManagement%}</h1>
		<div id="appsLMenuCon" class="menuCon">
			<ul id="menuBEptMngUl"></ul>
		</div>
	</div>
	<div class="bConfRCnt bConfRBC">
		<div id="eptMngConTitle" class="title">
			<label id="deviceNum" class="title">{%label.linkedEpt%}</label>
			<li class="textCon" id="routerSelLi">
				<span id="routerSel" class="select">
					<span class="value hsValue"></span>
					<i class="arrow"></i>
				</span>
			</li>
			<span id="addLabelSpan">
				<a id="addLimitTimeLinkLabel">{%label.limitTimeManagement%}</a>
				<a id="addForbidDomainLinkLabel">{%label.forbidDomainManagement%}</a>
			</span>
		</div>
		<div id="eptMngCon">
			<div id="eptMngRCon" class="bcRCon">
				<div id="blackWhiteListSwitchBlock" class="switchBlock disNone">
					<div class="block">
						<ul class="gridLine gridLineA">
							<label class="desLblA">{%label.currentMode%}</label>
							<input id="blackListOn" name="blackWhiteListSwitch" class="switchRadio" type="radio" /><label class="noteLbl" for="blackListOn">{%label.blackList%}</label>
							<input id="whiteListOn" name="blackWhiteListSwitch" class="switchRadio switchRadioR" type="radio" /><label class="noteLbl" for="whiteListOn">{%label.whiteList%}</label>
							<input id="off" name="blackWhiteListSwitch" class="switchRadio switchRadioR" type="radio" /><label class="noteLbl" for="off">{%label.off%}</label>
						</ul>
					</div>
				</div>
				<div id="eptMngListTitle" class="title disNone">
					<label class="title">{%label.blackListTitle%}</label>
				</div>
				<div id="eptMngList"></div>
				<div id="eptMngDetail"></div>
			</div>
		</div>
	</div>
</div><script type="text/javascript">function init(){function ib(a,b){return function(){return a.call(b)}}function Da(a){var b="",c="",d,e,f=0;if(16>=getDisplayStrLen(a))return a;for(e=a.length-1;0<e&&!(d=a.charAt(e),c+=d,f+=getDisplayStrLen(d),5<=f);e-=1);c=c.split("").reverse().join("");for(e=f=0;e<a.length-1&&!(d=a.charAt(e),b+=d,f+=getDisplayStrLen(d),8<f);e+=1);return b+"..."+c}function jb(){function a(){Mb(function(a){a||(b.bGuestEpt_rsMenu=null);c.init({menuUlId:"menuBEptMngUl",conId:"eptMngRCon",menuList:b,menuClickCallBack:Nb,
pageLoad:function(){id("menuBEptMngUl").childNodes[0].onclick()},niceScrollStyles:{background:"#1E96D4"},loadNewPage:!1})})}var b={linkedEpt_rsMenu:{value:menuStr.wifiHost,className:"ept_host",url:"wifiHost"},bGuestEpt_rsMenu:{value:label.bGuestEpt,className:"ept_guest",url:"bGuestEpt"},limitedEpt_rsMenu:{value:gMacFilterSupport?label.blackWhiteList:label.limitedEpt,className:"ept_limited",url:"limitedEpt"}},c=new menuTool_BC;gMacFilterSupport?Ob(function(b){a()}):a();gBasicAppsRNiceScroll=new NiceScroll("eptMngCon");
gBasicAppsRNiceScroll.scrollTipOpacity(1);gBasicAppsRNiceScroll.scrollTipSet({background:"#E26D3F"});gBasicAppsRNiceScroll.init();ea(null);la(null)}function Ob(a){var b={};b[uciCustomNetwork.fileName]={};b[uciCustomNetwork.fileName][KEY_NAME]=uciCustomNetwork.secName.macFilterConfig;$.query(b,function(b){var d=b[uciCustomNetwork.fileName][uciCustomNetwork.secName.macFilterConfig][uciCustomNetwork.optName.policy],e=b[uciCustomNetwork.fileName][uciCustomNetwork.secName.macFilterConfig][uciCustomNetwork.optName.enable];
kb=b[uciCustomNetwork.fileName][uciCustomNetwork.secName.macFilterConfig][uciCustomNetwork.optName.owner];F="on"==e?d:S;a(d)})}function Ra(){var a,b,c;id("blackListOn").checked?(a="on",b=T,c=label.switchToBlackList):id("whiteListOn").checked?(a="on",b=L,c=label.switchToWhiteList):(a="off",b=S,c=label.switchToOff);if(b!=F){if(F==S){var d={};d[uciWlanAccess.fileName]={};d[uciWlanAccess.fileName][KEY_NAME]=uciWlanAccess.optName.config;$.query(d,function(a){if(a[ERR_CODE]==ENONE&&(lb=parseInt(a[uciWlanAccess.fileName][uciWlanAccess.optName.config][uciWlanAccess.optName.enable])))if(b==
T)c=label.WACSwitchToBlackList;else if(b=L)c=label.WACSwitchToWhiteList},!1)}showConfirm(c,function(c){if(c)if(b==T)if(Ea(g_cur_host_mac.toUpperCase())){var d;for(c=0;c<X.length;c++)if(g_cur_host_mac.toUpperCase()==X[c].mac.toUpperCase()){d=X[c];break}showAlertD(label.checkCurHost+d.hostname+label.curHostInBlackList,function(){mb({mac:d.mac,name:d.hostname},function(){ta(a,b)})})}else ta(a,b);else b==L?Sa(U):ta(a,b);else F==T?(id("blackListOn").checked=!0,id("whiteListOn").checked=!1,id("off").checked=
!1):F==L?(id("blackListOn").checked=!1,id("whiteListOn").checked=!0,id("off").checked=!1):(id("blackListOn").checked=!1,id("whiteListOn").checked=!1,id("off").checked=!0)})}}function ta(a,b){showLoading(statusStr.waiting,void 0,void 0,!1);var c={},d={owner:uciCustomNetwork.optValue.owner.web,enable:a};"on"==a&&(d.policy=b,lb&&(c[uciWlanAccess.fileName]={},c[uciWlanAccess.fileName][uciWlanAccess.optName.config]={},c[uciWlanAccess.fileName][uciWlanAccess.optName.config][uciWlanAccess.optName.enable]=
0));c[uciCustomNetwork.fileName]={};c[uciCustomNetwork.fileName][uciCustomNetwork.secName.macFilterConfig]=d;$.modify(c,function(a){a.error_code==ENONE&&(F=b,b==S?(a={},a[uciCustomNetwork.fileName]={},a[uciCustomNetwork.fileName][KEY_TABLE]=["mac_filter_black_entry","mac_filter_white_entry"],$.del(a,function(a){a.error_code==ENONE&&(id("eptMngList").style.display="none",id("eptMngListTitle").style.display="none",closeLoading())})):(b==L?(u=Y,titleStr=label.whiteListTitle):(u=Z,titleStr=label.blackListTitle),
C(),$("#eptMngListTitle .title").text(titleStr),id("eptMngList").style.display="block",id("eptMngListTitle").style.display="block",closeLoading()))})}function Sa(a){var b={};v.length=0;M.length=0;b[uciHostsInfo.fileName]={};b[uciHostsInfo.fileName][KEY_TABLE]=uciHostsInfo.dynData.online_host;$.query(b,function(b){if(y(b[ERR_CODE])){var d,e,f=formatTableData(b[uciHostsInfo.fileName][uciHostsInfo.dynData.online_host])||[];for(d in f){e={};b=f[d];e.name=b.hostname.replace(/^\s+|\s+$/g,"");if(""==e.name||
"-"==e.name)e.name=label.anonymousHost;e.mac=b.mac.toUpperCase();e.ip=b.ip;e.mac==g_cur_host_mac.toUpperCase()?(ma.name=e.name,ma.mac=e.mac,ma.ip=e.ip):a==U&&!0==Fa(e.mac)||a==P&&!0==Ea(e.mac)||M.splice(0,0,e)}Pb(a)}})}function nb(){var a={};v.length=0;M.length=0;a[uciCustomNetwork.fileName]={};a[uciCustomNetwork.fileName][KEY_TABLE]=uciCustomNetwork.dynData.macFilterWhiteBlockList;$.query(a,function(a){if(y(a[ERR_CODE])&&null!=a[uciCustomNetwork.fileName]&&null!=a[uciCustomNetwork.fileName][uciCustomNetwork.dynData.macFilterWhiteBlockList]){var c,
d,e,f=formatTableData(a[uciCustomNetwork.fileName][uciCustomNetwork.dynData.macFilterWhiteBlockList])||[];for(c in f){a={};d=f[c];a.mac=d.mac.toUpperCase();e=parseInt(d.interval);a.tip=86400<=e?""+String(parseInt(e/86400))+"天前":3600<=e?""+String(parseInt(e/3600))+"小时前":60<=e?""+String(parseInt(e/60))+"分钟前":"刚刚";e=a;var h;a:{h=Ta.length;d=d.mac.substring(0,8).toUpperCase();var g=void 0;if(void 0!=MacBrands){d=d.replace(/:/g,"-");for(var p=0;p<h;p++)if(void 0!=(g=MacBrands[Ta[p].br])&&0<=g.indexOf(d)){h=
Ta[p].ch;break a}}h="-"}e.name=h;M.splice(0,0,a)}Qb()}})}function ob(a){var b=id("showStaDiv");document.body.removeChild(b);Sa(a)}function Pb(a){if(null==id("showStaDiv")){var b;new DataGrid;a!=P&&M.push(ma);b=document.createElement("div");b.className="VigNetControlCon";b.id="showStaDiv";document.body.appendChild(b);pb(a);a==P&&qb(a);showCoverB(function(){b.style.visibility="visible";b.style.top="150px"})}}function Qb(){if(null==id("showStaDiv")){var a;a=document.createElement("div");a.className=
"VigNetControlCon";a.id="showStaDiv";document.body.appendChild(a);pb(V);qb(V);showCoverB(function(){a.style.visibility="visible";a.style.top="150px"})}}function Rb(){$(".addByList").hide();$(".addByMac").show()}function Sb(){$(".addByMac").hide();$(".addByList").show()}function pb(a){var b,c,d;c=id("showStaDiv");var e=new DataGrid;b=document.createElement("div");b.className="eptConWrapper addByList";b.id="eptConWindow";c.appendChild(b);if(a==P||a==V)c=document.createElement("div"),c.className="eptConTitle",
b.appendChild(c),d=document.createElement("label"),d.className="title",d.innerHTML=label.addByList,c.appendChild(d),d=document.createElement("span"),d.className="textBtn",d.innerHTML=btn.addByMac,d.onclick=Rb,c.appendChild(d);eptGridHead=document.createElement("div");eptGridHead.className="eptConGridHead";b.appendChild(eptGridHead);c=document.createElement("label");c.className="eptSelTip";a==P?c.innerHTML=label.selOnlineDevAddedToBlackList:a==V?c.innerHTML=label.selBlockDevAddedToWhiteList:a==U&&
(c.innerHTML=label.selOnlineDevAddedToWhiteList);eptGridHead.appendChild(c);c=document.createElement("div");c.className="tableDiv";b.appendChild(c);d=document.createElement("table");d.className="dataGrid";d.id="staSelTable";c.appendChild(d);0==M.length&&(d=document.createElement("p"),d.id="bTip1",d.innerHTML="当前没有可添加的设备！",c.appendChild(d));a==U&&(c=document.createElement("h1"),c.className="eptWarn",c.innerHTML=label.addOnlineDevToWhiteListTips,b.appendChild(c));c=document.createElement("p");c.className=
"eptFullWarn";c.id="listFullWarn";c.innerHTML="列表条目超过规定个数，最多允许指定"+Ga+"个设备。";b.appendChild(c);d=document.createElement("i");c.appendChild(d);c=document.createElement("div");c.className="blockFuncEpt";b.appendChild(c);b=document.createElement("input");b.type="button";b.className="btnA subBtn";b.value="刷新";a==P?b.onclick=function(){ob(a)}:a==V?b.onclick=function(){var a=id("showStaDiv");document.body.removeChild(a);nb()}:a==U&&(b.onclick=function(){ob(a)});eptGridHead.appendChild(b);b=document.createElement("input");
b.type="button";b.className="btnA subBtn";b.value="确定";a==P?b.onclick=function(){rb(a)}:a==V?b.onclick=function(){H=0;v.length=0;for(var a=id("staSelTable").rows,b,c=a.length,d=1;d<c;d++)if(b=a[d].cells,b=b[0].childNodes[0],null!=b&&!0==b.checked){b=M[c-d-1].name;var e=M[c-d-1].mac,m={};b="";(e=String(e.match(/([0-9a-f]{2}-){5}([0-9a-f]{2})+/gi)))&&""!=e&&!Fa(e)&&(m.name=b,m.mac=e,v.push(m))}v.length+na.length>Ga?id("listFullWarn").style.display="block":(id("listFullWarn").style.display="none",oa(),
0!=v.length&&(showLoading(label.savingCfg,void 0,void 0,!1),Ha()))}:a==U&&(b.onclick=function(){rb(a)});c.appendChild(b);if(a==P||a==V)b=document.createElement("input"),b.type="button",b.className="btnA subBtn",b.value="取消",b.onclick=oa,c.appendChild(b);if(a==V)e.init({id:"staSelTable",data:M,max:Ga,edit:!1,paging:{num:8,page:1},checkIndex:1,head:[{field:"设备品牌",width:164},{field:"MAC地址",width:230},{field:"连接时间",width:150}],list:[{name:"name",type:"str"},{name:"mac",type:"mac",maxSize:30},{name:"tip",
type:"str"}]});else if(e.init({id:"staSelTable",data:M,max:Ga,edit:!1,paging:{num:8,page:1},checkIndex:1,head:[{field:"设备",width:164},{field:"MAC地址",width:230},{field:"IP地址",width:150}],list:[{name:"name",type:"host"},{name:"mac",type:"mac",maxSize:30},{name:"ip",type:"ip"}],selAllHd:Tb}),a==U)for(e=id("staSelTable").rows,b=1;b<e.length;b++)c=e[b].cells[0].childNodes[0],null!=c&&"none"!=e[b].style.display&&(d=e[b].cells[1].title,e[b].cells[2].title.toUpperCase()==ma.mac.toUpperCase()&&(e[b].cells[1].innerHTML=
d+"（本机）",c.checked=!0,c.disabled=!0))}function qb(a){var b,c,d;c=id("showStaDiv");new DataGrid;b=document.createElement("div");b.className="eptConWrapper disNone addByMac";b.id="eptConWindow";c.appendChild(b);c=document.createElement("div");c.className="eptConTitle";b.appendChild(c);d=document.createElement("label");d.className="title";d.innerHTML=label.addByMac;c.appendChild(d);d=document.createElement("span");d.className="textBtn";d.innerHTML=btn.addByList;d.onclick=Sb;c.appendChild(d);eptGridHead=
document.createElement("div");eptGridHead.className="eptConGridHead";b.appendChild(eptGridHead);c=document.createElement("h1");c.className="eptSelTip";c.innerHTML=a==V?label.addToWhiteListByMac:label.addToBlackListByMac;eptGridHead.appendChild(c);eptForm=document.createElement("ul");eptForm.className="eptForm";b.appendChild(eptForm);eptFormItem=document.createElement("li");eptFormItem.className="eptFormItem";eptForm.appendChild(eptFormItem);eptLabel=document.createElement("label");eptLabel.className=
"label";eptLabel.innerHTML=label.host;eptFormItem.appendChild(eptLabel);eptInput=document.createElement("input");eptInput.id="nameInput";eptFormItem.appendChild(eptInput);c=document.createElement("span");c.className="eptFullWarn";c.id="nameFullWarn";eptFormItem.appendChild(c);eptFormItem=document.createElement("li");eptFormItem.className="eptFormItem";eptForm.appendChild(eptFormItem);eptLabel=document.createElement("label");eptLabel.className="label";eptLabel.innerHTML=label.mac;eptFormItem.appendChild(eptLabel);
eptInput=document.createElement("input");eptInput.id="macInput";eptFormItem.appendChild(eptInput);c=document.createElement("span");c.className="eptFullWarn";c.id="macFullWarn";eptFormItem.appendChild(c);c=document.createElement("div");c.className="blockFuncEpt";b.appendChild(c);b=document.createElement("input");b.type="button";b.className="btnA subBtn";b.value="确定";b.onclick=a==V?Ub:Vb;c.appendChild(b);b=document.createElement("input");b.type="button";b.className="btnA subBtn";b.value="取消";b.onclick=
oa;c.appendChild(b)}function Tb(a,b){var c=id("staSelTable").rows[a];"none"!=c.style.display&&null!=c.cells[2]?b((""!=c.cells[2].title?c.cells[2].title:c.cells[2].innerHTML)!=ma.mac):b(!0)}function rb(a){H=0;v.length=0;for(var b=id("staSelTable").rows,c,d=b.length,e=1;e<d;e++)if(c=b[e].cells,c=c[0].childNodes[0],null!=c&&!0==c.checked){c=M[d-e-1].name;var f=M[d-e-1].mac,h={};c=c.replace(/^\s+|\s+$/g,"");(f=String(f.match(/([0-9a-f]{2}-){5}([0-9a-f]{2})+/gi)))&&""!=f&&(a==P&&!Ea(f)||a==U&&!Fa(f))&&
(h.name=c,h.mac=f,v.push(h))}v.length+X.length>Wb?id("listFullWarn").style.display="block":(id("listFullWarn").style.display="none",oa(),0!=v.length?(showLoading(label.savingCfg,void 0,void 0,!1),a==P?Ua():a==U&&Ha(!1,function(){ta("on",L)})):a==U&&ta("on",L))}function Ub(){var a=$("#nameInput").val(),b=$("#macInput").val();if(""==a)$("#nameFullWarn").html("<i></i>"+errStr.nameEmptyErr).css("display","inline-block");else{$("#nameFullWarn").hide();var c=checkMac(b);if(c!=ENONE){switch(c){case EINVMACZERO:a=
errStr.macZeroErr;break;case EINVMACBROAD:a=errStr.macBroadErr;break;case EINVMACGROUP:a=errStr.macGroupErr;break;default:a=errStr.macFmtErr2}$("#macFullWarn").html("<i></i>"+a).css("display","inline-block")}else $("#macFullWarn").hide(),Fa(b)?$("#macFullWarn").html("<i></i>"+errStr.macExistErr).css("display","inline-block"):($("#macFullWarn").hide(),H=0,v.length=0,host={name:a,mac:b},v.push(host),showLoading(label.savingCfg,void 0,void 0,!1),Ha(!0))}}function Vb(){var a=$("#nameInput").val(),b=$("#macInput").val();
if(""==a)$("#nameFullWarn").html("<i></i>"+errStr.nameEmptyErr).css("display","inline-block");else{$("#nameFullWarn").hide();var c=checkMac(b);if(c!=ENONE){switch(c){case EINVMACZERO:a=errStr.macZeroErr;break;case EINVMACBROAD:a=errStr.macBroadErr;break;case EINVMACGROUP:a=errStr.macGroupErr;break;default:a=errStr.macFmtErr2}$("#macFullWarn").html("<i></i>"+a).css("display","inline-block")}else $("#macFullWarn").hide(),Ea(b)?$("#macFullWarn").html("<i></i>"+errStr.macExistErr).css("display","inline-block"):
($("#macFullWarn").hide(),v.length=0,host={name:a,mac:b},v.push(host),showLoading(label.savingCfg,void 0,void 0,!1),Ua(!0))}}function oa(){var a=id("showStaDiv");hideCoverB(function(){a.style.visibility="hidden";a.style.top="-9999px";document.body.removeChild(a)})}function Ea(a){if(0==X.length)return!1;for(var b=0;b<X.length;b++)if(a.toUpperCase()==X[b].mac.toUpperCase())return!0;return!1}function Fa(a){if(0==na.length)return!1;for(var b=0;b<na.length;b++)if(a.toUpperCase()==na[b].mac.toUpperCase())return!0;
return!1}function Ha(a,b){if(H<v.length){var c={},d={},e={};c[uciCustomNetwork.fileName]=d;d[KEY_TABLE]=uciCustomNetwork.dynData.macFilterWhiteEntry;d[KEY_NAME]="white_"+v[H].mac.replace(/-/g,"").toLowerCase();d[KEY_PARA]=e;e.hostname=v[H].name;e.mac=v[H].mac.toUpperCase();e.enable="on";e.owner=uciCustomNetwork.optValue.owner.web;e[uciCustomNetwork.optName.accessRight]=uciCustomNetwork.optValue.accessRight.allAllow;$.add(c,function(c){if(a){switch(c[ERR_CODE]){case ENONE:oa();closeLoading();C();return;
case EINVMACFMT:c=errStr.macFmtErr2;break;case EINVMACZERO:c=errStr.macZeroErr;break;case EINVMACBROAD:c=errStr.macBroadErr;break;case EINVMACGROUP:c=errStr.macGroupErr;break;default:c=errStr.invRequestFail;showAlert(c);return}$("#macFullWarn").html("<i></i>"+c).css("display","inline-block");closeLoading()}else $("#macFullWarn").hide(),y(c[ERR_CODE])?(H++,Ha(!1,b)):(closeLoading(),C())})}else closeLoading(),C(),"function"==typeof b&&b()}function Ua(a){if(H<v.length){var b={},c={},d={};b[uciCustomNetwork.fileName]=
c;c[KEY_TABLE]=uciCustomNetwork.dynData.macFilterBlackEntry;c[KEY_NAME]="black_"+v[H].mac.replace(/-/g,"").toLowerCase();c[KEY_PARA]=d;d.hostname=v[H].name;d.mac=v[H].mac.toUpperCase();d.enable="on";d.owner=uciCustomNetwork.optValue.owner.web;d[uciCustomNetwork.optName.accessRight]=uciCustomNetwork.optValue.accessRight.allForbid;$.add(b,function(b){if(a){switch(b[ERR_CODE]){case ENONE:oa();closeLoading();C();return;case EINVMACFMT:b=errStr.macFmtErr2;break;case EINVMACZERO:b=errStr.macZeroErr;break;
case EINVMACBROAD:b=errStr.macBroadErr;break;case EINVMACGROUP:b=errStr.macGroupErr;break;default:b=errStr.invRequestFail;showAlert(b);return}$("#macFullWarn").html("<i></i>"+b).css("display","inline-block");closeLoading()}else $("#macFullWarn").hide(),y(b[ERR_CODE])?(H++,Ua()):(closeLoading(),C())})}else closeLoading(),C()}function Nb(a){sb=a;"wifiHost"==a?tb():"bGuestEpt"==a?ub():"limitedEpt"==a&&(gMacFilterSupport?(F==S?($("#deviceNum").text(label.blackWhiteListSwitch),id("eptMngConTitle").style.display=
"block",id("routerSelLi").style.display="none",id("eptMngList").style.display="none",id("eptMngListTitle").style.display="none",id("eptMngDetail").style.display="none",id("blackWhiteListSwitchBlock").style.display="block",id("blackListOn").checked=!1,id("whiteListOn").checked=!1,id("off").checked=!0,u=Va,D=!1):(a=F==T?label.blackListTitle:label.whiteListTitle,id("eptMngConTitle").style.display="block",id("routerSelLi").style.display="none",id("eptMngList").style.display="block",id("eptMngListTitle").style.display=
"block",id("eptMngDetail").style.display="none",id("blackWhiteListSwitchBlock").style.display="block",id("blackListOn").checked=F==T,id("whiteListOn").checked=F==L,$("#eptMngListTitle .title").text(a),u=F==T?Z:Y,D=!1,C()),kb==uciCustomNetwork.optValue.owner.andlink&&F==L&&(id("blackListOn").disabled=!0,id("whiteListOn").disabled=!0,id("off").disabled=!0)):(id("eptMngConTitle").style.display="block",id("routerSelLi").style.display="none",id("eptMngList").style.display="block",id("eptMngDetail").style.display=
"none",u=pa,D=!1,C()))}function C(){window.clearTimeout(vb);if(!1==D&&!1==ua)if(0==aa||"limitedEpt"==sb){var a=Xb,b={};b[uciHostsInfo.fileName]={};b[uciHostsInfo.fileName][KEY_TABLE]=uciHostsInfo.dynData.host_info;b[uciHostsInfo.fileName][KEY_NAME]=uciHostsInfo.dynData.capHostNum;b[uciNetwork.fileName]={};b[uciNetwork.fileName][KEY_NAME]=uciNetwork.dynData.ifaceMac;b[uciPlc.fileName]={};b[uciPlc.fileName][KEY_TABLE]=[uciPlc.secType.connectedExt];gMacFilterSupport&&(b[uciCustomNetwork.fileName]={},
b[uciCustomNetwork.fileName][KEY_TABLE]=[uciCustomNetwork.dynData.macFilterBlackEntry,uciCustomNetwork.dynData.macFilterWhiteEntry]);$.query(b,a,!0)}else Yb(Zb);vb=$.setTimeout(C,$b)}function Yb(a){var b={};b[uciNetwork.fileName]={};b[uciNetwork.fileName][KEY_NAME]=uciNetwork.dynData.ifaceMac;b[uciHostsInfo.fileName]={};b[uciHostsInfo.fileName][KEY_NAME]=uciHostsInfo.dynData.capHostNum;b[uciPlc.fileName]={};b[uciPlc.fileName][KEY_TABLE]=[uciPlc.secType.connectedExt];$.query(b,function(c){ENONE==c[ERR_CODE]&&
(Wa=c[uciNetwork.fileName][uciNetwork.dynData.ifaceMac].host);z=formatTableData(c[uciPlc.fileName][uciPlc.secType.connectedExt]);var d=0,e=0;ha=[];I.splice(0,I.length);I.push({str:"全部",value:0});f=ia==W?c[uciHostsInfo.fileName][uciHostsInfo.dynData.capHostNum].host_num:c[uciHostsInfo.fileName][uciHostsInfo.dynData.capHostNum].guest_num;I.push({str:Da(va),title:va,value:1,staCount:f});d+=c[uciHostsInfo.fileName][uciHostsInfo.dynData.capHostNum].host_num;e+=c[uciHostsInfo.fileName][uciHostsInfo.dynData.capHostNum].guest_num;
ha.push([d,e]);for(c=0;c<z.length;c++){var d=Da(z[c].name)||"子路由",f=ia==W?z[c].sta_num_host:z[c].sta_num_guest;I.push({str:d,title:z[c].name,value:c+2,staCount:f});d=z[c].sta_num_host;e=z[c].sta_num_guest;ha.push([d,e])}b={};b[uciHostsInfo.fileName]={};1==aa?b[uciHostsInfo.fileName].get_cap_host=null:(b[uciHostsInfo.fileName].get_ext_host={},b[uciHostsInfo.fileName].get_ext_host.mac=z[aa-2].mac);$.action(b,a,!0)},!0)}function ac(a){var b={};b[uciGuestNet.fileName]={};b[uciGuestNet.fileName][KEY_TABLE]=
uciGuestNet.secType.guest;$.query(b,a)}function Mb(a){ac(function(b){var c=!1,d=!1,e=!1,f,h={};if($.local)d=c=!0;else try{if(null==b[uciGuestNet.fileName]||null==b[uciGuestNet.fileName][uciGuestNet.secType.guest]){d=c=!1;a(c||d);return}f=b[uciGuestNet.fileName][uciGuestNet.secType.guest];for(var g in f)f[g][uciGuestNet.secName.wireless2G]&&(h[uciGuestNet.secName.wireless2G]=f[g][uciGuestNet.secName.wireless2G]),f[g][uciGuestNet.secName.wireless5G]&&(h[uciGuestNet.secName.wireless5G]=f[g][uciGuestNet.secName.wireless5G]);
null==h[uciGuestNet.secName.wireless2G]?c=!1:(e=h[uciGuestNet.secName.wireless2G][uciGuestNet.optName.enable],c=e==ba?!0:!1);null==h[uciGuestNet.secName.wireless5G]?d=!1:(e=h[uciGuestNet.secName.wireless5G][uciGuestNet.optName.enable],d=e==ba?!0:!1)}catch(p){}a(c||d)})}function tb(){id("eptMngConTitle").style.display="block";id("routerSelLi").style.display="block";id("eptMngList").style.display="block";id("eptMngDetail").style.display="none";gMacFilterSupport&&(id("eptMngListTitle").style.display=
"none",id("blackWhiteListSwitchBlock").style.display="none");ia=u=W;D=!1;C()}function ub(){id("eptMngConTitle").style.display="block";id("routerSelLi").style.display="block";id("eptMngList").style.display="block";id("eptMngDetail").style.display="none";gMacFilterSupport&&(id("eptMngListTitle").style.display="none",id("blackWhiteListSwitchBlock").style.display="none");ia=u=wa;D=!1;C()}function wb(a){return a[A]==w.unBlock&&a.type!=w.wirelessG||a[A]==w.block?!0:!1}function xb(a){return a[A]==w.unBlock&&
a.type==w.wirelessG||a[A]==w.block?!0:!1}function bc(a){return a.owner==uciCustomNetwork.optValue.owner.web&&-1<a[".name"].indexOf("black")?!0:!1}function cc(a){return a.owner==uciCustomNetwork.optValue.owner.web&&-1<a[".name"].indexOf("white")?!0:!1}function dc(a){return a.blocked==w.block?!0:!1}function ec(){xa();ya(Z)}function fc(){xa();ya(Y)}function gc(){$("#deviceNum").text(label.blackWhiteListSwitch)}function xa(){var a=label.linkedEpt,b=0;if(gMacFilterSupport)if(Z==u||Y==u)$("#deviceNum").text(label.blackWhiteListSwitch);
else{for(var c=0;c<B.length;c++)B[c][A]!=w.block&&b++;$("#deviceNum").text(a+b+label.entry)}else{if(pa==u)a=label.limitedEpt,b=B.length;else for(c=0;c<B.length;c++)B[c][A]!=w.block&&b++;$("#deviceNum").text(a+b+label.entry)}a=ha;for(c=b=0;c<a.length;c++)b+=parseInt(a[c][0])+parseInt(a[c][1]);a=b;99<a&&(routeMgtTag.css("background","url(../web-static/images/hint_long_orange.png"),routeMgtTag.css("display","inline-block"),routeMgtTag.css("width","62px"),routeMgtTag.css("line-height","32px"),routeMgtTag.css("height",
"32px"),routeMgtTag.css("left","132px"));routeMgtTag.html(a)}function Xb(a){var b,c=0,d=0;ha=[];if(null!=a&&null!=a[uciHostsInfo.fileName]&&null!=a[uciHostsInfo.fileName][uciHostsInfo.dynData.host_info]){ENONE==a[ERR_CODE]&&(Wa=a[uciNetwork.fileName][uciNetwork.dynData.ifaceMac].host);b=formatTableData(a[uciHostsInfo.fileName][uciHostsInfo.dynData.host_info]);gMacFilterSupport&&(X=formatTableData(a[uciCustomNetwork.fileName][uciCustomNetwork.dynData.macFilterBlackEntry]),na=formatTableData(a[uciCustomNetwork.fileName][uciCustomNetwork.dynData.macFilterWhiteEntry]));
z=formatTableData(a[uciPlc.fileName][uciPlc.secType.connectedExt]);I.splice(0,I.length);I.push({str:"全部",value:0});e=ia==W?a[uciHostsInfo.fileName][uciHostsInfo.dynData.capHostNum].host_num:a[uciHostsInfo.fileName][uciHostsInfo.dynData.capHostNum].guest_num;I.push({str:Da(va),title:va,value:1,staCount:e});c+=a[uciHostsInfo.fileName][uciHostsInfo.dynData.capHostNum].host_num;d+=a[uciHostsInfo.fileName][uciHostsInfo.dynData.capHostNum].guest_num;ha.push([c,d]);for(a=0;a<z.length;a++){var c=Da(z[a].name)||
"子路由",e=ia==W?z[a].sta_num_host:z[a].sta_num_guest;I.push({str:c,title:z[a].name,value:a+2,staCount:e});c=z[a].sta_num_host;d=z[a].sta_num_guest;ha.push([c,d])}if(!D&&!ua){E=gMacFilterSupport?b.concat(X,na):b;switch(u){case W:B=ja(wb);break;case wa:B=ja(xb);break;case pa:B=ja(dc);break;case Z:B=ja(bc);break;case Y:B=ja(cc)}J[u]()}}}function Zb(a){if(null!=a&&null!=a[uciHostsInfo.fileName]&&(a=1==aa?formatTableData(a[uciHostsInfo.fileName].get_cap_host):formatTableData(a[uciHostsInfo.fileName].get_ext_host),
!D&&!ua)){E=a;switch(u){case W:B=ja(wb);break;case wa:B=ja(xb)}J[u]()}}function yb(a,b){for(var c=a.ip.split("."),d=b.ip.split("."),e=0;4>e;e++)if(parseInt(c[e],10)!=parseInt(d[e],10))return parseInt(c[e],10)>parseInt(d[e],10)?1:-1;return 0}function ja(a){var b=[],c=[],d=[],e,f,h=0,g=0,p=0,q,m;for(m in E){e=E[m];f=e[x];if(0==f.length||"00-00-00-00-00-00"==f)break;e[A]==w.unBlock?e.type==w.inet||e.type==w.wirelessH?g++:p++:h++;zb(e);"function"==typeof a&&!0==a(e)&&(Wa==f?(e[qa]=hc,q=e):e.is_mesh&&
"1"==e.is_mesh?c.push(e):e[A]==w.block?d.push(e):b.push(e))}if(!gMacFilterSupport||gMacFilterSupport&&u!=Z&&u!=Y&&u!=Va)c.sort(yb),b.sort(yb);void 0!=q&&b.unshift(q);for(a=c.length-1;0<=a;a--)b.unshift(c[a]);for(a=0;a<d.length;a++)b.push(d[a]);return b}function zb(a){for(var b=MacFactoryArr,c=b.length-2,d,e=b[c+1],f=a.mac.substring(0,8).toUpperCase(),h,f=f.replace(/:/g,"-"),g=0;g<c;g++)if(d=b[g],a[Ia]==w.inet){e=b[c];break}else if(void 0!=(h=MacBrands[d.name])&&0<=h.indexOf(f)){e=d;break}a.posX=e.posX+
"px";a.posY=e.posY+"px"}function ya(a){var b,c,d,e,f,h,g=id("eptMngList");emptyNodes(g);0!=aa&&(I[aa].staCount=B.length);id("routerSel").resetOptions(I,aa);if(gMacFilterSupport)if(e=u==Z?T:u==Y?L:S,b=document.createElement("p"),b.className="title",g.appendChild(b),u==Y){var p=$('<input id="addWhiteListDev" type="button" class="btnB subBtn" value="'+label.addWhiteListDev+'">');$(b).append(p);$("#addWhiteListDev").click(nb);p=$('<label id="devCount">'+label.whiteListDevNum+B.length+label.entry+"</label>");
$(b).append(p)}else u==Z&&(p=$('<input id="addBlackListDev" type="button" class="btnB subBtn" value="'+label.addBlackListDev+'">'),$(b).append(p),$("#addBlackListDev").click(function(){Sa(P)}),p=$('<label id="devCount">'+label.blackListDevNum+B.length+label.entry+"</label>"),$(b).append(p));for(var p=0,q=B.length;p<q;p++){b=B[p];c=document.createElement("div");c.className="eptConC";g.appendChild(c);f=document.createElement("div");f.className="eptCon";c.appendChild(f);h=document.createElement("pre");
h.className="name";g_cur_host_mac.toUpperCase()==b[x].toUpperCase()?b[qa]=!0:b[qa]=!1;c="";width=195;if(pa!=a)if(!0==b[qa])0<parseInt(b[N])||0<parseInt(b[O])?(width-=95,c+=label.lBrackets+label.bHost+label.slash+label.bLimit+label.rBrackets):(width-=60,c=label.lBrackets+label.bHost+label.rBrackets);else if(0<parseInt(b[N])||0<parseInt(b[O]))width-=60,c=label.lBrackets+label.bLimit+label.rBrackets;d=b[Q];if(void 0==d||0==d.length)d=label.anonymousHost,b[Q]="";h.innerHTML='<span class="name" style="max-width:'+
width+'px">'+htmlEscape(d)+"</span><span>"+c+"</span>";f.appendChild(h);$(f).find("span.name").attr("title",d);c=document.createElement("p");c.className="vs";gMacFilterSupport?e==S?ca||(c.innerHTML=label.realTimeSpeed+label.colon+label.upSpeed+za(b[Xa])+"<span>"+label.downSpeed+za(b[Ya])+"</span>"):c.innerHTML=label.mac+label.colon+b[x].toUpperCase():ca||(c.innerHTML=b[A]!=Ja?label.realTimeSpeed+label.colon+label.upSpeed+za(b[Xa])+"<span>"+label.downSpeed+za(b[Ya])+"</span>":label.mac+label.colon+
b[x].toUpperCase());f.appendChild(c);c=document.createElement("i");b.is_mesh&&"1"==b.is_mesh?c.className="logo router":(c.className="logo",c.style.backgroundPosition=b.posX+" "+b.posY);f.appendChild(c);c=document.createElement("i");c.className="logoShade";f.appendChild(c);b.is_mesh&&"1"==b.is_mesh&&(c=document.createElement("i"),c.className="qMark",c.onclick=function(){showConfirm(label.reorganizeNetworkTips,function(a){!0==a&&addChildRt(!0)},btn.reorganizeNetwork,btn.notNow)},f.appendChild(c));c=
document.createElement("div");c.className="eptFunc";f.appendChild(c);f=document.createElement("input");f.type="button";f.className="subBtn";f.value=btn.manage;if(gMacFilterSupport&&e!=S||!gMacFilterSupport&&b[A]==Ja)f.style.display="none";f.onclick=function(a){return function(){n=a;id("eptMngConTitle").style.display="none";id("eptMngList").style.display="none";id("eptMngDetail").style.display="block";u=Ab;C()}}(b);c.appendChild(f);if(!0!=b[qa]){f=document.createElement("input");f.type="button";f.className=
"subBtn";f.value=btn.disableTile2;if(gMacFilterSupport&&(e!=S||F!=T)||!gMacFilterSupport&&b[A]==Ja)f.style.display="none";f.onclick=function(a){return function(){showConfirm(label.limitPrompt,function(b){b&&Bb(a,w.block,void 0)})}}(b);c.appendChild(f)}f=document.createElement("input");f.type="button";f.className="subBtn";f.value=btn.enableTile2;if(gMacFilterSupport&&e!=T||!gMacFilterSupport&&b[A]!=Ja)f.style.display="none";f.onclick=function(a){return function(){mb(a)}}(b);c.appendChild(f);gMacFilterSupport&&
(f=document.createElement("input"),f.type="button",f.className="subBtn disNone",f.value=btn.del,!1==b[qa]&&(e==L||e==S&&F==L)&&(f.style.display="inline"),f.onclick=function(a){return function(){ic(a)}}(b),c.appendChild(f))}}function za(a){a=parseInt(a);a=1073741824<=a?(a/1073741824).toFixed(0)+"GB/s":1048576<=a?(a/1048576).toFixed(0)+"MB/s":(a/1024).toFixed(0)+"KB/s";return a.toString()}function ka(){G++;ua=!0}function fa(){G--;0>=G&&(ua=!1)}function mb(a,b){Bb(a,w.unBlock,b)}function ic(a){showConfirm(label.deleteWhiteListDev+
a.hostname+"？",function(b){var c={};b&&(showLoading(statusStr.waiting,void 0,void 0,!1),b="white_"+a.mac.replace(/-/g,"").toLowerCase(),c[uciCustomNetwork.fileName]={},c[uciCustomNetwork.fileName][KEY_NAME]=b,$.del(c,function(b){b.error_code==ENONE&&(a[".name"]="",J[u](),closeLoading())}))})}function Bb(a,b,c){if(!(0<G)){var d={};if(gMacFilterSupport){var e={};d[uciCustomNetwork.fileName]={};d[uciCustomNetwork.fileName][KEY_NAME]="black_"+a.mac.replace(/-/g,"").toLowerCase();ka();showLoading(statusStr.waiting,
void 0,void 0,!1);b==w.unBlock?$.del(d,function(){a[".name"]="";J[u]();fa();closeLoading();c&&"function"==typeof c&&c()}):(d[uciCustomNetwork.fileName][KEY_TABLE]=uciCustomNetwork.dynData.macFilterBlackEntry,d[uciCustomNetwork.fileName][KEY_PARA]=e,e.hostname=a[Q],e.mac=a[x].toUpperCase(),e.enable="on",e.owner=uciCustomNetwork.optValue.owner.web,e[uciCustomNetwork.optName.accessRight]=uciCustomNetwork.optValue.accessRight.allForbid,$.add(d,function(){a[A]=b;J[u]();fa();closeLoading();c&&"function"==
typeof c&&c()}))}else e={},d[uciHostsInfo.fileName]={},d[uciHostsInfo.fileName][uciHostsInfo.dynData.setBlockFlag]=e,e[x]=a[x],e[Ka]=b,e[Aa]=a[Q],e[O]=a[O],e[N]=a[N],e[uciHostsInfo.optName.forbidDomain]=a[uciHostsInfo.secName.forbidDomain],e[uciHostsInfo.optName.limitTime]=a[uciHostsInfo.optName.limitTime],ka(),$.action(d,fa),a[A]=b,J[u]()}}function jc(a){function b(b,c,d,e,r,l){var k=!0;q=t.createElement("li");p.appendChild(q);f=t.createElement("i");f.className=b?"down":"up";q.appendChild(f);ca||
(h=t.createElement("p"),h.innerHTML=za(c),q.appendChild(h),"0"==d&&(k=!1),g=t.createElement("span"),g.className=da+" speedDesc",g.innerHTML=e,!k&&(g.style.display="none"),q.appendChild(g),m=t.createElement("input"),m.type="text",m.className=da+" "+La,m.value=d,m.maxLength=kc,m.style.display="none",m.onblur=function(a,b,c){return function(){Cb(a,b,c)}}(a,m,l),m.onkeyup=function(a,b,c){return function(d){d=d||window.event;13==d.keyCode&&Cb(a,b,c)}}(a,m,l),q.appendChild(m),g=t.createElement("span"),
g.className=Za+" "+da,g.innerHTML=d,g.onclick=ib(Db,g),!k&&(g.style.display="none"),q.appendChild(g),g=t.createElement("span"),g.className=da+" unit",g.innerHTML="KB/s",!k&&(g.style.display="none"),q.appendChild(g),m=t.createElement("input"),m.type="button",m.className="subBtn eqtBtn "+da,m.value=btn.cancelSpeedLimit,m.onclick=function(a,b){return function(){0<G||($(b.parentNode).find("."+La).val("0"),Ma(b,da,ra),D=!1,Eb(a,"0",l))}}(a,m,l),!k&&(m.style.display="none"),q.appendChild(m),g=t.createElement("span"),
g.className=ra,g.innerHTML=r,k&&(g.style.display="none"),q.appendChild(g));m=t.createElement("input");m.type="button";m.className="subBtn eqtBtn "+ra;m.value=btn.speedLimit;ca?m.onclick=function(a){return function(){showConfirm(label.closeHnatNote,function(a){a&&$a()})}}(m):(m.onclick=ib(Db,m),k&&(m.style.display="none"));q.appendChild(m)}var c,d,e,f,h,g,p,q,m,t=document;c=id("eptMngDetail");emptyNodes(c);d=t.createElement("div");d.className="eptTitle";c.appendChild(d);f=t.createElement("i");a.is_mesh&&
"1"==a.is_mesh?f.className="router":f.style.backgroundPosition=a.posX+" "+a.posY;d.appendChild(f);h=t.createElement("p");d.appendChild(h);e=a[Q];if(void 0==e||0==e.length)e=label.anonymousHost,a[Q]="";g=t.createElement("span");g.innerHTML="<pre>"+htmlEscape(getStrInMax(e,Fb))+"</pre>";g.className="name";g.onclick=lc;g.title=e;h.appendChild(g);m=t.createElement("input");m.type="text";m.style.display="none";m.maxLength=Gb;m.value=e;m.onblur=function(a){return function(){Hb(a,this)}}(a);m.onkeyup=function(a){return function(b){b=
b||window.event;13==b.keyCode&&Hb(a,this)}}(a);h.appendChild(m);g=t.createElement("span");g.innerHTML=w.inet==a[Ia]||w.wirelessG==a[Ia]?"IP"+label.colon+a[Ba]+" | MAC"+label.colon+a[x].toUpperCase()+" | "+mc[a[Ia]]:a[ab]==w.wireless2G?"IP"+label.colon+a[Ba]+" | MAC"+label.colon+a[x].toUpperCase()+" | "+label.wireless2GLink:a[ab]==w.wireless5G?"IP"+label.colon+a[Ba]+" | MAC"+label.colon+a[x].toUpperCase()+" | "+label.wireless5GLink:a[ab]==w.wireless5G1?"IP"+label.colon+a[Ba]+" | MAC"+label.colon+a[x].toUpperCase()+
" | "+label.wireless5G1Link:"IP"+label.colon+a[Ba]+" | MAC"+label.colon+a[x].toUpperCase()+" | "+label.wireless5G2Link;d.appendChild(g);d=t.createElement("div");d.className="eptSpeedInfo";c.appendChild(d);p=t.createElement("ul");d.appendChild(p);b(!1,a[Xa],a[N],label.upSpeedLimit,label.upNoSpeedLimit,N);b(!0,a[Ya],a[O],label.downSpeedLimit,label.downNoSpeedLimit,O);h=t.createElement("p");h.className="title";h.innerHTML=label.netTimeLimit;c.appendChild(h);d=t.createElement("div");d.className="netControl";
c.appendChild(d);e=t.createElement("div");e.className="netControlList";e.id="staLimitTimeListId";d.appendChild(e);R=a[uciHostsInfo.optName.limitTime]&&a[uciHostsInfo.optName.limitTime].split(",")||[];bb(R);h=t.createElement("p");h.className="newItem";d.appendChild(h);g=t.createElement("span");g.innerHTML=label.enableLimitTime;g.onclick=ca?function(){showConfirm(label.closeHnatNote,function(a){a&&$a(function(){R.length<Na&&ea(function(){ga(!0,R)})})})}:function(){R.length<Na&&ea(function(){ga(!0,R)})};
h.appendChild(g);g.className=R.length>=Na?"netControlAddDis":"netControlAdd";h=t.createElement("p");h.className="title";h.innerHTML=label.limitDomain;c.appendChild(h);divDomainP=t.createElement("div");divDomainP.className="netControl";c.appendChild(divDomainP);divDomainDetail=t.createElement("div");divDomainDetail.className="netControlList";divDomainDetail.id="staForbidDomainListId";divDomainP.appendChild(divDomainDetail);K=a[uciHostsInfo.optName.forbidDomain]&&a[uciHostsInfo.optName.forbidDomain].split(",")||
[];cb(K);h=t.createElement("p");h.className="newItem";divDomainP.appendChild(h);g=t.createElement("span");g.innerHTML=label.enableForbidDomain;g.onclick=function(){K.length<db&&la(function(){sa(!0,K)})};h.appendChild(g);g.className=K.length>=db?"netControlAddDis":"netControlAdd"}function Ib(a,b){var c={},d={};c[uciHostsInfo.fileName]={};c[uciHostsInfo.fileName][b]=d;d[x]=a[x];d[Ka]=a[A];d[Aa]=a[Q];d[O]=a[O];d[N]=a[N];d[Jb]=a[Jb];d[Kb]=a[Kb];ka();$.action(c,function(){fa();C()})}function Eb(a,b,c){0<
G||!checkNum(b)||(b=parseInt(b),b>Oa&&(b=Oa),a[c]!=b&&(a[c]=b+"",Ib(a,uciHostsInfo.dynData.setFluxLimit)))}function lc(){0<G||($(this.parentNode).find("span").css("display","none"),$(this.parentNode).find("input").css("display","inline").select(),D=!0)}function Db(){Ma(this,ra,da);$(this.parentNode).find("."+Za).css("display","none");$(this.parentNode).find("."+La).select()}function Hb(a,b){var c=b.value,d=c;b.style.display="none";var e=c;0<G||a[Q]==e||(getCNStrLen(e)>Gb?(showAlert(errorStr.hostNameLenExceed),
D=!1):(a[Q]=e,Ib(a,uciHostsInfo.dynData.setName)));0==c.length&&(d=c=uciHostsInfo.optValue.name.defname,b.value=c);c="<pre>"+htmlEscape(getStrInMax(c,Fb))+"</pre>";$(b.parentNode).find("span").css("display","inline").attr("title",d).html(c);D=!1}function Cb(a,b,c){if(!(0<G)){var d=parseInt(b.value);checkNum(d)&&0==parseInt(d)?Ma(b,da,ra):(checkNum(d)?(d=parseInt(d),d>Oa&&(d=Oa)):d=a[c],Ma(b,ra,da),$(b.parentNode).find("."+La).css("display","none"),$(b.parentNode).find("."+Za).html(d));D=!1;Eb(a,d,
c)}}function Ma(a,b,c){0<G||($(a.parentNode).find("."+b).css("display","none"),$(a.parentNode).find("."+c).css("display","inline"),D=!0)}function y(a,b){var c="";switch(parseInt(a)){case ENONE:return!0;case ESYSTEM:c=errStr.systemErr;break;case ENOMEMORY:c=errStr.invMemoryOut;break;case ENOECHO:c=errStr.invRequestTimeout;break;case ESYSBUSY:c=errStr.systemBusy;break;case EENTRYEXIST:c=errStr.entryExistErr;break;case EENTRYNOTEXIST:c=errStr.entryNoExistErr;break;case EENTRYCONFLIC:c=errStr.entryConflicErr;
break;case ETABLEFULL:c=errStr.tableFullErr;break;case ELACKARG:c=errStr.acIncompleteArg;break;case ETIMEPERIODBLANK:b="netControlName";c=errStr.timePeriodBlank;break;case ETIMEPERIODTOOLONG:b="netControlName";c=errStr.timePeriodTooLong;break;case EINVTLBEGINTIME:b="beginHour";c=errStr.invTlBeginTime;break;case EINVTLEENDTIME:b="endHour";c=errStr.invTlEndTime;break;case EINVTLBEGINENDTIME:b="beginHour";c=errStr.invTlBeginEndTime;break;case ETLREPEATBLANK:b="netControlWeek";c=errStr.tlRepeatBlank;
break;default:c=errStr.invRequestFail}closeLoading();showAlert(c,b);return!1}function bb(a){function b(a,b){var c={},d={},e=[];if(!(0<G)){for(var f in b)a!=b[f][SEC_NAME]&&e.push(b[f][SEC_NAME]);d[x]=n[x];d[Ka]=n[A];d[Aa]=n[Q];d[O]=n[O];d[N]=n[N];d[uciHostsInfo.optName.forbidDomain]=n[uciHostsInfo.optName.forbidDomain];d[uciHostsInfo.optName.limitTime]=e.join(",");c[uciHostsInfo.fileName]={};c[uciHostsInfo.fileName][uciHostsInfo.dynData.setHostInfo]=d;ka();showLoading(statusStr.delLoading,void 0,
void 0,!1);$.action(c,function(b){closeLoading();fa();if(ENONE==b[ERR_CODE]){for(var c in R)a==R[c]&&R.splice(c,1);bb(e)}else y(b[ERR_CODE])})}}var c=id("staLimitTimeListId"),d,e;e="";var f=[];e="";for(d in a)for(var h in l)if(l[h][SEC_NAME]==a[d]&&""!=a[d]){f.push(l[h]);break}emptyNodes(c);a=document.createElement("ul");c.appendChild(a);for(var g in f)e=f[g][SEC_NAME],c=document.createElement("li"),$(c).hover(function(){$(this).find("i").css("visibility","visible")},function(){$(this).find("i").css("visibility",
"hidden")}),a.appendChild(c),d=document.createElement("i"),d.onclick=function(a,c){return function(){b(a,c)}}(e,f),c.appendChild(d),e=document.createElement("pre"),e.innerHTML=htmlEscape(getStrInMax(f[g][Aa],16)),c.appendChild(e),d=document.createElement("span"),d.innerHTML=label.limitTime+label.colon+f[g].start_time+" - "+f[g].end_time,c.appendChild(d),d=document.createElement("span"),e=("1"==f[g].mon?label.MonB+" ":"")+("1"==f[g].tue?label.TueB+" ":"")+("1"==f[g].wed?label.WenB+" ":"")+("1"==f[g].thu?
label.ThuB+" ":"")+("1"==f[g].fri?label.FriB+" ":"")+("1"==f[g].sat?label.StaB+" ":"")+("1"==f[g].sun?label.SunB+" ":""),""!=e&&(d.innerHTML=label.repeat+label.colon+e),c.appendChild(d)}function cb(a){function b(a,b){var c={},d={},e=[];if(!(0<G)){for(var f in b)a!=b[f][SEC_NAME]&&e.push(b[f][SEC_NAME]);d[x]=n[x];d[Ka]=n[A];d[Aa]=n[Q];d[O]=n[O];d[N]=n[N];d[uciHostsInfo.optName.forbidDomain]=e.join(",");d[uciHostsInfo.optName.limitTime]=n[uciHostsInfo.optName.limitTime];c[uciHostsInfo.fileName]={};
c[uciHostsInfo.fileName][uciHostsInfo.dynData.setHostInfo]=d;ka();showLoading(statusStr.delLoading,void 0,void 0,!1);$.action(c,function(b){closeLoading();fa();if(ENONE==b[ERR_CODE]){for(var c in K)a==K[c]&&K.splice(c,1);cb(e)}else y(b[ERR_CODE])})}}var c=id("staForbidDomainListId"),d,e,f=[];e="";for(d in a)for(var h in k)if(k[h][SEC_NAME]==a[d]&&""!=a[d]){f.push(k[h]);break}emptyNodes(c);a=document.createElement("ul");c.appendChild(a);for(var g in f)e=f[g][SEC_NAME],c=document.createElement("li"),
c.className="domainLi",$(c).hover(function(){$(this).find("i").css("visibility","visible")},function(){$(this).find("i").css("visibility","hidden")}),a.appendChild(c),d=document.createElement("i"),d.onclick=function(a,c){return function(){b(a,c)}}(e,f),c.appendChild(d),e=document.createElement("p"),e.innerHTML=f[g].domain,c.appendChild(e)}function ga(a,b){function c(){var a=id("limitTimeDGDivId");void 0!=a&&hideCoverB(function(){a.style.visibility="hidden";a.style.top="-9999px";document.body.removeChild(a);
Pa=null})}function d(a,b){var c=0;if(!0==b.obj.checked){for(var d=0;d<l.length;d++)!0==l[d].checked&&c++;c>Na?(showAlert(errStr.invLimitTimeSelected),l[a].checked=!1,b.obj.checked=!1):l[a].checked=!0}else l[a].checked=!1}function e(a,b){var c=id("showLimitTimeDelSelButton");l[a].checked=!0==b.obj.checked?!0:!1;if(void 0!=c){var d="delSelUn",e=null,f;for(f in l)if(!0==l[f].checked){d="delSel";e=h;break}c.className=d;c.onclick=e}}function f(){var a=label.delAllTips;!0==q(!0)&&(a=label.limitTimeUsedTips);
showConfirm(a,function(a){!1!=a&&(a={},a[uciHostsInfo.fileName]={},a[uciHostsInfo.fileName][KEY_TABLE]=uciHostsInfo.secName.limitTime,showLoading(statusStr.delLoading,void 0,void 0,!1),$.del(a,function(a){closeLoading();y(a[ERR_CODE]);ea(function(){ga(!1,[])})}))})}function h(){var a=label.delSelTips;!0==q(!1)&&(a=label.limitTimeUsedTips);showConfirm(a,function(a){if(!1!=a){a={};var b=uciHostsInfo.fileName,c=uciHostsInfo.optName.name;a[b]={};a[b][c]=[];for(var d in l)!0==l[d].checked&&a[b][c].push(l[d][SEC_NAME]);
showLoading(statusStr.delLoading,void 0,void 0,!1);$.del(a,function(a){closeLoading();y(a[ERR_CODE]);ea(function(){ga(!1,[])})})}})}function g(a){a={};var b={},d=[],e;for(e in l)!0==l[e].checked&&d.push(l[e][SEC_NAME]);0<G||(a[uciHostsInfo.fileName]={},a[uciHostsInfo.fileName][uciHostsInfo.dynData.setHostInfo]=b,b[uciHostsInfo.optName.mac]=n[uciHostsInfo.optName.mac],b[uciHostsInfo.optName.isBlocked]=n[uciHostsInfo.optName.blocked],b[uciHostsInfo.optName.name]=n[uciHostsInfo.optName.hostname],b[uciHostsInfo.optName.downLimit]=
n[uciHostsInfo.optName.downLimit],b[uciHostsInfo.optName.upLimit]=n[uciHostsInfo.optName.upLimit],b[uciHostsInfo.optName.forbidDomain]=n[uciHostsInfo.secName.forbidDomain],b[uciHostsInfo.optName.limitTime]=d.join(","),ka(),showLoading(statusStr.dealLoading,void 0,void 0,!1),$.action(a,function(a){closeLoading();fa();ENONE==a[ERR_CODE]?(R=d,c(),bb(d)):y(a[ERR_CODE]);C()}))}function p(a,b){function c(){var a=!1,b;for(b in k)a=a||0!=parseInt(k[b]);return a}var d={},e={},f=id("netControlName").value,
g=id("beginHour").value,q=id("beginMinute").value,h=id("endHour").value,p=id("endMinute").value,k=blockGrid.getData();if(0>=f.length)y(ETIMEPERIODBLANK);else if(32<getCNStrLen(f))y(ETIMEPERIODTOOLONG);else if(g+":"+q==h+":"+p||g>h||g==h&&q>p)y(EINVTLBEGINENDTIME);else if(c()){for(var n=0;n<l.length;n++)if(f==l[n].name){showAlert(errStr.invLimitTimeDescription);return}e[uciHostsInfo.optName.name]=f.replace(/^\s+|\s+$/g,"");e[uciHostsInfo.optName.mon]=k[0];e[uciHostsInfo.optName.tue]=k[1];e[uciHostsInfo.optName.wed]=
k[2];e[uciHostsInfo.optName.thu]=k[3];e[uciHostsInfo.optName.fri]=k[4];e[uciHostsInfo.optName.sat]=k[5];e[uciHostsInfo.optName.sun]=k[6];e[uciHostsInfo.optName.startTime]=g+":"+q;e[uciHostsInfo.optName.endTime]=h+":"+p;d[uciHostsInfo.fileName]={};d[uciHostsInfo.fileName][KEY_TABLE]=uciHostsInfo.secName.limitTime;d[uciHostsInfo.fileName][KEY_NAME]="limit_time_"+calcNextIndex(l);d[uciHostsInfo.fileName][KEY_PARA]=e;netControlPanelDis(!1);showLoading(statusStr.addLoading,void 0,void 0,!1);$.add(d,function(c){y(c[ERR_CODE]);
D=!1;ea(function(){closeLoading();ga(a,b)})})}else y(ETLREPEATBLANK)}function q(a){if(!0==a)for(a=0;a<E.length;a++){if(""!=E[a].limit_time)return!0}else{var b=[];for(a=0;a<l.length;a++)if(!0==l[a].checked)for(var c=0;c<E.length;c++){for(var b=E[c].limit_time&&E[c].limit_time.split(",")||[],d=0;d<b.length;d++)if(l[a][SEC_NAME]==b[d])return!0;b.length=0}}return!1}c();(function(a,b){var q=id("limitTimeDGDivId"),h,k,s,r,n;nc(b);Pa=new DataGrid;q=document.createElement("div");q.className="VigNetControlCon";
q.id="limitTimeDGDivId";document.body.appendChild(q);h=document.createElement("div");h.className="eptManageCon";h.id="eptAddTimeCon";q.appendChild(h);!0==a&&(eptTips=document.createElement("h1"),eptTips.className="eptAddTimeTips",eptTips.innerHTML=label.addLimitTimeTip,h.appendChild(eptTips));k=document.createElement("div");k.className="eptDetailCon";k.id="eptLimitTimeDetailCon";h.appendChild(k);s=document.createElement("div");s.className="blockTable blockTableMT";k.appendChild(s);r=document.createElement("ul");
r.className="gridToolBar";r.id="limitTimeFuncUlId";s.appendChild(r);k=document.createElement("li");k.innerHTML=btn.addLimitTime;k.id="addlimitTimeBtnId";r.appendChild(k);n=document.createElement("table");n.className="dataGrid1";n.id="limitTimeDGList";s.appendChild(n);s=document.createElement("div");s.className="closeManagement";s.id="limitTimeBtnDivId";h.appendChild(s);!1==a?(h=document.createElement("li"),h.onclick=f,h.id="showLimitTimeDelAllButton",h.innerHTML=btn.deleteAll,r.appendChild(h),n=document.createElement("li"),
n.onclick=null,n.id="showLimitTimeDelSelButton",n.className="delSelUn",n.innerHTML=btn.deleteSel,r.appendChild(n),r=document.createElement("input"),r.type="button",r.className="btnA subBtn",r.value=btn.close,r.onclick=c,s.appendChild(r),Pa.init({id:"limitTimeDGList",data:l,max:eb,edit:!1,hasSelBox:!1,paging:{num:8,page:1},checkIndex:1,head:[{field:label.select,width:30},{field:label.description,width:120},{field:label.limitTimeRule,width:300}],list:[{name:"checked",type:"checkbox",edit:!1,checkDis:"checkboxDisabled",
func:e},{name:"name",maxSize:32},{name:"rule",maxSize:100}],toolBar:{id:"limitTimeFuncUlId",asyn:!0}}),0<l.length?(h.className="delAll",h.onclick=f):(h.className="delAllUn",h.onclick=null)):(r=document.createElement("input"),r.type="button",r.className="btnA subBtn",r.id="showLimitTimeConfirmButton",r.value=btn.ok,r.onclick=function(){g(b)},s.appendChild(r),r=document.createElement("input"),r.type="button",r.className="btnA subBtn",r.value=btn.cancel,r.onclick=c,s.appendChild(r),Pa.init({id:"limitTimeDGList",
data:l,max:eb,edit:!1,hasSelBox:!1,paging:{num:8,page:1},checkIndex:1,head:[{field:label.select,width:30},{field:label.description,width:120},{field:label.limitTimeRule,width:300}],list:[{name:"checked",type:"checkbox",edit:!1,checkDis:"checkboxDisabled",func:d},{name:"name",maxSize:32},{name:"rule",maxSize:100}],toolBar:{id:"limitTimeFuncUlId"}}));l.length<eb?(k.className="add",k.onclick=function(){c();setNetControlPanel("","00:00","00:00",[ba,ba,ba,ba,ba,ba,ba],function(){p(a,b)},null,null,function(){ga(a,
b)});netControlPanelDis(!0);D=!0}):(k.className="addUn",k.onclick=null);showCoverB(function(){q.style.visibility="visible";q.style.top="150px"})})(a,b)}function nc(a){for(var b in l)if(l[b].checked=!1,0<a.length)for(var c=0;c<a.length;c++)if(l[b][SEC_NAME]==a[c]&&""!=a[c]){l[b].checked=!0;break}for(b in l)l[b].rule=l[b].start_time+" - "+l[b].end_time+"  "+("1"==l[b].mon?label.MonB+" ":"")+("1"==l[b].tue?label.TueB+" ":"")+("1"==l[b].wed?label.WenB+" ":"")+("1"==l[b].thu?label.ThuB+" ":"")+("1"==l[b].fri?
label.FriB+" ":"")+("1"==l[b].sat?label.StaB+" ":"")+("1"==l[b].sun?label.SunB+" ":"")}function oc(a,b){function c(a,b){var c=id("showDomainInputPanelId"),g=id("domainInputField"),p="",q="",m={},t={},q=/[^A-Za-z0-9.-]/;if(void 0!=c&&void 0!=g)if(p=g.value.replace(/^\s+|\s+$/g,""),""==p)showAlert(errStr.invEmptyDomainDescription);else if(q.test(p))showAlert(errStr.invInvalidDomainDescription);else{for(var l in k)if(p.toUpperCase()==k[l].domain.toUpperCase()){showAlert(errStr.invExistDomainDescription);
return}q="forbid_domain_"+calcNextIndex(k);m[uciHostsInfo.optName.domain]=p;t[uciHostsInfo.fileName]={};t[uciHostsInfo.fileName][KEY_TABLE]=uciHostsInfo.secName.forbidDomain;t[uciHostsInfo.fileName][KEY_NAME]=q;t[uciHostsInfo.fileName][KEY_PARA]=m;d();showLoading(statusStr.addLoading,void 0,void 0,!1);$.add(t,function(c){y(c[ERR_CODE]);la(function(){closeLoading();sa(a,b)})})}}function d(){var a=id("showDomainInputPanelId");void 0!=a&&hideCoverB(function(){a.style.visibility="hidden";a.style.top=
"-9999px";document.body.removeChild(a)})}d();(function(a,b){var h=label.initDomainTips,g,k,q,m;g=document.createElement("div");g.className="VigNetControlCon";g.id="showDomainInputPanelId";document.body.appendChild(g);k=document.createElement("div");k.className="eptInputDomainCon";k.id="eptInputDomainCon";g.appendChild(k);q=document.createElement("div");q.className="domainInputDiv";q.id="domainInputDiv";k.appendChild(q);m=document.createElement("div");m.className="btns";k.appendChild(m);k=document.createElement("input");
k.type="button";k.className="btnA subBtn";k.id="domainInputPanelSaveBtn";k.value=btn.ok;k.onclick=function(){c(a,b)};m.appendChild(k);k=document.createElement("input");k.type="button";k.className="btnA subBtn";k.id="domainInputPanelCancelBtn";k.value=btn.cancel;k.onclick=function(){d();sa(a,b)};m.appendChild(k);m=document.createElement("label");m.className="domainConLabel";m.innerHTML=label.domain+label.colon;q.appendChild(m);m=document.createElement("input");m.className="domainConInput";m.id="domainInputField";
m.maxLength=32;m.value=h;m.onfocus=function(){this.value==h&&(this.value="")};q.appendChild(m);showCoverB(function(){g.style.visibility="visible";g.style.top="150px"})})(a,b)}function pc(a){for(var b in k)if(k[b].checked=!1,0<a.length)for(var c=0;c<a.length;c++)if(k[b][SEC_NAME]==a[c]&&""!=a[c]){k[b].checked=!0;break}}function sa(a,b){function c(){var a=id("forbidDomainDGDivId");void 0!=a&&hideCoverB(function(){a.style.visibility="hidden";a.style.top="-9999px";document.body.removeChild(a);Qa=null})}
function d(a,b){var c=0;if(!0==b.obj.checked){for(var d=0;d<k.length;d++)!0==k[d].checked&&c++;c>db?(showAlert(errStr.invDomainSelected),k[a].checked=!1,b.obj.checked=!1):k[a].checked=!0}else gForbidDomain[a].checked=!1}function e(a,b){var c=id("showForbidDomainDelSelButton");k[a].checked=!0==b.obj.checked?!0:!1;if(void 0!=c){var d="delSelUn",e;for(e in k)if(!0==k[e].checked){d="delSel";break}c.className=d;c.onclick=h}}function f(){var a=label.delAllTips;!0==l(!0)&&(a=label.forbidDomainUsedTips);
showConfirm(a,function(a){!1!=a&&(a={},a[uciHostsInfo.fileName]={},a[uciHostsInfo.fileName][KEY_TABLE]=uciHostsInfo.secName.forbidDomain,showLoading(statusStr.delLoading,void 0,void 0,!1),$.del(a,function(a){closeLoading();y(a[ERR_CODE]);la(function(){sa(!1,[])})}))})}function h(){var a=label.delSelTips;!0==l(!1)&&(a=label.forbidDomainUsedTips);showConfirm(a,function(a){if(!1!=a){a={};var b=uciHostsInfo.fileName,c=uciHostsInfo.optName.name;a[b]={};a[b][c]=[];for(var d in k)!0==k[d].checked&&a[b][c].push(k[d][SEC_NAME]);
showLoading(statusStr.delLoading,void 0,void 0,!1);$.del(a,function(a){closeLoading();y(a[ERR_CODE]);la(function(){sa(!1,[])})})}})}function g(a){a={};for(var b={},d=[],e=0;e<k.length;e++)for(var f=0;f<K.length;f++)k[e][SEC_NAME]==K[f]&&(k[e].checked?k[e].checked=!1:K.splice(f,1));d=K.slice(0);for(e=0;e<k.length;e++)k[e].checked&&d.unshift(k[e][SEC_NAME]);0<G||(a[uciHostsInfo.fileName]={},a[uciHostsInfo.fileName][uciHostsInfo.dynData.setHostInfo]=b,b[uciHostsInfo.optName.mac]=n[uciHostsInfo.optName.mac],
b[uciHostsInfo.optName.isBlocked]=n[uciHostsInfo.optName.blocked],b[uciHostsInfo.optName.name]=n[uciHostsInfo.optName.hostname],b[uciHostsInfo.optName.downLimit]=n[uciHostsInfo.optName.downLimit],b[uciHostsInfo.optName.upLimit]=n[uciHostsInfo.optName.upLimit],b[uciHostsInfo.optName.limitTime]=n[uciHostsInfo.secName.limitTime],b[uciHostsInfo.optName.forbidDomain]=d.join(","),ka(),showLoading(statusStr.dealLoading,void 0,void 0,!1),$.action(a,function(a){closeLoading();fa();ENONE==a[ERR_CODE]?(K=d,
c(),cb(d)):y(a[ERR_CODE]);C()}))}function l(a){if(!0==a)for(a=0;a<E.length;a++){if(""!=E[a].forbid_domain)return!0}else{var b=[];for(a=0;a<k.length;a++)if(!0==k[a].checked)for(var c=0;c<E.length;c++){for(var b=E[c].forbid_domain&&E[c].forbid_domain.split(",")||[],d=0;d<b.length;d++)if(k[a][SEC_NAME]==b[d])return!0;b.length=0}}return!1}c();(function(a,b){var h=id("forbidDomainDGDivId"),l,n,p,s,r;pc(b);Qa=new DataGrid;h=document.createElement("div");h.className="VigNetControlCon";h.id="forbidDomainDGDivId";
document.body.appendChild(h);l=document.createElement("div");l.className="eptManageCon";l.id="eptManageDomainCon";h.appendChild(l);!0==a&&(eptTips=document.createElement("h1"),eptTips.className="eptAddTimeTips",eptTips.innerHTML=label.addDomainTip,l.appendChild(eptTips));n=document.createElement("div");n.className="eptDetailCon";n.id="eptDomainDetailCon";l.appendChild(n);p=document.createElement("div");p.className="blockTable blockTableMT";n.appendChild(p);s=document.createElement("ul");s.className=
"gridToolBar";s.id="forbidDomainFuncUlId";p.appendChild(s);n=document.createElement("li");n.innerHTML=btn.addDomain;n.id="addForbidDomainBtnId";s.appendChild(n);r=document.createElement("table");r.className="dataGrid1";r.id="forbidDomainDGList";p.appendChild(r);p=document.createElement("div");p.className="closeManagement";p.id="forbidDomainBtnDivId";l.appendChild(p);!1==a?(l=document.createElement("li"),l.onclick=null,l.id="showForbidDomainDelAllButton",l.innerHTML=btn.deleteAll,s.appendChild(l),
r=document.createElement("li"),r.onclick=null,r.id="showForbidDomainDelSelButton",r.className="delSelUn",r.innerHTML=btn.deleteSel,s.appendChild(r),s=document.createElement("input"),s.type="button",s.className="btnA subBtn",s.value=btn.close,s.onclick=c,p.appendChild(s),Qa.init({id:"forbidDomainDGList",data:k,max:fb,edit:!1,hasSelBox:!1,paging:{num:8,page:1},checkIndex:1,head:[{field:label.select,width:60},{field:label.domain,width:240}],list:[{name:"checked",type:"checkbox",edit:!1,checkDis:"checkboxDisabled",
func:e},{name:"domain"}],toolBar:{id:"forbidDomainFuncUlId",asyn:!0}}),0<k.length?(l.className="delAll",l.onclick=f):l.className="delAllUn"):(s=document.createElement("input"),s.type="button",s.className="btnA subBtn",s.value=btn.ok,s.onclick=function(){g(b)},p.appendChild(s),s=document.createElement("input"),s.type="button",s.className="btnA subBtn",s.value=btn.cancel,s.onclick=c,p.appendChild(s),Qa.init({id:"forbidDomainDGList",data:k,max:fb,edit:!1,hasSelBox:!1,paging:{num:8,page:1},checkIndex:1,
head:[{field:label.select,width:60},{field:label.domain,width:240}],list:[{name:"checked",type:"checkbox",edit:!1,checkDis:"checkboxDisabled",func:d},{name:"domain"}],toolBar:{id:"forbidDomainFuncUlId"}}));k.length<fb?(n.className="add",n.onclick=function(){c();oc(a,b)}):(n.className="addUn",n.onclick=null);showCoverB(function(){h.style.visibility="visible";h.style.top="150px"})})(a,b)}function ea(a){var b={},c=uciHostsInfo.fileName,d=uciHostsInfo.dynData.limitTime;b[c]={};b[c][KEY_TABLE]=d;$.query(b,
function(b){l=formatTableData(b[c][d])||[];"function"==typeof a&&a()})}function la(a){var b={},c=uciHostsInfo.fileName,d=uciHostsInfo.dynData.forbidDomain;b[c]={};b[c][KEY_TABLE]=d;$.query(b,function(b){k=formatTableData(b[c][d])||[];"function"==typeof a&&a()})}function gb(a){id("addForbidDomainLinkLabel").onclick=function(){la(function(){sa(!1,[])})};a?id("addLimitTimeLinkLabel").onclick=function(){showConfirm(label.closeHnatNote,function(a){a&&$a(ea(function(){ga(!1,[])}))})}:id("addLimitTimeLinkLabel").onclick=
function(){ea(function(){ga(!1,[])})}}function $a(a){var b={},c={};b[Ca]={};c[Lb]=qc;b[Ca][hb]=c;$.modify(b,function(b){b[ERR_CODE]==ENONE?(ca=!1,gb(ca),a&&a()):showAlert("关闭硬件NAT失败")})}function rc(){var a={};a[Ca]={};a[Ca][KEY_NAME]=[hb];$.query(a,function(a){a[ERR_CODE]==ENONE&&(ca=a[Ca][hb][Lb]==sc);jb();gb(ca)})}var $b=3E3,x=uciHostsInfo.optName.mac,Ia=uciHostsInfo.optName.type,A=uciHostsInfo.optName.blocked,Ka=uciHostsInfo.optName.isBlocked,O=uciHostsInfo.optName.downLimit,Ya=uciHostsInfo.optName.downSpeed,
N=uciHostsInfo.optName.upLimit,Xa=uciHostsInfo.optName.upSpeed,Jb=uciHostsInfo.optName.limitTime,Kb=uciHostsInfo.optName.forbidDomain,Ba=uciHostsInfo.optName.ip,Q=uciHostsInfo.optName.hostname,qa=uciHostsInfo.optName.isCurHost,ab=uciHostsInfo.optName.wifiMode,Aa=uciHostsInfo.optName.name,Ja=uciHostsInfo.optValue.isBlocked.yes,hc=uciHostsInfo.optValue.isCurHost.yes,ba=uciGuestNet.optValue.enable.yes,Oa=9999999,kc=6,W=0,wa=1,pa=2,Ab=3,sb,B=[],J={};J[W]=function(){xa();ya(W)};J[wa]=function(){xa();ya(wa)};
J[pa]=function(){xa();ya(pa)};J[Ab]=function(){if(n){for(var a=null,b=0;b<E.length;b++){var c=E[b];if(c[x]==n[x]){a=c;break}}if(n=a)zb(n),jc(n)}};var w={inet:uciHostsInfo.optValue.linkType.wired,wirelessH:uciHostsInfo.optValue.linkType.hostWireless,wirelessG:uciHostsInfo.optValue.linkType.guestWireless,block:uciHostsInfo.optValue.isBlocked.yes,unBlock:uciHostsInfo.optValue.isBlocked.no,wireless2G:uciHostsInfo.optValue.wifiMode.h2G,wireless5G:uciHostsInfo.optValue.wifiMode.h5G,wireless5G1:uciHostsInfo.optValue.wifiMode.h5G1,
wireless5G4:uciHostsInfo.optValue.wifiMode.h5G4},mc=[label.inetLink,label.wireless2GLink,label.wirelessLink,label.wireless5GLink],E=[],da="speedLimit",ra="noSpeedLimit",Za="digit",La="text",vb,n,u,D=!1,ua=!1,G=0,Fb=31,Gb=63,Wa="",ca=!1,sc="1",qc="0",Ca="hnat",hb="main",Lb="enable",eb=16,fb=64,Na=4,db=16,k=[],l=[],Qa=null,Pa=null,K=[],R=[];if(gMacFilterSupport){var Z=4,Y=5,Va=6,T=0,L=1,S=2,P=0,U=1,V=2,Ga=64,Wb=64,Ta=[{br:"Apple",ch:"苹果"},{br:"Samsung",ch:"三星"},{br:"OPPO",ch:"OPPO"},{br:"LG",ch:"LG"},
{br:"Lenovo",ch:"联想"},{br:"HuaWei",ch:"华为"},{br:"ZTE",ch:"中兴"},{br:"Coolpad",ch:"酷派"},{br:"XiaoMi",ch:"小米"},{br:"MeiZu",ch:"魅族"},{br:"Google",ch:"Google"},{br:"Microsoft",ch:"Microsoft"},{br:"MOTO",ch:"MOTO"},{br:"Sony",ch:"索尼"},{br:"HTC",ch:"HTC"},{br:"HP",ch:"惠普"},{br:"Dell",ch:"戴尔"},{br:"Acer",ch:"宏基"},{br:"Toshiba",ch:"东芝"},{br:"ASUS",ch:"华硕"}];J[Z]=ec;J[Y]=fc;J[Va]=gc;var kb,F,lb,X=[],na=[],H=0,ma={},M=[],v=[]}var va=document.title||"主路由",aa=0,ia,z=[],I=[{str:"全部",value:0}],ha=[];selectInit("routerSel",
I,aa,function(a){aa=a;emptyNodes(id("eptMngList"));ia==W?tb():ub()},31,{className:"routerSelOptsUl",colorN:"#FFFFFF",colorC:"#f57e4e",fontColorN:"#3C3E43",fontColorC:"#FFFFFF",valueColor:"#FFFFFF",valueDisColor:"#B2B2B2",scrollBg:"#E26D3F"});gHnatSupport?rc():(jb(),gb(!1));(function(){$.query({protocol:{name:"dhcp"}},function(a){ENONE==a.error_code&&(va=a.protocol.dhcp.hostname)})})();gMacFilterSupport&&($("#blackListOn").change(Ra),$("#whiteListOn").change(Ra),$("#off").change(Ra))}init();
</script><style type="text/css">div.menuCon{height:410px;margin:20px 15px 0 auto;overflow:hidden;padding-right:10px;position:relative;width:200px}h1.bMdelTitle{text-shadow:2px 2px #ef7f53}div.bConfLBC{background:#ff8c5e}div.bConfRBC{background:#f57e4e}#eptMngCon{height:86%}#eptMngRCon{width:664px;height:auto;min-height:auto;padding-top:16px;margin:0 16px 0 65px;box-sizing:border-box}#eptMngConTitle{width:664px;padding-right:1em;margin:0 16px 15px 65px;box-sizing:border-box}#eptMngConTitle #addLabelSpan{float:right;height:26px;padding-top:10px;box-sizing:border-box}#eptMngConTitle #addLabelSpan a{font-size:12px;color:#fff;margin-left:15px;cursor:pointer;text-decoration:underline}.switchBlock{margin-bottom:30px}.switchBlock div.block{margin:0}.switchBlock div.block ul.gridLineA{margin:0}div.title{font-size:.1px;border-bottom:1px solid #dc6839;padding-bottom:10px;position:relative;margin-bottom:30px}div.title label.title{color:#fff;font-size:18px;vertical-align:middle}#routerSelLi{float:right;border-radius:3px;border:1px solid #dc6839;background:#dc6839;margin:0 8px 0 16px;list-style:none}#routerSel{float:right;margin-right:10px;margin-left:10px}span.select span.hsValue{color:#fff;width:150px;line-height:23px;font-size:12px}#limitedEpt_rsMenu{border:none!important}li.menuLi{color:#e06c3f}li.menuLiClick{color:#fff;text-shadow:2px 2px #ef7f53}li.menuLi i.ept_host{background:url(../web-static/images/routerBg.png) -206px -171px no-repeat}li.menuLiClick i.ept_host{background:url(../web-static/images/routerBg.png) -233px -171px no-repeat}li.menuLi i.ept_guest{background:url(../web-static/images/routerBg.png) -260px -171px no-repeat}li.menuLiClick i.ept_guest{background:url(../web-static/images/routerBg.png) -288px -171px no-repeat}li.menuLi i.ept_limited{background:url(../web-static/images/routerBg.png) -206px -199px no-repeat}li.menuLiClick i.ept_limited{background:url(../web-static/images/routerBg.png) -233px -199px no-repeat}label.menuLbl{white-space:pre;cursor:pointer;margin-left:15px;vertical-align:middle}i.menuC{width:10px;height:9px;top:27px;*top:26px;right:10px;font-size:0;position:absolute;vertical-align:middle;background:url(../web-static/images/routerBg.png) -426px -89px no-repeat}li.menuLi i.menuC{visibility:hidden}li.menuLiClick i.menuC{visibility:visible}div.eptConC{height:78px;float:left;overflow:visible;width:300px;margin-bottom:74px}div.eptCon{padding-left:80px;position:relative;height:100%}div.eptCon i.logo{display:inline-block;height:50px;width:50px;position:absolute;top:0;left:10px;background:url(../web-static/images/routerBg.png) no-repeat scroll -52px -256px #dc6839;border-radius:4px}div.eptCon i.router{background:url(../web-static/images/ap_router.png) no-repeat scroll #dc6839;background-size:contain}div.eptCon i.qMark{background:url(../web-static/images/routerBg.png) no-repeat scroll -376px -331px;width:22px;height:22px;display:inline-block;position:absolute;top:-9px;left:48px;cursor:pointer}div.eptCon i.logoShade{display:inline-block;height:11px;width:71px;position:absolute;bottom:1px;left:0;background:url(../web-static/images/routerBg.png) no-repeat scroll -416px -218px transparent}div.eptCon pre{font-size:14px;color:#fff;font-weight:bold;width:195px}div.eptCon span{vertical-align:middle}div.eptCon span.name{display:inline-block;text-overflow:ellipsis;overflow:hidden}div.eptCon p.vs{color:#fff;font-size:12px;margin-bottom:8px;margin-top:8px}div.eptCon p.vs span{margin-left:5px}div.eptCon div.eptFunc{margin-top:8px}div.eptCon div.eptFunc input{width:70px;padding-top:3px;padding-bottom:3px;*padding-top:2px;*padding-bottom:1px;margin-right:14px}#eptMngDetail{padding-right:20px;display:none}#eptMngDetail p.title{border-bottom:1px solid #df6a3b;font-size:18px;color:#fff;padding-bottom:10px;padding-top:20px;margin-bottom:20px}div.eptTitle{padding-left:70px;color:#fff;position:relative}div.eptTitle p{font-size:18px;line-height:35px}div.eptTitle span.name{cursor:pointer;font-size:18px}div.eptTitle p input{background-color:#df6a3b;font-size:14px;border:none 0;border-radius:3px;height:24px;padding:1px 5px;color:#fff;width:100px}div.eptTitle span{font-size:12px}div.eptTitle i{background:url("../web-static/images/routerBg.png") no-repeat scroll -1px -1px #dc6839;border-radius:4px;display:inline-block;height:50px;left:0;position:absolute;top:0;width:50px}div.eptTitle i.router{background:url(../web-static/images/ap_router.png) no-repeat scroll #dc6839;background-size:contain}div.eptSpeedInfo{margin-top:33px;padding-left:70px}div.eptSpeedInfo ul{list-style:none outside none}div.eptSpeedInfo li{display:inline-block;*display:inline;*zoom:1;height:50px;padding-left:28px;color:#fff;position:relative;width:256px;margin-left:0;margin-right:0}div.eptSpeedInfo li i{display:inline-block;*display:inline;*zoom:1;top:1px;left:0;height:20px;width:20px;position:absolute}div.eptSpeedInfo li i.up{background:url("../web-static/images/routerBg.png") no-repeat scroll -284px -199px transparent}div.eptSpeedInfo li i.down{background:url("../web-static/images/routerBg.png") no-repeat scroll -260px -199px transparent}div.eptSpeedInfo li p{font-size:20px;line-height:20px;height:20px}div.eptSpeedInfo li span{font-size:12px;vertical-align:middle}div.eptSpeedInfo li span.speedDesc{padding-right:4px}div.eptSpeedInfo li span.unit{padding-left:4px;padding-right:2px}div.eptSpeedInfo li span.digit{background-color:#df6a3b;border:0 none;border-radius:3px;padding:4px 7px;cursor:pointer}@media screen and (-webkit-min-device-pixel-ratio:0){div.eptSpeedInfo li input.text{line-height:0!important}}div.eptSpeedInfo li input.text{background-color:#df6a3b;border:0 none;color:#fff;font-size:12px;height:22px;line-height:22px;padding:0;width:45px;border-radius:3px;vertical-align:middle;padding:0 6px}input.eqtBtn{padding:3px 6px;*padding:1px 0;vertical-align:middle;margin-left:7px}div.netControl p.newItem{margin-top:25px;padding-left:70px;margin-bottom:30px}div.netControl p.newItem span{color:#fff;font-size:12px;border-bottom:1px solid #fff;cursor:pointer}div.netControl span.netControlAdd{color:#fff;font-size:12px;border-bottom:1px solid #fff;cursor:pointer}div.netControl p.newItem span.netControlAddDis{color:lightgrey;border-bottom:1px solid lightgrey}div.netControlList ul{list-style:none outside none;margin-left:46px;margin-right:20px}div.netControlList li{height:72px;padding-left:24px;background-color:#df6a3b;font-size:0;padding-left:24px;color:#fff;margin-bottom:20px;position:relative;cursor:pointer}div.netControlList li.domainLi{height:36px;padding-left:24px;background-color:#df6a3b;font-size:0;color:#fff;margin-bottom:10px;position:relative;cursor:pointer}div.netControlList li pre{font-size:15px;font-weight:bold;padding-top:12px;margin-bottom:10px}div.netControlList li span{margin-right:10px;font-size:12px}div.netControlList li i{background:url("../web-static/images/routerBg.png") no-repeat scroll -306px -209px transparent;position:absolute;display:inline-block;*display:inline;*zoom:1;height:13px;width:13px;right:-6px;top:-6px;cursor:pointer;visibility:hidden;z-index:10}div.netControlList li p{font-size:15px;font-weight:bold;padding-top:8px}div.vigNetControl{background:none repeat scroll 0 0 #fff;height:280px;margin:20px auto;width:600px;padding-top:35px;position:relative}ul.netControlLine{line-height:26px;font-size:0;height:26px;margin-bottom:25px}ul.netControlLine label.desc{float:left;text-align:right;font-size:14px;width:113px;padding-right:12px}@media screen and (-webkit-min-device-pixel-ratio:0){ul.netControlLine input.text{line-height:0!important}}ul.netControlLine input.text{background-color:#fff;border:1px solid #f17e50;color:#000;font-size:12px;height:22px;line-height:22px;border-radius:3px;vertical-align:middle;padding:1px 6px}ul.netControlLine input.timeDesc{width:210px}ul.netControlLine li.netControlText{display:inline-block;*display:inline;*zoom:1;font-size:12px;vertical-align:middle;margin-right:20px;line-height:20px}span.netSelectSpan{display:inline-block;margin-right:8px;height:26px;width:75px;z-index:1}span.netSelect{border-radius:3px;height:100%;border:1px solid #f17e50;border-radius:3px;margin-left:0;padding-left:10px;line-height:20px}span.select span.hsTimeCon{color:#000;height:24px;line-height:24px;width:48px;border:0 none}span.select i.eptArrow{background:url("../web-static/images/routerBg.png") no-repeat scroll -445px -113px transparent;margin-right:5px;*margin-left:0!important}div.netControlBtn{text-align:center;margin-top:35px}div.netControlBtn input.eptBtnA{font-size:13px;padding:3px 20px;margin-right:20px}ul.netControlWeek{list-style:none outside none;font-size:0}ul.netControlWeek li{float:left;position:relative;margin-right:10px;line-height:24px;height:24px;font-size:12px;vertical-align:middle;border:1px solid #f17e50;border-radius:3px;padding-left:10px;padding-right:10px;cursor:pointer}ul.netControlWeek li i{background:url("../web-static/images/routerBg.png") no-repeat scroll -424px -69px transparent;position:absolute;display:inline-block;*display:inline;*zoom:1;height:13px;width:13px;right:-6px;top:-6px;visibility:hidden}div.bcRCon{overflow:hidden}div.eptInputDomainCon{background-color:#fff;margin:50px auto;overflow:hidden;position:relative;width:400px;text-align:center}div.eptManageCon{background-color:#fff;margin:0 auto;overflow:hidden;position:relative;width:656px}div.eptDetailCon{margin:30px}div.eptDetail{margin:0 30px 0 30px}table.dataGrid{border:1px solid #f57e4e;border-collapse:collapse;margin:15px 0 0;text-align:center;width:100%}table.dataGrid tr{background:#fff;border-bottom:1px solid #f57e4e}table.dataGrid td{border:1px solid #f57e4e;color:#3c3e43;height:38px;vertical-align:middle;white-space:pre}#bTip1{line-height:38px;border-width:0 1px 1px 1px;border-style:solid;border-color:#f57e4e;text-align:center;display:block}div.closeManagement{font-size:0;margin:20px 0 20px;text-align:center}div.funcManagement{font-size:0;margin:20px 0 20px;text-align:left}div.eptSelTip{color:#000;font-size:14px;font-weight:bold;margin:20px 0 0 60px}div.domainInputDiv{margin:20px 0 20px;text-align:center}div.btns{font-size:0;margin:20px 0 20px;text-align:center}label.domainConLabel{display:inline-block;font-size:14px;text-align:right;vertical-align:middle}input.domainConInput{border:1px solid #a4c22c;border-radius:3px;height:30px;color:gray;line-height:30px;margin-left:12px;text-indent:15px;vertical-align:middle;width:200px}h1.eptAddTimeTips{color:#000;font-size:14px;font-weight:bold;margin:30px}div.pageListPo span.listSpanS{color:#3c3e43}div.pageListPo span.ListSpan{color:#829a20}ul.routerSelOptsUl{top:-9999px;left:-1px;width:100%;font-size:12px;list-style:none;position:absolute;border:1px solid #fff;overflow:hidden;max-height:182px;_height:expression(this.offsetHeight<400?"":400);box-shadow:0 0 3px 0 rgba(120,120,120,.6);border-radius:3px;background:#fff;padding:3px 0;visibility:visible;z-index:1001}ul.routerSelOptsUl li.option{background-color:#fff;height:30px;line-height:30px;font-size:12px;font-weight:normal;margin:0;padding-left:10px;cursor:pointer;overflow:hidden;float:none;display:block}table.dataGrid2{width:100%;margin:15px 0 0 0;border-collapse:collapse;border:1px solid #f57e4e;text-align:center}table.dataGrid2 tr{background:transparent;border-bottom:1px solid #f57e4e}table.dataGrid2 td{height:30px;color:#343434;border:1px solid #f57e4e;vertical-align:middle;white-space:pre}@media screen and (-webkit-min-device-pixel-ratio:0){table.dataGrid input.text,table.dataGrid2 input.text{line-height:0!important}}table.dataGrid2 input.text{color:#fff;height:21px;line-height:21px;border:0;border-radius:3px;padding:0 2px;font-size:12px;background:transparent}#stepOne i.resetImg{background:url(../web-static/images/reset2.png);display:block;width:219px;height:125px}#stepOne i.easyExtend{background:url(../web-static/images/easyExtend2.png);display:block;width:219px;height:125px}input.classNameBtn{background:url(../web-static/images/add1.png) no-repeat;color:#f57e4e}div.eptConWrapper{background-color:#fff;margin:0 auto;overflow:hidden;position:relative;width:656px}div.eptConTitle{margin:30px 60px 0 60px;font-size:20px;font-weight:bold}div.eptConTitle span.textBtn{margin-left:12px;color:#f57e4e;font-size:12px;font-weight:normal;text-decoration:underline;cursor:pointer}div.eptConGridHead{width:530px;color:#000;font-size:14px;font-weight:bold;margin:30px 0 0 60px}div.eptConGridHead .btnA{float:right;margin-top:-2px}h1.eptWarn{color:#000;font-size:12px;margin:15px 0 0 60px}p.eptFullWarn{display:none;margin-left:230px;margin-top:20px;padding-left:18px;position:relative}p.eptFullWarn i{background:url(web-static/images/routerBg.png) no-repeat -467px -190px;height:13px;left:0;position:absolute;top:2px;width:13px}span.eptFullWarn{display:none;max-width:165px;margin-left:8px;padding-left:18px;position:relative;font-size:12px;vertical-align:middle}span.eptFullWarn i{background:url(web-static/images/routerBg.png) no-repeat -467px -190px;height:13px;left:0;position:absolute;top:2px;width:13px}div.blockFuncEpt{font-size:0;margin:20px 0 50px;text-align:center}div.tableDiv{margin-left:60px;width:530px}ul.eptForm{margin:20px 0 30px 0;font-size:0}ul.eptForm li.eptFormItem{padding-left:220px;margin-top:16px}ul.eptForm li.eptFormItem label.label{display:inline-block;width:60px;margin-right:16px;font-size:12px;text-align:right;vertical-align:middle}ul.eptForm li.eptFormItem input{vertical-align:middle}#eptMngList p.title{color:#fff;margin-bottom:20px}#eptMngList #devCount{margin-left:16px}#eptMngList #addWhiteListDev{padding:3px 15px}#eptMngList #addBlackListDev{padding:3px 15px}</style>