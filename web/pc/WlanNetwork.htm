

<div id="hcCo" class="hcCo">
	<div class="hsHelp"></div>
	<div class="title">
		<label class="title">{%label.wifiSet%}</label>
		<i class="helpBtn" helpStr="wlanNetworkBasic wlanNetworkHelpAdvanced"></i>
	</div>
	<div class="block">
		<ul class="gridLine gridLineA">
			<label class="desLblA">{%label.wlanEnabled%}</label>
			<input id="wifiSwitchOn" name="wifiSwitch" class="switchRadio" type="radio" /><label class="noteLbl" for="wifiSwitchOn">{%label.openStr%}</label>
			<input id="wifiSwitchOff" name="wifiSwitch" class="switchRadio switchRadioR" type="radio" /><label class="noteLbl" for="wifiSwitchOff">{%label.closeStr%}</label>
		</ul>
		<ul class="gridLine gridLineA gridLineA2">
			<label class="desLblA" for="ssid">{%label.wirelessName%}</label>
			<li class="textConA textCon"><input id="ssid" class="textA text hoverBd" maxLength="32" /><i class="tip"></i></li>
			<input id="ssidBrd" class="checkbox wlanBroadCase" type="checkbox" />
			<label class="noteLbl" for="ssidBrd">{%label.wirelessSsidBrd%}</label>
		</ul>
		<ul id="pwdLine" class="gridLine gridLineA">
			<label class="desLblA" for="wlanPwd">{%label.wirelessPwd%}</label>
			<li class="textConA textCon"><input id="wlanPwd" class="textA text hoverBd imeModeN" maxLength="63" /><i class="tip"></i></li>
			<li id="pwdDepNote2G" class="note">
				<i id="pwdDepI" class="warn"></i>
				<div class="noteCon noteConRouteSet">
					<p class="pwdDepC twoLine">{%label.chgPwdDep%}{%label.colon%}<label id="pwdDep2G">{%label.weak%}</label></p>
					<div class="pwdDepL"><label id="chgPwdDep2G"></label></div>
				</div>
			</li>
		</ul>
		<ul class="gridLine gridLineA">
			<label class="desLblA" for="wirelessChannel">{%label.wirelessChannel%}</label>
			<li class="textConA textCon">
				<span id="channel" class="select">
					<span class="value hsValueA"></span>
					<i class="arrow"></i>
				</span>
			</li>
		</ul>
		<ul class="gridLine gridLineA">
			<label class="desLblA" for="wirelessMode">{%label.wirelessMode%}</label>
			<li class="textConA textCon">
				<span id="wlanMode" class="select">
					<span class="value hsValueA"></span>
					<i class="arrow"></i>
				</span>
			</li>
		</ul>
		<ul class="gridLine gridLineA">
			<label class="desLblA" for="wirelessWide">{%label.wirelessWidth%}</label>
			<li class="textConA textCon">
				<span id="wlanWidth" class="select">
					<span class="value hsValueA"></span>
					<i class="arrow"></i>
				</span>
			</li>
		</ul>
		<div class="blockFuncA">
			<input id="save" type="button" value="{%btn.save%}" class="btnA subBtn" />
		</div>
	</div>
</div><script type="text/javascript">function init(){function k(b){for(var a in b)if(b.hasOwnProperty(a))return!1;return!0}function h(b,a){var c=0;if("object"!=typeof b)return c;for(var f=0;f<b.length;f++)if(a==b[f].cfgStr){c=b[f].value;break}return c}function l(b,a){var c=null;if("object"!=typeof b)return c;for(var f=0;f<b.length;f++)if(a==b[f].value){c=b[f].cfgStr;break}return c}function p(b){if(null!=b)switch(parseInt(b)){case ENONE:break;case EEXPT:showAlert(errorStr.saveFail);break;case EINVSSIDLEN:showAlert(errStr.wlanSsidLenErr);
break;case EINVPSKLEN:showAlert(errorStr.invalidWifiPass);break;case ESSIDBROAD:showAlert(errorStr.invalidSSIDBroadValue);break;case EWIFISWITCH:showAlert(errorStr.invalidWifiSwitchValue);break;case EWLANPWDBLANK:showAlert(errStr.wlanPwdNull);break;case EINVWLANPWD:showAlert(errStr.wlanPwdInvalid);break;case EPSKNOTHEX:showAlert(errorStr.invalidPSKOf64);break;case EINVSSIDBLANK:showAlert(errStr.wlanSsidBlank);break;default:showAlert(errStr.invRequestFail)}}function z(b){v==q&&(165==parseInt(b)?(d.changeSel(h(g,
uciWireless.dynOptValue.bandwidth.bw20)),d.disable(!0)):(d.changeSel(h(g,uciWireless.dynOptValue.bandwidth.auto)),d.disable(!1)))}function A(b){var a=null,a=l(m,b);B==q?uciWireless.dynOptValue.mode.m_11b==a||uciWireless.dynOptValue.mode.m_11g==a||uciWireless.dynOptValue.mode.m_11bg==a?(d.changeSel(h(g,uciWireless.dynOptValue.bandwidth.bw20)),d.disable(!0)):(d.changeSel(h(g,uciWireless.dynOptValue.bandwidth.auto)),d.disable(!1)):(uciWireless.dynOptValue.mode.m_11an==a?(d.resetOptions(w,h(w,uciWireless.dynOptValue.bandwidth.auto)),
g=w):(d.resetOptions(r,h(r,uciWireless.dynOptValue.bandwidth.auto)),g=r),165==parseInt(id("channel").value)?(d.changeSel(h(g,uciWireless.dynOptValue.bandwidth.bw20)),d.disable(!0)):(d.changeSel(h(g,uciWireless.dynOptValue.bandwidth.auto)),d.disable(!1)))}function C(b){$.query({wireless:{name:s}},function(a){null!=a&&ENONE==a[ERR_CODE]?b(a[uciWireless.fileName][s]):p(a[[ERR_CODE]])})}function D(b){$.query({wireless:{name:x}},function(a){null!=a&&ENONE==a[[ERR_CODE]]?b(a[uciWireless.fileName][x]):p(a[[ERR_CODE]])})}
function G(){var b={},a=null,a=!0==id("wifiSwitchOn").checked?1:0;e[uciWireless.dynOptName.enable]!=a&&(b[uciWireless.dynOptName.enable]=a.toString());e[uciWireless.dynOptName.ssid]!=$("#ssid").val()&&(b[uciWireless.dynOptName.ssid]=$("#ssid").val());a=id("ssidBrd").checked?uciWireless.dynOptValue.ssidbrd.on:uciWireless.dynOptValue.ssidbrd.off;parseInt(e[uciWireless.dynOptName.ssidbrd])!=a&&(b[uciWireless.dynOptName.ssidbrd]=a.toString());a=id("wlanPwd").value;e[uciWireless.dynOptName.key]!=a&&(b[uciWireless.dynOptName.key]=
a);a=0==a.length?0:1;parseInt(e[uciWireless.dynOptName.encryption])!=a&&(b[uciWireless.dynOptName.encryption]=a.toString());a=$("#wlanPwd").val();e[uciWireless.dynOptName.key]!=a&&(b[uciWireless.dynOptName.key]=a);a=l(n,parseInt($("#channel").val()));parseInt(e[uciWireless.dynOptName.channel])!=a&&(b[uciWireless.dynOptName.channel]=a.toString());a=l(m,parseInt($("#wlanMode").val()));parseInt(e[uciWireless.dynOptName.mode])!=a&&(b[uciWireless.dynOptName.mode]=a.toString());a=l(g,parseInt($("#wlanWidth").val()));
parseInt(e[uciWireless.dynOptName.bandwidth])!=a&&(b[uciWireless.dynOptName.bandwidth]=a.toString());return b}function t(b){var a={};a[s]=b;setLoadingId("save");hsLoading(!0);$.modify({method:"set",wireless:a},function(a){hsLoading(!1);ENONE==a[[ERR_CODE]]?C(function(a){e=a}):p(a[[ERR_CODE]])})}function H(){var b=24,a="",c=this.value,f=c.length,d="visible",e="warn";if(0<=f&&8>f)d="hidden";else if(/^\d+$/.test(c)||/^[\x21-\x2f\x3a-\x40\x5b-\x60\x7b-\x7e\s]+$/.test(c)||/^[a-zA-Z]+$/.test(c))12>=f?a=
label.weak:(a=label.media,b*=2);else{var g=a=!1,h=!1,a=/\d/g.test(c),g=/[a-zA-Z]/g.test(c),h=/[\x21-\x2f\x3a-\x40\x5b-\x60\x7b-\x7e\s]/g.test(c);!0==(a&&h&&g)?(a=label.strong,e="correct",b*=3):12>=f?(a=label.media,b*=2):(a=label.strong,e="correct",b*=3)}id("pwdDepNote2G").style.visibility=d;id("pwdDep2G").innerHTML=a;id("chgPwdDep2G").style.width=b+"px";id("pwdDepI").className=e}function u(){var b={},a={},c=!0==id("wifiSwitchOn").checked?1:0,b=G();e[uciWireless.dynOptName.enable]!=c&&0==c?(a[uciHostsInfo.fileName]=
{},a[uciHostsInfo.fileName][KEY_TABLE]=uciHostsInfo.dynData.online_host,a[uciNetwork.fileName]={},a[uciNetwork.fileName][KEY_NAME]=uciNetwork.dynData.ifaceMac,$.query(a,function(a){if(ENONE==a[ERR_CODE]){var c=formatTableData(a[uciHostsInfo.fileName][uciHostsInfo.dynData.online_host]);g_cur_host_mac=a[uciNetwork.fileName][uciNetwork.dynData.ifaceMac][uciNetwork.optValue.ifname.host];for(var d in c)if(a=c[d],a[uciHostsInfo.optName.mac].toUpperCase()==g_cur_host_mac.toUpperCase()){c=a[uciHostsInfo.optName.type];
c==uciHostsInfo.optValue.linkType.hostWireless?showConfirm(label.wirelessSwitchTip,function(a){!0==a&&!1==k(b)&&t(b)}):!1==k(b)&&t(b);return}}!1==k(b)&&t(b)})):!1==k(b)&&t(b)}function I(){var b=ENONE,b=null,a;0==id("ssid").value.length?showAlert(errStr.wlanSsidErr,"ssid"):(b=checkWlanPwd($("#wlanPwd").val()),ENONE!=b?p(b):(b=l(n,parseInt($("#channel").val())),a=!0==id("wifiSwitchOn").checked?E:F,e[uciWireless.dynOptName.enable]!=a&&a==F?D(function(a){uciWireless.dynOptValue.enable.on==parseInt(a[uciWireless.dynOptName.enable])?
showConfirm(gSysModeSupport?label.changeWifiOffAlert1:label.changeWifiOffAlert,function(a){!0==a&&u()}):u()}):parseInt(e[uciWireless.dynOptName.channel])!=b?D(function(a){uciWireless.dynOptValue.enable.on==parseInt(a[uciWireless.dynOptName.enable])?showAlert(label.changeChannelAlert):u()}):u()))}var B="2G",v="5G",q=B,E=1,F=0,y=E,e={},J=id("wlanPwd"),d=id("wlanWidth"),n=[],w=[{str:label.wirelessAuto,value:0,cfgStr:uciWireless.dynOptValue.bandwidth.auto},{str:label.chanbw20,value:1,cfgStr:uciWireless.dynOptValue.bandwidth.bw20},
{str:label.chanbw40,value:2,cfgStr:uciWireless.dynOptValue.bandwidth.bw40}],r=[{str:label.wirelessAuto,value:0,cfgStr:uciWireless.dynOptValue.bandwidth.auto},{str:label.chanbw20,value:1,cfgStr:uciWireless.dynOptValue.bandwidth.bw20},{str:label.chanbw40,value:2,cfgStr:uciWireless.dynOptValue.bandwidth.bw40},{str:label.chanbw80,value:3,cfgStr:uciWireless.dynOptValue.bandwidth.bw80}],K=[{str:label.hwmode11ac,value:0,cfgStr:uciWireless.dynOptValue.mode.m_11ac},{str:label.hwmode11an,value:1,cfgStr:uciWireless.dynOptValue.mode.m_11an}],
m=[{str:label.hwmode11bgn,value:0,cfgStr:uciWireless.dynOptValue.mode.m_11bgn},{str:label.hwmode11bg,value:1,cfgStr:uciWireless.dynOptValue.mode.m_11bg},{str:label.hwmode11n,value:2,cfgStr:uciWireless.dynOptValue.mode.m_11n},{str:label.hwmode11g,value:3,cfgStr:uciWireless.dynOptValue.mode.m_11g},{str:label.hwmode11b,value:4,cfgStr:uciWireless.dynOptValue.mode.m_11b}],g=[{str:label.wirelessAuto,value:0,cfgStr:uciWireless.dynOptValue.bandwidth.auto},{str:label.chanbw20,value:1,cfgStr:uciWireless.dynOptValue.bandwidth.bw20}],
s=uciWireless.dynData.host_2g,x=uciWireless.dynData.wds_2g;(function(){v==q&&(m=K,g=r,s=uciWireless.dynData.host_5g,x=uciWireless.dynData.wds_5g);$("#save").click(I);J.onkeyup=H;C(function(b){var a=null;if(!k(b)){e=b;a=label.wlanChannels;v==q&&(a=label.wlanChannels5g);for(var c=0;c<a.length;c++){var f={},f=0==c?{str:label.wirelessAuto,value:a[c],cfgStr:a[c]}:{str:a[c].toString(),value:a[c],cfgStr:a[c]};n.push(f)}y=parseInt(b[uciWireless.dynOptName.enable]);id("wifiSwitchOn").checked=y;id("wifiSwitchOff").checked=
!y;$("#ssid").val(b[uciWireless.dynOptName.ssid]);id("wlanPwd").value=uciWireless.dynOptValue.encryption.on==parseInt(b[uciWireless.dynOptName.encryption])?b[uciWireless.dynOptName.key]:"";id("ssidBrd").checked=parseInt(b[uciWireless.dynOptName.ssidbrd])==uciWireless.dynOptValue.ssidbrd.on?!0:!1;a=h(g,b[uciWireless.dynOptName.bandwidth]);selectInit("wlanWidth",g,a);a=h(m,b[uciWireless.dynOptName.mode]);selectInit("wlanMode",m,a,A);A(a);a=h(n,b[uciWireless.dynOptName.channel]);selectInit("channel",
n,a,z);z(a);a=h(g,b[uciWireless.dynOptName.bandwidth]);d.changeSel(a)}})})()}init();
</script><style type="text/css">input.wlanBroadCase{margin-left:12px}input.wlanSecEnable{margin-left:12px}div.hcCo{padding:0 42px 0 65px}</style>