
<div id="hcCo" class="hcCo">
	<div id="dualWanIpv6Wrapper" class="dualWanWrapper disNone">
		<ul class="gridLine">
			<label>{%label.wan1Port%}</label>
			<label>{%label.wan2Port%}</label>
		</ul>
	</div>
	<div class="title">
		<label class="title">{%label.basicSet%}</label>
		<i class="helpBtn" id="ipv6WanHelp"></i>
	</div>
	<ul class="gridLine gridLineA gridLineTips" id="relayTip">
		<div class="warnCon">
			<img src="../web-static/images/routerBg.png" />
		</div>
		<span id="relayTipText"></span>
	</ul>
	<ul class="gridLine gridLineA">
		<label class="desLblA">{%label.ipv6Enable%}</label>
		<input id="ipv6On" name="ipv6Switch" class="switchRadio" type="radio" /><label class="noteLbl" for="ipv6On">{%label.ipv6On%}</label>
		<input id="ipv6Off" name="ipv6Switch" class="switchRadio switchRadioR" type="radio" /><label class="noteLbl" for="ipv6Off">{%label.ipv6Off%}</label>
	</ul>
	<div id="ipv6Content">
		<div id="ipv6WanDetalis"></div>
		<div id="ipv6LanDetalis">
			<div class="title">
				<label class="title">{%label.ipv6LanSetting%}</label>
				<i class="helpBtn" id="ipv6LanHelp"></i>
			</div>
			<div class="block">
				<ul class="gridLine gridLineA">
					<label class="desLblA">{%label.ipv6HostSetting%}</label>
					<li class="textConA textCon">
						<span id="hostSettingSel" class="select">
							<span class="value hsValueA"></span>
							<i class="arrow"></i>
						</span>
					</li>
				</ul>
				<ul id="lanPrefixUl" class="gridLine gridLineA">
					<label class="desLblA">{%label.ipv6Pre%}</label>
					<!--<li class="textConA textCon">
						<input id="ipv6Pre" class="textA text hoverBd" maxLength="39" />
						<i class="tip"></i>
					</li>-->
					<li class="textConA textCon"><input id="ipv6Pre" class="textA text hoverBd" maxLength="39" /><i class="tip"></i></li>
					<label class="noteLbl macCloneLi"></label>
					<label class="noteLbl">/64</label>
				</ul>
				<ul class="gridLine gridLineA addrleaseLine">
					<label class="desLblA">{%label.ipv6AddrLease%}</label>
					<li class="textConB textCon">
						<input id="ipv6Lease" class="textB text hoverBd" maxLength="4" />
						<i class="tip"></i>
					</li>
					<label class="noteLbl">{%label.ipv6AddrLeaseTip%}</label>
				</ul>
				<ul class="gridLine gridLineA dnsSetting">
					<label class="desLblA">{%label.ipv6DnsSetting%}</label>
					<li class="textConA textCon">
						<span id="lanDnsSel" class="select">
							<span class="value hsValueA"></span>
							<i class="arrow"></i>
						</span>
					</li>
				</ul>
				<ul class="gridLine gridLineA mpPhoneRgt10">
					<label class="desLblA">{%label.dns0%}</label>
					<label id="lan_pri_dns" class="noteLbl"></label>
				</ul>
				<ul class="gridLine gridLineA mpPhoneRgt10">
					<label class="desLblA">{%label.dns1%}</label>
					<label id="lan_snd_dns" class="noteLbl"></label>
				</ul>
				<ul class="gridLine gridLineA mpPhoneRgt10">
					<label class="desLblA">{%label.ipv6LanGlobalAddr%}</label>
					<label id="lan_addr" class="noteLbl"></label>
				</ul>
				<ul class="gridLine gridLineA mpPhoneRgt10">
					<label class="desLblA">{%label.ipv6LanLocalAddr%}</label>
					<label id="lan_local_addr" class="noteLbl"></label>
				</ul>
				<div class="blockFuncA">
					<input id="lanSave" type="button" value="{%btn.save%}" class="btnA subBtn" />
				</div>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">var ROUTER_MAC="routerMac",CLONE_MAC="cloneMac",CUSTOM_MAC="customMac",HOST_DHCPv6="0",HOST_SLAAC="1",DNS_DHCPv6="0",DNS_RDNSS="1",DHCP_NAME="dhcpcv6",STATIC_NAME="staticv6",PPPoE_NAME="pppoev6",BRIDGE_NAME="bridgev6",WAN_NAME="wanv6",LAN_NAME="lanv6",WAN_STATUS_NAME="wanv6_status",LAN_STATUS_NAME="lanv6_status",SWITCH_ON=1,SWITCH_OFF=0,SWITCH_STATUS_IDLE_SUCCESS=0,SWITCH_STATUS_SWITCHING=1,SWITCH_STATUS_FAILED=2,IPV6_State,isSwitchLoading=!1,reconnectLanCount=0,reconnectLanCountMax=3,wanTypesToVal=
{};wanTypesToVal[DHCP_NAME]=0;wanTypesToVal[STATIC_NAME]=1;wanTypesToVal[PPPoE_NAME]=2;wanTypesToVal[BRIDGE_NAME]=8;
var LAN_DHCP6="dhcpsv6",LAN_SLAAC="slaac",LAN_RDNSS="rdnss",IP_CONFIG_AUTO="auto",IP_CONFIG_DHCPV6="dhcpv6",IP_CONFIG_SLAAC="slaac",IP_CONFIG_STATIC="static",PD_MODE_NON_TEMP="non_temp",PD_MODE_PREFIX="prefix",DNS_MODE_DYN="dynamic",DNS_MODE_MAN="manual",lanHostFlag=null,preDelgOnFlag=!1,updateLanHandle=null,updateTimerHandle=null,updateReconnectLanHandle=null,refreshWanStatus=null,wanOptions=[{str:label.pppoe,value:2},{str:label.staticIp,value:1},{str:label.dhcpIpv6,value:0},{str:label.bridgeIpv6,
value:8}],wanMacOptions=[{str:label.routerMac,value:ROUTER_MAC},{str:label.cloneMac,value:CLONE_MAC},{str:label.customMac,value:CUSTOM_MAC}],hostSettingOptions=[{str:label.ipv6DHCPv6,value:HOST_DHCPv6},{str:label.ipv6SLAAC,value:HOST_SLAAC}],lanDnsOptions=[{str:label.ipv6DHCPv6,value:DNS_DHCPv6},{str:label.ipv6RDNSS,value:DNS_RDNSS}],wanTypes=["DynamicIpv6.htm","StaticIpv6.htm","PPPoEIpv6.htm"];wanTypes[LINK_TYPE_BRIDGE]="BridgeIpv6.htm";
var WAN=uciNetwork.optValue.ifname.wan,HOST=uciNetwork.optValue.ifname.host,FACTORY=uciNetwork.optValue.ifname.factory,wanMacVal,hostMacVal,factoryMacVal,curLanPrefix,localLanAddr,wanSelectRefreshHandle=null,wanSelectRefreshCount=0,EIPV66TO4ADDR=-56999,curSysMode=uciSystem.optValue.sysMode.routerMode;
function wanMacErrHandle(a,b){var c="";switch(a){case ENONE:return!1;case EINVMACFMT:c=errStr.macFmtErr;break;case EINVMACZERO:c=errStr.macZeroErr;break;case EINVMACBROAD:c=errStr.macBroadErr;break;case EINVMACGROUP:c=errStr.macGroupErr;break;default:c=errStr.invRequestFail}showAlert(c,b);return!0}
function setMacInfo(a,b){var c=a[uciNetwork.fileName][uciNetwork.dynData.ifaceMac],d=id("wanMac"),e="wan",e=1==b||"undefined"==typeof b?"wan":"wan_"+b;wanMacVal=a.protocol[e].macaddr;hostMacVal=c[HOST];factoryMacVal=a.protocol[e].fac_macaddr;d.value=wanMacVal.toUpperCase();c=wanMacVal.toUpperCase()==factoryMacVal.toUpperCase()?ROUTER_MAC:wanMacVal.toUpperCase()==hostMacVal.toUpperCase()?CLONE_MAC:CUSTOM_MAC;selectInit("wanMacSel",wanMacOptions,c,wanMacSelectChange);wanMacSelectChange(c);curSysMode!=
uciSystem.optValue.sysMode.routerMode&&id("wanMacSel").disable(!0)}
function wanMacSelectChange(a){var b=isIESix||isIESeven?"inline":"inline-block",c=id("wanMac"),d=$("#macCloneUl li");switch(a){case ROUTER_MAC:c.value=d[1].innerHTML=factoryMacVal.toUpperCase();d[1].style.display=b;d[0].style.display="none";break;case CLONE_MAC:c.value=d[1].innerHTML=hostMacVal.toUpperCase();d[1].style.display=b;d[0].style.display="none";break;case CUSTOM_MAC:c.value=wanMacVal.toUpperCase(),d[0].style.display=b,d[1].style.display="none"}}
function wanCheckWDS(a,b,c,d){var e={};e[uciWireless.fileName]={};e[uciWireless.fileName][KEY_NAME]=[uciWireless.dynData.wds_2g,uciWireless.dynData.wds_5g];$.query(e,function(e){e[ERR_CODE]==ENONE&&e[uciWireless.fileName][uciWireless.dynData.wds_2g][uciWireless.dynOptName.enable]==uciWireless.dynOptValue.enable.on||e[uciWireless.fileName][uciWireless.dynData.wds_5g][uciWireless.dynOptName.enable]==uciWireless.dynOptValue.enable.on?("undefined"==typeof d?showAlert(label.wanWDSTip):showAlert(d),"function"==
typeof c&&c()):"function"==typeof a&&a(b)})}
function lanErrHandle(a,b){var c="";switch(a){case ENONE:return!1;case EIPV6INVIP:c=errStr.ipv6PrefixErr;break;case EIPV6INVIPFMT:c=errStr.ipv6AddrFmtErr;break;case EIPV6INVGROUPIP:c=errStr.ipv6PrefixGroupErr;break;case EIPV6LOOP:c=errStr.ipv6PrefixLoopErr;break;case EIPV6INVPREFIX:c=errStr.ipv6InvPrefix;break;case EINVLEASETIME:c=errStr.dhcpsLeaseErr;break;case EIPV6LINKLOCAL:c=errStr.ipv6PrefixLinkLoaclErr;break;case EIPV66TO4ADDR:c=errStr.ipv6Prefix6To4Err;break;default:c=errStr.invRequestFail}showAlert(c,
b);return!0}
function getIpv6Info(a){var b=0,c=0,d=0,e;a=a.replace(/：/g,":");e=a.match(/:+/g)||null;a=a.split(/:+/g)||null;if(null!=e&&8>e.length){for(var f=0;f<e.length;f++)if(":"==e[f])c++;else if("::"==e[f])b++;else return{valid:!1};if(1<b)return{valid:!1};if(1==b){for(f=0;f<a.length;f++)""!=a[f]&&d++;if(6<d)return{valid:!1}}else if(7>c)return{valid:!1};return""==a[0]&&":"==e[0]||""==a[a.length-1]&&":"==e[e.length-1]?{valid:!1}:{valid:!0,singleColonCounts:c,doubleColonCounts:b}}return{valid:!1}}
function checkIPv6Format(a){var b;b=getIpv6Info(a);if(!0!=b.valid)return EIPV6INVIPFMT;a=a.replace("::",Array(7-b.singleColonCounts+1).join(":")).split(":");if(8!=a.length)return EIPV6INVIPFMT;b=/^[0-9a-fA-F]{1,4}$/;for(var c=0;c<a.length;c++)if(""!=a[c]&&!b.test(a[c]))return EIPV6INVIPFMT;return ENONE}
function ipv6Init(a){var b=getIpv6Info(a);a=a.replace("::",Array(7-b.singleColonCounts+1).join(":")).split(":");for(b=0;b<a.length;b++)a[b]=4>a[b].length?"0x"+Array(4-a[b].length+1).join("0")+a[b]:"0x"+a[b];return a}function ipv6Compare(a,b){a=a.replace(/：/g,":");b=b.replace(/：/g,":");if(checkIPv6Format(a)!=ENONE||checkIPv6Format(b)!=ENONE)return!1;for(var c=ipv6Init(a),d=ipv6Init(b),e=0;8>e;e++)if(c[e].toLowerCase()!=d[e].toLowerCase())return!1;return!0}
function checkIPv6(a,b){var c;a=a.replace(/：/g,":");c=checkIPv6Format(a);if(c!=ENONE)return c;c=ipv6Init(a);if(65152<=c[0]&&65215>=c[0])return void 0!=b&&!0==b.allow_localLink&&65152==c[0]?ENONE:EIPV6LINKLOCAL;if(0==c[0]&&0==c[1]&&0==c[2]&&0==c[3]&&0==c[4]&&0==c[5]&&0==c[6]){if(1==c[7])return EIPV6LOOP;if(0==c[7])return EIPV6INVIP}return 65280<=c[0]&&65295>=c[0]?EIPV6INVGROUPIP:16383<c[0]||8192>c[0]?EIPV6INVIP:8194==c[0]?EIPV66TO4ADDR:ENONE}
function checkGatewayV6(a){return ENONE!=checkIPv6(a,{allow_localLink:!0})?EIPV6INVGTW:ENONE}function checkPriDnsV6(a){return ENONE!=checkIPv6(a)?EIPV6INVFDNSVR:ENONE}function checkSeDnsV6(a){return""==a?ENONE:ENONE!=checkIPv6(a)?EIPV6INVSDNSVR:ENONE}function checkLanPrefix(a){a=a.replace(/：/g,":");if(checkIPv6Format(a)!=ENONE)return EIPV6INVPREFIX;var b=ipv6Init(a);if(0!=b[4]||0!=b[5]||0!=b[6]||0!=b[7])return EIPV6INVPREFIX;a=checkIPv6(a);return a!=ENONE?a:ENONE}
function checkLeastTime(a){return!1==checkNum(a)||!1==checkNumRange(parseInt(a,10),2880,1)?EINVLEASETIME:ENONE}function lanPrefixChange(a){var b=isIESix||isIESeven?"inline":"inline-block";id("ipv6Pre");var c=$("#lanPrefixUl li"),d=$("#lanPrefixUl label");0==d[1].innerHTML.length&&(d[1].innerHTML="::");a?(d[1].style.display=b,c[0].style.display="none"):(c[0].style.display=b,d[1].style.display="none",id("ipv6Pre").value=$("#lanPrefixUl label")[1].innerHTML)}
function setHelpStr(a,b){var c;switch(a){case LINK_TYPE_DHCP:c="dynamicIpv6Help";break;case LINK_TYPE_STATIC_IP:c="staticIpv6Help";break;case LINK_TYPE_PPPOE:c="PPPoEv6Help";break;case LINK_TYPE_BRIDGE:c="Bridgev6Help";break;case HOST_DHCPv6:c="lanHostDhcpv6Help";break;case HOST_SLAAC:c="lanHostSlaacHelp"}$("#"+b).attr("helpStr",c);loadPageHandleBg()}
function wanSelectChange(a){function b(){loadPage(wanTypes[a],"ipv6WanDetalis",function(){null!=wanSelectRefreshHandle&&(clearTimeout(wanSelectRefreshHandle),wanSelectRefreshHandle=null);wanSelectRefreshCount=0;a==LINK_TYPE_BRIDGE?$("#ipv6LanDetalis").css("display","none"):"none"==$("#ipv6LanDetalis").css("display")&&$("#ipv6LanDetalis").css("display","block")})}""==a.toString()&&(a=LINK_TYPE_PPPOE);setHelpStr(a,"ipv6WanHelp");wanSelectRefreshCount=0;null!=wanSelectRefreshHandle&&clearTimeout(wanSelectRefreshHandle);
wanSelectRefreshHandle=$.setTimeout(function(){wanSelectRefreshCount++;4<wanSelectRefreshCount?wanSelectRefreshCount=0:b()},2E3);b()}function hostSetSelectChange(a){a==HOST_DHCPv6?($("ul.dnsSetting").css("display","none"),$("ul.addrleaseLine").css("display","block"),lanHostFlag=LAN_DHCP6):($("ul.dnsSetting").css("display","block"),$("ul.addrleaseLine").css("display","none"),id("lanDnsSel").changeSel(DNS_DHCPv6));setHelpStr(a,"ipv6LanHelp")}
function lanDnsSelectChange(a){lanHostFlag=a==DNS_DHCPv6?LAN_SLAAC:LAN_RDNSS}
function IPv6EnableClick(a,b){wanCheckWDS(function(){var c;IPV6_State!=a&&(c="undefined"==typeof b||1==b?a==SWITCH_ON?{protocol:{switch_ipv6:{enable:"on"}}}:{protocol:{switch_ipv6:{enable:"off"}}}:a==SWITCH_ON?{protocol:{switch_ipv6:{enable:"on",index:b.toString()}}}:{protocol:{switch_ipv6:{enable:"off",index:b.toString()}}},showLoading("正在切换设置，请稍后...",void 0,void 0,!1),$.action(c,function(a){closeLoading();a[ERR_CODE]==ENONE?(updateTimerHandle&&clearTimeout(updateTimerHandle),updateLanHandle&&clearTimeout(updateLanHandle),
getSwitchStatus(b)):(showAlert("目前正在切换设置，请稍后再试。"),id("ipv6On").checked=IPV6_State,id("ipv6Off").checked=1-IPV6_State)}))},null,function(){IPV6_State!=a&&(id("ipv6On").checked=IPV6_State,id("ipv6Off").checked=1-IPV6_State)})}function wanCfgInit(a){var b={protocol:{}},c="",c=1==a||"undefined"==typeof a?"wanv6":"wanv6_"+a;b.protocol[KEY_NAME]=c;$.query(b,function(a){wanSelectChange(wanTypesToVal[a.protocol[c][uciProto.optName.type]])})}
function lanCfgInit(a){var b={network:{}};b.network[KEY_NAME]=LAN_STATUS_NAME;b.protocol={};b.protocol[KEY_NAME]=LAN_DHCP6;$.query(b,function(c){var b=c.network[LAN_STATUS_NAME];c=c.protocol[LAN_DHCP6];b.proto==LAN_DHCP6?(id("hostSettingSel").changeSel(HOST_DHCPv6),$("ul.addrleaseLine").css("display","block")):b.proto==LAN_SLAAC?(id("hostSettingSel").changeSel(HOST_SLAAC),id("lanDnsSel").changeSel(DNS_DHCPv6)):(id("hostSettingSel").changeSel(HOST_SLAAC),id("lanDnsSel").changeSel(DNS_RDNSS));id("ipv6Lease").value=
c.lease_time/60;$("#lanPrefixUl label")[1].innerHTML=b.prefix;curLanPrefix=id("ipv6Pre").value=b.prefix;setLanStatus(b);refreshLanStatus(a)})}function setLanStatus(a){id("lan_pri_dns").innerHTML=a.pri_dns;id("lan_snd_dns").innerHTML=a.snd_dns;id("lan_addr").innerHTML=a.ip6addr+"/64";localLanAddr=id("lan_local_addr").innerHTML=a.local_ip6addr;curLanPrefix=$("#lanPrefixUl label")[1].innerHTML=a.prefix}
function reconncectLan(a){reconnectLanCount++;reconnectLanCount<=reconnectLanCountMax&&refreshLanStatus(a)}
function refreshLanStatus(a){var b={network:{}};b.network[KEY_NAME]=LAN_STATUS_NAME;updateLanHandle&&clearTimeout(updateLanHandle);updateReconnectLanHandle||(clearTimeout(updateReconnectLanHandle),updateReconnectLanHandle=null);updateReconnectLanHandle=$.setTimeout(function(){reconncectLan(a)},5E3);$.query(b,function(b){updateReconnectLanHandle&&(clearTimeout(updateReconnectLanHandle),updateReconnectLanHandle=null,0!=reconnectLanCount&&(updateTimerHandle=$.setTimeout(function(){refreshWanStatus(a)},
0)),reconnectLanCount=0);setLanStatus(b.network[LAN_STATUS_NAME]);updateLanHandle=$.setTimeout(function(){refreshLanStatus(a)},2E3)})}function checkLanIpChange(){if(preDelgOnFlag)wanCheckWDS(saveLanSet);else{var a=id("ipv6Pre").value;ipv6Compare(curLanPrefix,a)?wanCheckWDS(saveLanSet):showConfirm(label.ipv6LanPreChgTip,function(a){a&&wanCheckWDS(saveLanSet)})}}
function saveLanSet(){var a={},b={},c={},d={},e=lanHostFlag,f=id("ipv6Pre").value,g=id("ipv6Lease").value;if(e==LAN_DHCP6||e==LAN_SLAAC||e==LAN_RDNSS){a[uciProto.fileName]=b;b[LAN_NAME]=c;c[uciProto.optName.proto]=e;b[e]=d;if(!preDelgOnFlag){if(lanErrHandle(checkLanPrefix(f),"ipv6Pre"))return;f=f.replace(/：/g,":");$("#ipv6Pre").val(f);d.prefix=f}d.prefixlen="64";if(e==LAN_DHCP6){preDelgOnFlag||(d.start_ip="1000",d.end_ip="2000");if(lanErrHandle(checkLeastTime(g),"ipv6Lease"))return;d.lease_time=60*
g}disableBtnAll(!0);setLoadingId("lanSave");hsLoading(!0);$.modify(a,function(a){hsLoading(!1,function(){disableBtnAll(!1)})})}}function disableBtnAll(a){id("save")&&disableBtn("save",a);id("connect")&&disableBtn("connect",a);id("disconnect")&&disableBtn("disconnect",a);id("saveHighSet")&&disableBtn("saveHighSet",a)}
function initLoad(a,b){IPV6_State=1==b||"undefined"==typeof b?"on"==a.protocol.ipv6_info.enable?SWITCH_ON:SWITCH_OFF:"on"==a.protocol["ipv6_info_"+b].enable?SWITCH_ON:SWITCH_OFF;id("ipv6On").checked=IPV6_State;id("ipv6Off").checked=1-IPV6_State;id("ipv6Content").style.display=IPV6_State==SWITCH_ON?"block":"none";IPV6_State==SWITCH_ON?($("#ipv6WanHelp").css("display","block"),wanCfgInit(b),lanCfgInit(b)):$("#ipv6WanHelp").css("display","none")}
function preLoadData(a){var b={protocol:{}};b.protocol[KEY_NAME]=1==a||"undefined"==typeof a?"ipv6_info":"ipv6_info_"+a;$.query(b,function(b){initLoad(b,a)})}
function getSwitchStatus(a){var b={network:{}};b.network[KEY_NAME]=1==a||"undefined"==typeof a?"ipv6_switch_status":"ipv6_switch_status_"+a;$.query(b,function(b){var d=b[ERR_CODE];d==ENONE?(b=1==a||"undefined"==typeof a?b.network.ipv6_switch_status.status:b.network["ipv6_switch_status_"+a].status,SWITCH_STATUS_IDLE_SUCCESS==b?(preLoadData(a),isSwitchLoading&&(closeLoading(),isSwitchLoading=!1)):(isSwitchLoading||(showLoading("正在切换设置，请稍后...",void 0,void 0,!1),isSwitchLoading=!0),getSwitchStatusHandle=
$.setTimeout(getSwitchStatus,1E3))):showAlert(d)})}
function initPage(a){id("ipv6On").onclick=function(){IPv6EnableClick(SWITCH_ON,a)};id("ipv6Off").onclick=function(){IPv6EnableClick(SWITCH_OFF,a)};id("lanSave").onclick=checkLanIpChange;selectInit("hostSettingSel",hostSettingOptions,HOST_DHCPv6,hostSetSelectChange);selectInit("lanDnsSel",lanDnsOptions,DNS_DHCPv6,lanDnsSelectChange);curSysMode!=uciSystem.optValue.sysMode.routerMode&&(disableInput("ipv6On",!0),disableInput("ipv6Off",!0),disableInput("ipv6Pre",!0),disableInput("ipv6Lease",!0),disableBtn("lanSave",
!0),id("hostSettingSel").disable(!0),id("lanDnsSel").disable(!0),$("#relayTip").show(),curSysMode==uciSystem.optValue.sysMode.apMode?$("#relayTipText").text("上网方式为AP（有线中继）时，无法使用IPv6功能"):$("#relayTipText").text("上网方式为桥接（无线中继）时，无法使用IPv6功能"));getSwitchStatus(a)}function clearWanBtnArea(){$("#dualWanIpv6Wrapper ul").html("");$("#dualWanIpv6Wrapper").hide()}
function initWanBtnArea(a){if(2<=a){clearWanBtnArea();for(var b=0;b<a;b++){var c=document.createElement("label");c.className="ipv6WanPort";c.innerHTML="WAN"+(b+1)+"口";$("#dualWanIpv6Wrapper ul").append($(c))}initWanBtnClickHandler();$("#dualWanIpv6Wrapper").show()}else clearWanBtnArea(),initPage()}
function initWanBtnClickHandler(){var a=$("#dualWanIpv6Wrapper").find("label");a.click(function(){var a=$(this).index()+1;initPage(a);$(this).addClass("selected");$(this).siblings().removeClass("selected");gBasicRouteSetRNiceScroll.scrollTo(0)});a.eq(0).click()}
function initDualWanPort(){if(gMulWanSupport){var a={port_manage:{table:"mwan"}};gSysModeSupport&&(a.system={name:"sys_mode"});$.query(a,function(a){for(var c=0,d=0;2>d;d++)1==a.port_manage.mwan[d]["mwan_"+(d+1)].enable&&c++;gSysModeSupport&&(curSysMode=a.system.sys_mode.mode);initWanBtnArea(c)})}else gSysModeSupport?$.query({system:{name:"sys_mode"}},function(a){ENONE==a.error_code&&(curSysMode=a.system.sys_mode.mode,initWanBtnArea(0))}):initWanBtnArea(0)}initDualWanPort();
</script><style type="text/css">#dualWanIpv6Wrapper{top:2px;width:680px}.dualWanWrapper ul{display:inline-block}.dualWanWrapper ul label{display:table-cell;width:160px;font-size:14px;color:#fff;line-height:32px;text-align:center;border:1px solid #fff;cursor:pointer}.dualWanWrapper ul label.selected{color:#2ba2d8;background-color:#fff}.dualWanWrapper ul label:first-child{border-radius:4px 0 0 4px}.dualWanWrapper ul label:last-child{border-radius:0 4px 4px 0}.dualWanWrapper{text-align:center;padding-bottom:32px;position:relative;top:0}#ipv6Content{display:none}ul.dnsSetting{display:none}li.macCloneLi label.macCloneLi{color:#fff;font-size:12px;line-height:20px!important}#wanStatus i{display:inline-block;height:13px;width:13px;vertical-align:middle;line-height:0}li.macCloneLi{color:#fff;font-size:12px;line-height:20px!important}ul.addrleaseLine{display:none}#ipv6LanDetalis{display:none}ul.gridLine input.disable{opacity:.8}#ipv6WanHelp{display:none}ul.gridLineTips{margin-top:8px!important;height:auto;display:none;line-height:unset}ul.gridLineTips span{width:225px;color:#FFF;line-height:18px;font-size:12px}div.warnCon{width:16px;height:16px;overflow:hidden;display:inline-block;vertical-align:top}div.warnCon img{margin-top:-187px;margin-left:-467px}</style>