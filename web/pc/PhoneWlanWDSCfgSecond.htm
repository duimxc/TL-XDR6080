

<h1 class="phoneTitle">{%label.phWDSTitle%}</h1>
<div class="textCenter">
	<img class="configGif" src="../web-static/images/wzdDetecting.gif" />
	<p class="configTip">{%label.phWDSConfigTip%}</p>
</div>
<p class="WDSTitle">
	<span>{%label.phInputPwd%}</span>
</p>
<div id="wdsInputDiv" class="WDSFoBlock"></div>

<div class="phFunc">
	<label id="pre" class="phTwoBtn">{%btn.preStep%}</label>
	<label id="next" class="phTwoBtn" style="margin-left:20px;">{%btn.nextStep%}</label>
</div><script type="text/javascript">(function(){function k(d,a){var c="wifiPwd"+a,b="wifiPwdNote"+a;switch(d){case ENONE:return!1;case EINVWLANPWD:showPhoneNote(c,b,errStr.wlanPwdInvalid);break;case EINVPSKLEN:showPhoneNote(c,b,errStr.wlanPwdLenValid);break;default:showAlert(errStr.invRequestFail)}return!0}function l(d,a,c){var b,g=document.createElement("ul"),g='<ul class="phInputUl"><li class="phInputLi ssidName"><label>'+("BS"==a?label.wirelessName:gFreqInfo[a]+label.module4GFrequency)+'</label><i class="clapboard"></i><input value="'+
d.ssid+'" disabled="true" /></li><li id="'+("wifiPwdLi"+a)+'" class="phInputLi"><label for="'+("wifiPwd"+a)+'">'+label.wirelessPwd+'</label><i class="clapboard"></i><input id="'+("wifiPwd"+a)+'" value="'+d.key+'" type="password" maxlength="63" /><i id="togglePwdShow'+a+'" class="pwdShowOff" /></li><li id="wifiPwdNote'+a+'" class="phErrTip disNone"><i class="error"></i><span class="errDes"></span></li></ul>';b="#togglePwdShow"+a;$("#wdsInputDiv").append(g);$(b).click(function(){$(b).toggleClass("pwdShowOff pwdShowOn");
id("wifiPwd"+a).type="pwdShowOff"==$(b).attr("class")?"password":"text"});c||(id("wifiPwdLi"+a).className="phInputLi ssidName",id("wifiPwd"+a).value="未加密",id("wifiPwd"+a).disabled=!0,id("wifiPwd"+a).type="text",id("togglePwdShow"+a).style.display="none")}function m(){var b={wireless:{}},b=BAND_2==gBandNum?{wireless:{wlan_wds_2g:{enable:"0",ssid:""},wlan_wds_5g:{enable:"0",ssid:""}}}:{wireless:{wlan_wds_2g:{enable:"0",ssid:""},wlan_wds_5g_1:{enable:"0",ssid:""},wlan_wds_5g_4:{enable:"0",ssid:""}}},
a;for(a in wdsTargetSelFreq)if(wdsTargetSelFreq[a].selected){var c={enable:"1"};c.ssid=gRootAPInfo[a].ssid;c.encryption=gRootAPInfo[a].encryption;"0"!=c.encryption&&(c.key=wdsTargetSelFreq[a].bs?id("wifiPwdBS").value:id("wifiPwd"+a).value,gRootAPInfo[a].key=c.key);b.wireless[gWDSModel[a].set_wds]=c;gRootAPInfo[a].enable="1"}return b}function e(){if(!f){var b,a;for(a in wdsTargetSelFreq)if(wdsTargetSelFreq[a].selected&&gRootAPInfo[a].encryption==uciWireless.dynOptValue.encryption.on){if(wdsTargetSelFreq[a].bs){closePhoneNote("wifiPwdBS",
"wifiPwdNoteBS");b=id("wifiPwdBS").value;b=checkWlanPwd(b);if(ENONE!=b)return k(b,a);break}closePhoneNote("wifiPwd"+a,"wifiPwdNote"+a);b=id("wifiPwd"+a).value;b=checkWlanPwd(b);if(ENONE!=b)return k(b,a)}}$(".textCenter").show();$(".WDSTitle").hide();$("#wdsInputDiv").hide();$(".phFunc").hide();a=m();$.modify(a,function(a){a=a[ERR_CODE];if(ENONE==a){var b=null;a={wireless:{}};for(var g in wdsTargetSelFreq)wdsTargetSelFreq[g].selected&&(a.wireless[gWDSModel[g].wds_start]={set_ip_immediate:"0"});$.action(a);
if(!1==bWirelessLinked){var d=!1,e=1,f=function(){if(3<e&&!1==d){var a="";"1"==gLocalAPInfo[curEqtFreq].encryption&&(a="  无线密码："+gLocalAPInfo[curEqtFreq].key);a="您的设备与路由器的连接已断开，请重新进行无线连接...<br />"+("无线名称："+gLocalAPInfo[curEqtFreq].ssid+a);d=!0;closeLoading();showLoading(a,void 0,adjustPhLoading(),!1)}$.detect(function(){!1==$.result.timeout&&(clearTimeout(b),closeLoading(),connectingCount=1,getWdsStatusHd=$.setTimeout(wdsStatusHd,100))});e++;b=$.setTimeout(f,2E3)};clearTimeout(b);b=$.setTimeout(f,
4E3)}else connectingCount=1,$.setTimeout(wdsStatusHd,5E3)}else errHandle(a),$(".textCenter").hide(),$(".WDSTitle").show(),$("#wdsInputDiv").show(),$(".phFunc").show()})}var f=!0,b;for(b in wdsTargetSelFreq)if(wdsTargetSelFreq[b].selected){var h=gRootAPInfo[b].encryption==uciWireless.dynOptValue.encryption.on;h&&(f=!1);if(wdsTargetSelFreq[b].bs){l(gRootAPInfo[b],"BS",h);break}else l(gRootAPInfo[b],b,h)}f&&(backFromNextPage?(backFromNextPage=!1,loadPage("PhoneWlanWDSCfgFirst.htm","phCon")):e());for(b=
0;b<gWDSPwdErrList.length;b++)wdsTargetSelFreq[gWDSPwdErrList[b]].bs?showPhoneNote("wifiPwdBS","wifiPwdNoteBS",errStr.phWrongWifiPwd):showPhoneNote("wifiPwd"+gWDSPwdErrList[b],"wifiPwdNote"+gWDSPwdErrList[b],errStr.phWrongWifiPwd);gWDSPwdErrList=[];failRetry&&(failRetry=!1,e());$("#next").click(function(){e()});$("#pre").click(function(){loadPage("PhoneWlanWDSCfgFirst.htm","phCon")})})();
</script><style type="text/css">img.configGif{height:30px;margin:120px auto 40px;width:30px}p.configTip{color:#fff;font-size:15px;text-align:center}.textCenter{text-align:center;display:none}div.WDSFoBlock{color:#fff;margin-top:13px;position:relative;text-align:left}p.WDSFoNoteF{margin-top:25px;line-height:25px}p.WDSTitle{color:#fff;font-size:12px;font-weight:bold;text-align:left!important;margin-left:20px;margin-bottom:10px}li.ssidName{margin-bottom:16px;background:#67c2e6!important}li.ssidName label{color:#fff}li.ssidName i.clapboard{border-right:1px solid#fff}li.ssidName input{color:#fff}li.phInputLi input{box-sizing:border-box}li.ssidName input[disabled]{background:#67c2e6;opacity:1;-webkit-text-fill-color:#fff}li.phErrTip i.error{background:url(../web-static/images/error@2x.png) no-repeat;width:16px;height:16px;top:0;background-size:cover}li.phErrTip span.errDes{line-height:16px}</style>