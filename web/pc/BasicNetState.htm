

<div class="bConfL bConfLBC"></div>
<div class="bConfR bConfRBC"></div>
<div id="bConCnt">
	<div class="bConfLCnt bConfLBC">
		<h1 class="bMdelTitle">{%label.netState%}</h1>
		<div id="netStateLCon" class="menuCon">
			<div class="netStateCon">
				<div id="wifiSwitchUnity" class="disNone">
					<ul class="netStateMenuItem netStateMenuItemWifiAll">
						<li>
							<span class="wifiModelName">{%menuStr.wifiSwitch%}</span>
							<div id="wifiAllSwitch" class="switchCon switchConNetState">
								<i class="switchBg"></i>
								<i class="switchBall"></i>
							</div>
							<span id="wifiAllSwitchDes" class="switchDes"></span>
						</li>
					</ul>
				</div>
				<ul class="netStateMenuItem disNone" id="wifiSwitchOffTip">
					<li>
						<span class="wifiAllSwitchDes">{%label.wifiSwitchOffTip%}</span>
					</li>
				</ul>
				<div id="wifiSwitchSplit" class="disNone">
					<ul id="netStateWifiAllSwitch" class="netStateMenuItem netStateMenuItemWifiAll">
						<li>
							<span class="wifiModelName">{%menuStr.wifiSwitch2G%}</span>
							<div id="wifiAllSwitch2G" class="switchCon switchConNetState">
								<i class="switchBg"></i>
								<i class="switchBall"></i>
							</div>
							<span id="wifiAllSwitch2GDes"></span>
						</li>
						<li>
							<span class="wifiModelName">{%menuStr.wifiSwitch5G%}</span>
							<div id="wifiAllSwitch5G" class="switchCon switchConNetState allSwitchCon5GState">
								<i class="switchBg"></i>
								<i class="switchBall"></i>
							</div>
							<span id="wifiAllSwitch5GDes"></span>
						</li>
					</ul>
				</div>
				<div id="bsDisableDiv" class="disNone">
					<ul id="netStateHostNet" class="netStateMenuItem">
						<i class="wifiLogo"></i>
						<li>
							<span class="wifiModelName">{%menuStr.wifiHost2G4%}</span>
							<div id="hostSwitch" class="switchCon switchConNetState">
								<i class="switchBg"></i>
								<i class="switchBall"></i>
							</div>
							<span id="hostSwitchDes" class="switchDes"></span>
						</li>
						<li><label>{%label.linkedEpt%}{%label.colon%}</label><span id="hostWifiNum2G">0{%label.entry%}</span></li>
						<li><label>{%label.folderName%}</label><input id="hostWifiName" type="text" maxLength="32" /></li>
						<li><label>{%label.passwd%}</label><input id="hostWifiPwd" type="text" maxLength="63" /></li>
						<li class="bottom"><input id="hostWifiSave2G" class="bottomSaveBtn subBtn" type="button" value="{%btn.save%}" /></li>
					</ul>
					<ul class="netStateMenuItem">
						<i class="wifiLogo"></i>
						<li>
							<span class="wifiModelName">{%menuStr.wifiHost5G%}</span>
							<div id="hostSwitch5G" class="switchCon switchConNetState">
								<i class="switchBg"></i>
								<i class="switchBall"></i>
							</div>
							<span id="hostSwitchDes5G" class="switchDes"></span>
						</li>
						<li><label>{%label.linkedEpt%}{%label.colon%}</label><span id="hostWifiNum5G">0{%label.entry%}</span></li>
						<li><label>{%label.folderName%}</label><input id="hostWifiName5G" type="text" maxLength="32" /></li>
						<li><label>{%label.passwd%}</label><input id="hostWifiPwd5G" type="text" maxLength="63" /></li>
						<li class="bottom"><input id="hostWifiSave5G" class="bottomSaveBtn subBtn" type="button" value="{%btn.save%}" /></li>
					</ul>
				</div>
				<div id="bsEnableDiv" class="disNone">
					<ul class="netStateMenuItem">
						<i class="wifiLogo"></i>
						<li>
							<span class="wifiModelName">{%menuStr.wifiHost%}</span>
							<div id="hostSwitchBs" class="switchCon switchConNetState">
								<i class="switchBg"></i>
								<i class="switchBall"></i>
							</div>
							<span id="hostSwitchDesBs" class="switchDes"></span>
						</li>
						<li><label>{%label.linkedEpt%}{%label.colon%}</label><span id="hostWifiNumBs">0{%label.entry%}</span></li>
						<li><label>{%label.folderName%}</label><input id="hostWifiNameBs" type="text" maxLength="32" /></li>
						<li><label>{%label.passwd%}</label><input id="hostWifiPwdBs" type="text" maxLength="63" /></li>
						<li class="bottom"><input id="hostWifiSaveBs" class="bottomSaveBtn subBtn" type="button" value="{%btn.save%}" /></li>
					</ul>
				</div>
				<ul id="netStateGuestNet" class="netStateMenuItem disNone">
					<i class="wifiLogo"></i>
					<li>
						<span id="title2G" class="wifiModelName"></span>
						<div id="guestSwitch" class="switchCon switchConNetState">
							<i class="switchBg"></i>
							<i class="switchBall"></i>
						</div>
						<span id="guestSwitchDes" class="switchDes"></span>
					</li>
					<li><label>{%label.linkedEpt%}{%label.colon%}</label><span id="guestWifiNum">0{%label.entry%}</span></li>
					<li><label>{%label.folderName%}</label><input id="guestWifiName" type="text" maxLength="32" /></li>
					<li><label>{%label.passwd%}</label><input id="guestWifiPwd" type="text" maxLength="63"/></li>
					<li class="bottom"><input id="guestWifiSave" class="bottomSaveBtn subBtn" type="button" value="{%btn.save%}" /></li>
				</ul>
				<ul id="netStateGuestNet5G" class="netStateMenuItem disNone">
					<i class="wifiLogo"></i>
					<li>
						<span class="wifiModelName">{%menuStr.wifiGuestNet5G%}</span>
						<div id="guestSwitch5G" class="switchCon switchConNetState">
							<i class="switchBg"></i>
							<i class="switchBall"></i>
						</div>
						<span id="guestSwitchDes5G" class="switchDes"></span>
					</li>
					<li><label>{%label.linkedEpt%}{%label.colon%}</label><span id="guestWifiNum5G">0{%label.entry%}</span></li>
					<li><label>{%label.folderName%}</label><input id="guestWifiName5G" type="text" maxLength="32" /></li>
					<li><label>{%label.passwd%}</label><input id="guestWifiPwd5G" type="text" maxLength="63" /></li>
					<li class="bottom"><input id="guestWifiSave5G" class="bottomSaveBtn subBtn" type="button" value="{%btn.save%}" /></li>
				</ul>
			</div>
		</div>
	</div>
	<div class="bConfRCnt bConfRBC">
		<div id="topoCon" class="topoCon">
			<div class="bNetStateTopoCon" id="bNetStateTopoCon">
				<p id="nodeTextTips" class="nodeTextTips"></p>
				<button id="addNewDevBtn"></button>
				<div id="leftWanLink" class="wanLink">
					<label>{%label.netSet%}</label>
					<label class="arrow">></label>
				</div>
				<div id="rightWanLink" class="wanLink">
					<label>{%label.netSet%}</label>
					<label class="arrow">></label>
				</div>
				<div class="cldRtDiv" id="cldRtOperation">
					<ul>
						<li id="editDevName">{%btn.editName%}</li>
						<li id="rebootCldRt">{%btn.reboot%}</li>
						<li id="kickCldRt">{%btn.disConnect%}</li>
						<li id="resetCldRt" class="cldRtLiLast">{%btn.reset%}</li>
					</ul>
				</div>
				<div id="leftUnfoldBtn" class="unfoldCon">
					<div class="unfoldBtn">
						<label>...</label>
					</div>
					<div>{%label.slideDown%}</div>
				</div>
				<div id="rightUnfoldBtn" class="unfoldCon">
					<div class="unfoldBtn">
						<label>...</label>
					</div>
					<div>{%label.slideDown%}</div>
				</div>
				<div id="leftCldUnfoldBtn" class="unfoldCon">
					<div class="unfoldBtn">
						<label>...</label>
					</div>
					<div>{%label.slideDown%}</div>
				</div>
				<div id="rightCldUnfoldBtn" class="unfoldCon">
					<div class="unfoldBtn">
						<label>...</label>
					</div>
					<div>{%label.slideDown%}</div>
				</div>
				<canvas id="canvasCloud"><h1 class="canvasNotSupportTip">{%label.canvasNotSupportTip%}</h1></canvas>
				<canvas id="canvasRouter" class="coverCanvas"></canvas>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">function init(){function Q(a,b){var c="";switch(a){case ENONE:return!0;case EINVSSIDLEN:c=errStr.wlanSsidLenErr;break;case EINVSSIDEMPTY:c=errStr.wlanSsidErr;break;case EINVSSIDBLANK:c=errStr.wlanSsidBlank;break;case EWLANPWDBLANK:c=errStr.wlanPwdNull;break;case EINVPSKLEN:c=errStr.wlanPwdLenValid;break;case EINVWLANPWD:c=errStr.wlanPwdInvalid;break;case ESYSBUSY:c=errStr.invRequestFailTrylater;break;default:c=errStr.invRequestFail}showAlert(c,b);return!1}function xc(a){var b,c,f=0,m=0,fa=0,d=0,e;
for(e in a){b=a[e];c=b[yc];if(0==c.length||"00-00-00-00-00-00"==c)break;b.type==R.wirelessH&&b[Ka]==R.wireless2G?f++:b.type==R.wirelessH&&b[Ka]==R.wireless5G?m++:b.type==R.wirelessG&&b[Ka]==R.wireless2G?fa++:b.type==R.wirelessG&&b[Ka]==R.wireless5G&&d++}zc.innerHTML=f+label.entry;Ac.innerHTML=m+label.entry;Bc.innerHTML=f+m+label.entry;Cc.innerHTML=fa+label.entry;Dc.innerHTML=d+label.entry}function h(a,b){var c=$("#"+a+" i.switchBg")[0],f=$("#"+a+" i.switchBall")[0];!0==b?(f.style.backgroundPosition=
"-424px -52px",null!=c.onclick&&(f.oldOnMouseDown=f.onmousedown,c.oldOnClick=c.onclick,c.onclick=null,f.onmousedown=null)):(0<parseInt($(f).css("left"))?f.style.backgroundPosition="-441px -53px":f.style.backgroundPosition="-424px -52px",void 0!=c.oldOnClick&&null!=c.oldOnClick&&(c.onclick=c.oldOnClick),void 0!=f.oldOnMouseDown&&null!=f.oldOnMouseDown&&(f.onmousedown=f.oldOnMouseDown))}function Xa(a){disableInput("hostWifiName",a);disableInput("hostWifiPwd",a);disableBtn("hostWifiSave2G",a);h("hostSwitch",
a)}function Ya(a){disableInput("hostWifiName5G",a);disableInput("hostWifiPwd5G",a);disableBtn("hostWifiSave5G",a);h("hostSwitch5G",a)}function ga(a){disableInput("hostWifiNameBs",a);disableInput("hostWifiPwdBs",a);disableBtn("hostWifiSaveBs",a);h("hostSwitchBs",a)}function Za(a){disableInput("guestWifiName",a);disableInput("guestWifiPwd",a);disableBtn("guestWifiSave",a);h("guestSwitch",a)}function $a(a){disableInput("guestWifiName5G",a);disableInput("guestWifiPwd5G",a);disableBtn("guestWifiSave5G",
a);h("guestSwitch5G",a)}function Gb(a){Hb(a);Ib(a);ga(a)}function Hb(a){Xa(a);Za(a)}function Ib(a){Ya(a);$a(a)}function La(a){disableBtn("hostWifiSave2G",a);disableBtn("hostWifiSave5G",a);disableBtn("hostWifiSaveBs",a);disableBtn("guestWifiSave",a);disableBtn("guestWifiSave5G",a)}function Ca(){gWifiSwitchSupport||gCustomWifiSwitchSupport?gWifiSwitchSplit?(1==ha&&(h("hostSwitch",!1),h("guestSwitch",!1)),1==ia&&(h("hostSwitch5G",!1),h("guestSwitch5G",!1))):1==E&&(h("hostSwitch",!1),h("guestSwitch",
!1),h("hostSwitch5G",!1),h("guestSwitch5G",!1),h("hostSwitchBs",!1)):(h("hostSwitch",!1),h("guestSwitch",!1),h("hostSwitch5G",!1),h("guestSwitch5G",!1),h("hostSwitchBs",!1))}function ja(a,b){var c={},f={};c[uciWireless.fileName]={};c[uciWireless.fileName][b]=f;b==B?f[ab]=a:f[uciWireless.dynOptName.enable]=a;$.modify(c,function(c){!1==Q(c[ERR_CODE])?b==w?(H.setState(1-a),ka.innerHTML=1-a==e?statusStr.opened:statusStr.closed):b==x?(I.setState(1-a),la.innerHTML=1-a==e?statusStr.opened:statusStr.closed):
b==B&&(Y.setState(1-a),ma.innerHTML=1-a==e?statusStr.opened:statusStr.closed):(b==w?ka.innerHTML=a==e?statusStr.opened:statusStr.closed:b==x?la.innerHTML=a==e?statusStr.opened:statusStr.closed:b==B&&(ma.innerHTML=a==e?statusStr.opened:statusStr.closed),c.dfs_wait_time&&0!=c.dfs_wait_time&&showDFSPopUpWindow(void 0,parseInt(c.dfs_wait_time)));Ca();if(gWifiSwitchSupport||gCustomWifiSwitchSupport)t=$.setTimeout(y,0)},!0)}function Jb(a,b){var c={},f={},m;if(gWifiSwitchSupport&&gWifiSwitchUseWireless)m=
C;else if(gCustomWifiSwitchSupport||gWifiSwitchSupport&&!gWifiSwitchUseWireless)m=Da;c[m]={};c[m][Aa]=f;a==e?(uciCustomWireless.dynOptName.enable_2g==b?f[uciCustomWireless.dynOptName.enable_2g]="on":uciCustomWireless.dynOptName.enable_5g==b&&(f[uciCustomWireless.dynOptName.enable_5g]="on"),f[uciCustomWireless.dynOptName.enable]="on"):uciCustomWireless.dynOptName.enable_2g==b?f[uciCustomWireless.dynOptName.enable_2g]="off":uciCustomWireless.dynOptName.enable_5g==b?f[uciCustomWireless.dynOptName.enable_5g]=
"off":uciCustomWireless.dynOptName.enable==b&&(f[uciCustomWireless.dynOptName.enable]="off");$.modify(c,function(c){!1==Q(c[ERR_CODE])?uciCustomWireless.dynOptName.enable_2g==b?(bb.setState(1-a),Ma.innerHTML=1-a==e?statusStr.opened:statusStr.closed):uciCustomWireless.dynOptName.enable_5g==b?(cb.setState(1-a),Na.innerHTML=1-a==e?statusStr.opened:statusStr.closed):uciCustomWireless.dynOptName.enable==b&&(Ea.setState(1-a),Fa.innerHTML=1-a==e?statusStr.opened:statusStr.closed):(uciCustomWireless.dynOptName.enable_2g==
b?(Ma.innerHTML=a==e?statusStr.opened:statusStr.closed,ha=Ga=a,Hb(a==e?!1:!0),Ga==e||Ha==e?ga(!1):ga(!0)):uciCustomWireless.dynOptName.enable_5g==b?(Na.innerHTML=a==e?statusStr.opened:statusStr.closed,ia=Ha=a,Ib(a==e?!1:!0),Ga==e||Ha==e?ga(!1):ga(!0)):uciCustomWireless.dynOptName.enable==b&&(Fa.innerHTML=a==e?statusStr.opened:statusStr.closed,E=db=a,Gb(a==e?!1:!0),id("wifiSwitchOffTip").style.display=a==e?"none":"block"),void 0!=c.wait_time?(showLoading(label.savingCfg,void 0,void 0,!1),$.setTimeout(function(){closeLoading();
c.dfs_wait_time&&0!=c.dfs_wait_time&&showDFSPopUpWindow(void 0,parseInt(c.dfs_wait_time))},1E3*parseInt(c.wait_time,10))):c.dfs_wait_time&&0!=c.dfs_wait_time&&showDFSPopUpWindow(void 0,parseInt(c.dfs_wait_time)),t=$.setTimeout(y,0))},!0)}function eb(a,b){if(uciCustomWireless.dynOptName.enable_2g==b){if(!0==Kb){Kb=!1;Ma.innerHTML=a==e?statusStr.opened:statusStr.closed;return}}else if(uciCustomWireless.dynOptName.enable_5g==b){if(!0==Lb){Lb=!1;Na.innerHTML=a==e?statusStr.opened:statusStr.closed;return}}else if(uciCustomWireless.dynOptName.enable==
b){if(!0==Mb){Mb=!1;Fa.innerHTML=a==e?statusStr.opened:statusStr.closed;return}}else return;a!=e?showConfirm(label.closeDirect,function(c){!0==c?Jb(a,b):(uciCustomWireless.dynOptName.enable_2g==b?(bb.setState(e),Ma.innerHTML=statusStr.opened):uciCustomWireless.dynOptName.enable_5g==b?(cb.setState(e),Na.innerHTML=statusStr.opened):uciCustomWireless.dynOptName.enable==b&&(Ea.setState(e),Fa.innerHTML=statusStr.opened),t=$.setTimeout(y,0))}):Jb(a,b)}function Nb(a,b){h("hostSwitch",!0);h("hostSwitch5G",
!0);h("hostSwitchBs",!0);h("guestSwitch",!0);h("guestSwitch5G",!0);a!=e?(fb[uciHostsInfo.fileName]={},fb[uciHostsInfo.fileName][KEY_TABLE]=uciHostsInfo.dynData.host_info,$.query(fb,function(c){if(ENONE==c[ERR_CODE]){c=formatTableData(c[uciHostsInfo.fileName][uciHostsInfo.dynData.host_info]);var f,m;for(m in c)if(f=c[m],f[uciHostsInfo.optName.mac].toUpperCase()==g_cur_host_mac.toUpperCase()){f[uciHostsInfo.optName.type]==uciHostsInfo.optValue.linkType.hostWireless?b==w&&f[uciHostsInfo.optName.wifiMode]==
uciHostsInfo.optValue.wifiMode.h2G?showConfirm(label.wirelessSwitchTip,function(c){if(!0==c)ja(a,b);else if(H.setState(e),ka.innerHTML=statusStr.opened,Ca(),gWifiSwitchSupport||gCustomWifiSwitchSupport)t=$.setTimeout(y,0)}):b==x&&f[uciHostsInfo.optName.wifiMode]==uciHostsInfo.optValue.wifiMode.h5G?showConfirm(label.wirelessSwitchTip,function(c){if(!0==c)ja(a,b);else if(I.setState(e),la.innerHTML=statusStr.opened,Ca(),gWifiSwitchSupport||gCustomWifiSwitchSupport)t=$.setTimeout(y,0)}):b==Ec?showConfirm(label.wirelessSwitchTip,
function(c){if(!0==c)ja(a,b);else if(Y.setState(e),ma.innerHTML=statusStr.opened,Ca(),gWifiSwitchSupport||gCustomWifiSwitchSupport)t=$.setTimeout(y,0)}):ja(a,b):ja(a,b);break}}})):ja(a,b)}function Fc(a){var b={};b[uciWireless.fileName]={};b[uciWireless.fileName][KEY_NAME]=[gb,hb];$.query(b,function(b){ENONE==b[ERR_CODE]?a(b[uciWireless.fileName]):Q(b[ERR_CODE])})}function ib(a,b){function c(a,b){Fc(function(c){var f=!1;0==a&&(b!=B||uciWireless.dynOptValue.enable.on!=c[gb][uciWireless.dynOptName.enable]&&
uciWireless.dynOptValue.enable.on!=c[hb][uciWireless.dynOptName.enable]?b==w&&uciWireless.dynOptValue.enable.on==c[gb][uciWireless.dynOptName.enable]?f=!0:b==x&&uciWireless.dynOptValue.enable.on==c[hb][uciWireless.dynOptName.enable]&&(f=!0):f=!0);f?showConfirm(gSysModeSupport?label.wirelessSwitchTipForWDS1:label.wirelessSwitchTipForWDS,function(c){if(!0==c)Nb(a,b);else if(b==w?(H.setState(1-a),ka.innerHTML=a==e?statusStr.closed:statusStr.opened):b==x?(I.setState(1-a),la.innerHTML=a==e?statusStr.closed:
statusStr.opened):b==B&&(Y.setState(1-a),ma.innerHTML=a==e?statusStr.closed:statusStr.opened),gWifiSwitchSupport||gCustomWifiSwitchSupport)t=$.setTimeout(y,0)}):Nb(a,b)})}var f=!1,m;if(b==w){if(!0==Ob){Ob=!1;ka.innerHTML=a==e?statusStr.opened:statusStr.closed;return}m=label.close2G4Passive;a!=e&&(f=gGuest5GSupport?I.state!=e&&F.state!=e&&S.state!=e:I.state!=e&&F.state!=e)}else if(b==x){if(!0==Pb){Pb=!1;la.innerHTML=a==e?statusStr.opened:statusStr.closed;return}m=label.close5GPassive;a!=e&&(f=gGuest5GSupport?
H.state!=e&&F.state!=e&&S.state!=e:H.state!=e&&F.state!=e)}else{if(!0==Qb){Qb=!1;ma.innerHTML=a==e?statusStr.opened:statusStr.closed;return}m=label.closeHostPassive;a!=e&&(f=gGuest5GSupport?F.state!=e&&S.state!=e:F.state!=e)}gWifiSwitchSupport||gCustomWifiSwitchSupport?(clearTimeout(t),f?showConfirm(m,function(c){!0==c?ja(a,b):(b==w?(H.setState(e),ka.innerHTML=statusStr.opened):b==x?(I.setState(e),la.innerHTML=statusStr.opened):(Y.setState(e),ma.innerHTML=statusStr.opened),t=$.setTimeout(y,0))}):
c(a,b)):c(a,b)}function jb(a,b,c,f){var m={},d={},e=a.value,g=b.value;m[uciWireless.fileName]={};m[uciWireless.fileName][c]=d;d[uciWireless.dynOptName.ssid]=e;d[uciWireless.dynOptName.key]=g;d[uciWireless.dynOptName.encryption]=0<g.length?uciWireless.dynOptValue.encryption.on:uciWireless.dynOptValue.encryption.off;La(!0);setLoadingId(f,IMG_HS_LOADING_GREEN);hsLoading(!0);$.modify(m,function(f){var m=f[ERR_CODE],d=0;if(ENONE==m)c==w?(na=e,oa=g):c==x?(pa=e,qa=g):c==B&&(ra=e,sa=g),f.dfs_wait_time&&0!=
f.dfs_wait_time&&showDFSPopUpWindow(void 0,parseInt(f.dfs_wait_time)),d=1E3*parseInt(f.time_out,10);else{var fa=f="";c==w?(f=na,fa=oa):c==x?(f=pa,fa=qa):c==B&&(f=ra,fa=sa);a.value=f;b.value=fa;Q(m)}$.setTimeout(function(){La(!1);hsLoading(!1)},d)},!0)}function kb(a,b){var c={},f={},m,d;m=b==s?F:S;d=b==s?Oa:Pa;c[D]={};c[D][b]=f;f[uciGuestNet.optName.enable]=a.toString();h("hostSwitch",!0);h("hostSwitch5G",!0);h("hostSwitchBs",!0);h("guestSwitch",!0);h("guestSwitch5G",!0);$.modify(c,function(b){!1==
Q(b[ERR_CODE])?(m.setState(1-a),d.innerHTML=1-a==e?statusStr.opened:statusStr.closed):d.innerHTML=a==e?statusStr.opened:statusStr.closed;Ca();if(gWifiSwitchSupport||gCustomWifiSwitchSupport)t=$.setTimeout(y,0)})}function Rb(a,b,c,f){var m={},d={},e=a.value,g=b.value;m[D]={};m[D][c]=d;d[uciGuestNet.optName.ssid]=e;d[uciGuestNet.optName.key]=g;d[uciGuestNet.optName.encrypt]=(0<g.length?uciGuestNet.dynOptValue.encryption.on:uciGuestNet.dynOptValue.encryption.off).toString();La(!0);setLoadingId(f,IMG_HS_LOADING_GREEN);
hsLoading(!0);$.modify(m,function(f){f=f[ERR_CODE];if(ENONE==f)c==s?(ta=e,ua=g):c==T&&(va=e,wa=g);else{var m="",d="";c==s?(m=ta,d=ua):c==T&&(m=va,d=wa);a.value=m;b.value=d;Q(f)}La(!1);hsLoading(!1)})}function Sb(a,b){var c,f,m=1-e,d;c=b==s?Tb:Ub;f=b==s?Oa:Pa;!0==c?(b==s?Tb=!1:b==T&&(Ub=!1),f.innerHTML=a==e?statusStr.opened:statusStr.closed):gWifiSwitchSupport||gCustomWifiSwitchSupport?(clearTimeout(t),gGuest5GSupport&&(m=b==s?S.state:F.state),a!=e&&(Ia&&Y.state!=e&&m!=e?d=gGuest5GSupport?b==s?"由于主人网络和5G访客网络已关闭，此时关闭2.4G访客网络，意味着关闭无线总开关，仅能通过网线连接进入路由器管理页。请确认是否仍要关闭？":
"由于主人网络和2.4G访客网络已关闭，此时关闭5G访客网络，意味着关闭无线总开关，仅能通过网线连接进入路由器管理页。请确认是否仍要关闭？":label.closeGuest2Passive:Ia||H.state==e||I.state==e||m==e||(d=gGuest5GSupport?b==s?"由于2.4G网络、5G网络和5G访客网络已关闭，此时关闭2.4G访客网络，意味着关闭无线总开关，仅能通过网线连接进入路由器管理页。请确认是否仍要关闭？":"由于2.4G网络、5G网络和2.4G访客网络已关闭，此时关闭5G访客网络，意味着关闭无线总开关，仅能通过网线连接进入路由器管理页。请确认是否仍要关闭？":label.closeGuest1Passive)),void 0!=d?showConfirm(d,function(c){!0==c?kb(a,b):(b==s?(F.setState(e),Oa.innerHTML=statusStr.opened):(S.setState(e),Pa.innerHTML=statusStr.opened),t=$.setTimeout(y,
0))}):kb(a,b)):kb(a,b)}function Gc(){var a={};a[uciFunction.fileName]={};a[uciFunction.fileName][KEY_NAME]="new_module_spec";$.query(a,function(a){Q(a[ERR_CODE])&&(lb=a[uciFunction.fileName].new_module_spec.guest_dyn_encrypt==Qa?Qa:Hc)},!1)}function Ic(){var a={},b;if(gWifiSwitchSupport&&gWifiSwitchUseWireless)b=C;else if(gCustomWifiSwitchSupport||gWifiSwitchSupport&&!gWifiSwitchUseWireless)b=Da;a[b]={};a[b][KEY_NAME]=[Aa];$.query(a,function(a){ENONE==a[ERR_CODE]&&(a=a[b][Aa],gWifiSwitchSplit?(ha=
"on"==a[uciCustomWireless.dynOptName.enable]&&"on"==a[uciCustomWireless.dynOptName.enable_2g]?"1":"0",ia="on"==a[uciCustomWireless.dynOptName.enable]&&"on"==a[uciCustomWireless.dynOptName.enable_5g]?"1":"0",Ga=ha,Ha=ia,bb=new Switch("wifiAllSwitch2G",Ga,function(){return function(a){eb(a,uciCustomWireless.dynOptName.enable_2g)}}()),cb=new Switch("wifiAllSwitch5G",Ha,function(){return function(a){eb(a,uciCustomWireless.dynOptName.enable_5g)}}())):(db=E="on"==a[uciCustomWireless.dynOptName.enable]?
"1":"0",Ea=new Switch("wifiAllSwitch",db,function(){return function(a){eb(a,uciCustomWireless.dynOptName.enable)}}())))})}function Jc(a){var b={},c="";b[C]={};b[C][KEY_NAME]=Ia?[B]:[w,x];b[D]={};b[D][KEY_NAME]=gGuest5GSupport?[s,T]:s;if(gWifiSwitchSupport&&gWifiSwitchUseWireless)c=C,b[C][KEY_NAME].push(Aa);else if(gCustomWifiSwitchSupport||gWifiSwitchSupport&&!gWifiSwitchUseWireless)c=Da,b[Da]={},b[Da][KEY_NAME]=[Aa];$.query(b,function(b){b[ERR_CODE]==ENONE&&a(b[C],b[D],b[c])})}function y(){clearTimeout(t);
Jc(function(a,b,c){E=c[Aa][uciCustomWireless.dynOptName.enable]==uciCustomWireless.optValue.wifiSwitch.enable.on?"1":"0";c=parseInt(b[s][uciGuestNet.optName.enable]);var f;gGuest5GSupport&&(f=parseInt(b[T][uciGuestNet.optName.enable]));Ia?(a=parseInt(a[B][ab]),"undefined"!=typeof Y&&Y.setState(a),ma.innerHTML=a==e?statusStr.opened:statusStr.closed):(b=parseInt(a[w][uciWireless.dynOptName.enable]),a=parseInt(a[x][uciWireless.dynOptName.enable]),"undefined"!=typeof H&&H.setState(b),ka.innerHTML=b==
e?statusStr.opened:statusStr.closed,"undefined"!=typeof I&&I.setState(a),la.innerHTML=a==e?statusStr.opened:statusStr.closed);"undefined"!=typeof F&&F.setState(c);Oa.innerHTML=c==e?statusStr.opened:statusStr.closed;gGuest5GSupport&&("undefined"!=typeof S&&S.setState(f),Pa.innerHTML=f==e?statusStr.opened:statusStr.closed);"undefined"!=typeof Ea&&Ea.setState(E);Fa.innerHTML=E==e?statusStr.opened:statusStr.closed;f=E!=e;Gb(f);id("wifiSwitchOffTip").style.display=f?"block":"none";t=$.setTimeout(y,Kc)})}
function mb(){var a={};a[D]={};a[D][KEY_NAME]=s;Gc();$.query(a,function(a){if(ENONE==a[ERR_CODE]){if(Lc.style.display="block",gGuest5GSupport||$("#netStateGuestNet li.bottom").attr("class",""),a=a[D][s],a[uciGuestNet.optName.key]||(a[uciGuestNet.optName.key]=""),F=new Switch("guestSwitch",parseInt(a[uciGuestNet.optName.enable]),function(){return function(a){Sb(a,s)}}()),J.value=a[uciGuestNet.optName.ssid],K.value=uciGuestNet.dynOptValue.encryption.off==a[uciGuestNet.optName.encrypt]?"":a[uciGuestNet.optName.key],
ta=J.value,ua=K.value,lb==Qa&&K.setAttribute("readonly","readonly"),gWifiSwitchSupport||gCustomWifiSwitchSupport)gWifiSwitchSplit?ha!=e&&Za(!0):E!=e&&Za(!0)}else $("#netStateHostNet li.bottom").attr("class","")});id("guestWifiSave").onclick=function(){var a=J.value;replaceUnicodeBlank(K);if(ta!=a||ua!=K.value)0==a.length?(showAlert(errStr.wlanSsidErr,J),J.value=ta,K.value=ua):!0==/^ +$/gi.test(a)?(showAlert(errStr.wlanSsidBlank,J),J.value=ta,K.value=ua):32<getCNStrLen(a)?(showAlert(errStr.wlanSsidLenErr,
J),J.value=ta,K.value=ua):Rb(J,K,s,"guestWifiSave")}}function Vb(){var a={};a[D]={};a[D][KEY_NAME]=T;$.query(a,function(a){if(ENONE==a[ERR_CODE]){if(Mc.style.display="block",$("#netStateGuestNet5G li.bottom").attr("class",""),a=a[D][T],a[uciGuestNet.optName.key]||(a[uciGuestNet.optName.key]=""),S=new Switch("guestSwitch5G",parseInt(a[uciGuestNet.optName.enable]),function(){return function(a){Sb(a,T)}}()),L.value=a[uciGuestNet.optName.ssid],Z.value=uciGuestNet.dynOptValue.encryption.on==parseInt(a[uciGuestNet.optName.encrypt])?
a[uciGuestNet.optName.key]:"",va=L.value,wa=Z.value,lb==Qa&&K.setAttribute("readonly","readonly"),gWifiSwitchSupport||gCustomWifiSwitchSupport)gWifiSwitchSplit?ia!=e&&$a(!0):E!=e&&$a(!0)}else $("#netStateGuestNet li.bottom").attr("class","")});id("guestWifiSave5G").onclick=function(){var a=L.value;replaceUnicodeBlank(Z);if(va!=a||wa!=Z.value)0==a.length?(showAlert(errStr.wlanSsidErr,L),L.value=va,Z.value=wa):!0==/^ +$/gi.test(a)?(showAlert(errStr.wlanSsidBlank,L),L.value=va,Z.value=wa):32<getCNStrLen(a)?
(showAlert(errStr.wlanSsidLenErr,L),L.value=va,Z.value=wa):Rb(L,Z,T,"guestWifiSave5G")}}function nb(){var a={};a[C]={};a[C][KEY_NAME]=[w];$.query(a,function(a){ENONE==a[ERR_CODE]&&(a=a[C][w],H=new Switch("hostSwitch",parseInt(a[uciWireless.dynOptName.enable]),function(){return function(a){ib(a,w)}}()),M.value=a[uciWireless.dynOptName.ssid],U.value=a[uciWireless.dynOptName.key],na=M.value,oa=U.value,gWifiSwitchSupport||gCustomWifiSwitchSupport)&&(gWifiSwitchSplit?ha!=e&&Xa(!0):E!=e&&Xa(!0))});id("hostWifiSave2G").onclick=
function(){var a=M.value;replaceUnicodeBlank(U);if(na!=a||oa!=U.value)0==a.length?(showAlert(errStr.wlanSsidErr,M),M.value=na,U.value=oa):!0==/^ +$/gi.test(a)?(showAlert(errStr.wlanSsidBlank,M),M.value=na,U.value=oa):32<getCNStrLen(a)?(showAlert(errStr.wlanSsidLenErr,M),M.value=na,U.value=oa):showConfirm(label.wifiSaveConfirmTip,function(a){!0==a&&jb(M,U,w,"hostWifiSave2G")})}}function ob(){var a={};a[C]={};a[C][KEY_NAME]=[x];$.query(a,function(a){ENONE==a[ERR_CODE]&&(a=a[C][x],I=new Switch("hostSwitch5G",
parseInt(a[uciWireless.dynOptName.enable]),function(){return function(a){ib(a,x)}}()),N.value=a[uciWireless.dynOptName.ssid],aa.value=a[uciWireless.dynOptName.key]?a[uciWireless.dynOptName.key]:"",pa=N.value,qa=aa.value,gWifiSwitchSupport||gCustomWifiSwitchSupport)&&(gWifiSwitchSplit?ia!=e&&Ya(!0):E!=e&&Ya(!0))});id("hostWifiSave5G").onclick=function(){var a=N.value;replaceUnicodeBlank(aa);if(pa!=a||qa!=aa.value)0==a.length?(showAlert(errStr.wlanSsidErr,N),N.value=pa,aa.value=qa):!0==/^ +$/gi.test(a)?
(showAlert(errStr.wlanSsidBlank,N),N.value=pa,aa.value=qa):32<getCNStrLen(a)?(showAlert(errStr.wlanSsidLenErr,N),N.value=pa,aa.value=qa):showConfirm(label.wifiSaveConfirmTip,function(a){!0==a&&jb(N,aa,x,"hostWifiSave5G")})}}function Wb(a){showCover(function(b){b=$("#"+b.id);var c=id("Con"),f,d;b.css("opacity",0.7);d=el("div");d.className="resultDiv";c.appendChild(d);b=el("div");b.className="resultCon";d.appendChild(b);f=el("i");f.className="alertImg";b.appendChild(f);f=el("p");f.className="detail";
f.innerHTML=a;b.appendChild(f);$.setTimeout(function(){hideCover(function(){c.removeChild(d)})},2E3)})}function Nc(a){showConfirm(label.rebootConfirm,function(b){!0==b&&(b={},b[uciPlc.fileName]={},b[uciPlc.fileName][uciPlc.actionName.rebootExt]={},b[uciPlc.fileName][uciPlc.actionName.rebootExt][uciPlc.optName.mac]=a,$.action(b,function(a){ENONE==a[ERR_CODE]?(a=parseInt(a.wait_time,10)||30,showProgBar(1E3*a,statusStr.rebootingChildRt,function(){closeProgBar()},!0,statusStr.rebootChildRtTip)):showAlert(statusStr.rebootRouterFail)}))})}
function Oc(a){showConfirm(label.resetConfirm,function(b){!0==b&&(b={},b[uciPlc.fileName]={},b[uciPlc.fileName][uciPlc.actionName.resetExt]={},b[uciPlc.fileName][uciPlc.actionName.resetExt][uciPlc.optName.mac]=a,$.action(b,function(a){ENONE==a[ERR_CODE]?(a=parseInt(a.wait_time,10)||30,showProgBar(1E3*a,label.resetingChildRt,function(){closeProgBar()},!0,statusStr.resetChildRtTip)):showAlert(statusStr.resetRouterFail)}))})}function Pc(a){function b(){var b={};b[uciPlc.fileName]={};b[uciPlc.fileName][uciPlc.actionName.kickExt]=
{};b[uciPlc.fileName][uciPlc.actionName.kickExt][uciPlc.optName.mac]=a;showLoading(statusStr.disconcting,void 0,void 0,!1);$.action(b,function(a){ENONE==a[ERR_CODE]?(c?$.setTimeout(function(){closeLoading();Wb("设备已断开，正在自动组网")},1E3):$.setTimeout(function(){closeLoading();Wb("设备已成功断开")},1E3),O()):(closeLoading(),showAlert(statusStr.kickRouterFail))})}for(var c=!1,f=0;f<r.length;f++)if(r[f].parent_router.toUpperCase()==a.toUpperCase()){c=!0;break}c?showConfirm("断开连接后，该设备将被移出网络，其他网络设备将自动组成最优网络方案。确定要断开吗？",
function(a){!0==a&&b()},"断开"):showConfirm(label.disconnectConfirm,function(a){!0==a&&b()},"断开")}function Xb(a){a=parseInt(a);a=1048576<=a?(a/1048576).toFixed(2)+" GB/s":1024<=a?(a/1024).toFixed(1)+" MB/s":(a/1).toFixed(0)+" KB/s";return a.toString()}function l(a,b,c,f){d.save();d.beginPath();d.fillStyle=void 0==f?"#FFFFFF":f;d.font="12px 微软雅黑, 宋体, Arial";d.fillText(a,b,c);d.closePath();d.restore()}function Yb(a,b,c){var f=a.getBoundingClientRect();return{x:b-f.left*a.width/f.width,y:c-f.top*a.height/
f.height}}function Qc(a,b){var c={};c[uciAppInfo.fileName]={};c[uciAppInfo.fileName][uciAppInfo.actionName.open]={};c[uciAppInfo.fileName][uciAppInfo.actionName.open][uciAppInfo.dynOptName.id]=a;$.action(c,function(a){a[ERR_CODE]==ENONE&&(a=a[uciAppInfo.dynOptName.pageURL],!0==$.local?b("WDS.htm"):0<=a.indexOf("WDS.htm")&&b(a))})}function Rc(a,b){var c={};c[uciAppInfo.fileName]={};c[uciAppInfo.fileName][uciAppInfo.actionName.open]={};c[uciAppInfo.fileName][uciAppInfo.actionName.open][uciAppInfo.dynOptName.id]=
a;$.action(c,function(a){a[ERR_CODE]==ENONE&&(a=a[uciAppInfo.dynOptName.pageURL],0<=a.indexOf("wired_extender.htm")&&b(a))})}function Sc(a){var b={};pb=!1;b[uciAppInfo.fileName]={};b[uciAppInfo.fileName][uciAppInfo.actionName.getInstalledApp]=null;$.action(b,function(b){if(Q(b[ERR_CODE])){b=formatTableData(b[uciAppInfo.optName.installedApp]);for(var f=0,d=b.length;f<d;f++)!1==pb&&Qc(b[f][Zb],function(b){pb=!0;a(b)})}})}function Tc(a){var b={};qb=!1;b[uciAppInfo.fileName]={};b[uciAppInfo.fileName][uciAppInfo.actionName.getInstalledApp]=
null;$.action(b,function(b){if(Q(b[ERR_CODE])){b=formatTableData(b[uciAppInfo.optName.installedApp]);for(var f=0,d=b.length;f<d;f++)!1==qb&&Rc(b[f][Zb],function(b){qb=!0;a(b)})}})}function rb(){g.onclick=function(a){a=a||window.event;a=Yb(g,a.clientX,a.clientY);for(var b in p.click){var c=p.click[b];!0==c.legal&&a.x>c.pos[0]&&a.x<c.pos[1]&&a.y>c.pos[2]&&a.y<c.pos[3]&&c.callBack()}};g.onmousemove=function(a){a=a||window.event;a=Yb(g,a.clientX,a.clientY);var b=p.mousemove.wan,c=p.mousemove.wds,f=p.mousemove.ap,
b=c.legal?c:b.legal?b:f;g.style.cursor=b.legal&&a.x>b.pos[0]&&a.x<b.pos[1]&&a.y>b.pos[2]&&a.y<b.pos[3]?"pointer":"default"}}function ba(){d.beginPath();d.strokeStyle="rgba(255,255,255,1)";d.lineWidth=2;for(var a=0;7>a;a++)d.moveTo(g.width/2,54+9*a),d.lineTo(g.width/2,60+9*a);d.stroke();d.closePath()}function sb(){d.beginPath();d.strokeStyle="rgba(255,255,255,1)";d.lineWidth=2;d.moveTo(g.width/2,54);d.lineTo(g.width/2,115);d.stroke();d.closePath()}function $b(a){currentSelectedWan=a;loadPage("BasicRouteSet.htm",
"basicSCon",function(){id("headL").style.backgroundColor="#70D2EF";id("headLCnt").style.backgroundColor="#70D2EF";id("headR").style.backgroundColor="#4ABDE0";id("headRCnt").style.backgroundColor="#4ABDE0";for(var a=0,c=basicLisConf.length;a<c;a++)id(basicLisConf[a].arrId).style.visibility="hidden";id(basicLisConf[3].arrId).style.visibility="visible";clearTimeout(gMenuRefreshHD);gMenuRefreshHD=window.setTimeout(basicMenuStateRefresh,0);setTimeout(function(){$("#network_rsMenu").click()},0)})}function ac(){d.beginPath();
d.strokeStyle="rgba(255,255,255,1)";d.lineWidth=2;for(var a=0;7>a;a++)d.moveTo(g.width/2-11,54+9*a),d.lineTo(g.width/2-11,60+9*a);d.stroke();d.closePath()}function bc(){d.beginPath();d.strokeStyle="rgba(255,255,255,1)";d.lineWidth=2;for(var a=0;7>a;a++)d.moveTo(g.width/2+11,54+9*a),d.lineTo(g.width/2+11,60+9*a);d.stroke();d.closePath()}function Uc(){$("#leftWanLink").hide();$.setTimeout(function(){d.drawImage(n,334,413,20,20,351,70,20,20)},q);l(label.wan1PhyErr,361-xa(label.wan1PhyErr)-10-2,84)}function Vc(){$("#rightWanLink").hide();
$.setTimeout(function(){d.drawImage(n,334,413,20,20,373,70,20,20)},q);l(label.wan2PhyErr,395,84)}function cc(){$("#leftWanLink").hide();$.setTimeout(function(){d.drawImage(n,334,392,20,20,351,70,20,20)},q);l(statusStr.connting,361-xa(statusStr.connting)-10-2,84)}function dc(){$("#rightWanLink").hide();$.setTimeout(function(){d.drawImage(n,334,392,20,20,373,70,20,20)},q);l(statusStr.connting,395,84)}function Wc(a,b){l(a,g.width/2-11-13-xa(a),70);l(b,g.width/2-11-13-xa(b),88);$.setTimeout(function(){d.drawImage(n,
334,413,20,20,351,72,20,20)},q);$("#leftWanLink").show()}function Xc(a,b){l(a,g.width/2+24,70);l(b,g.width/2+24,88);$.setTimeout(function(){d.drawImage(n,334,413,20,20,373,72,20,20)},q);$("#rightWanLink").show()}function xa(a){var b=-1;d.save();d.font="12px 微软雅黑, 宋体, Arial";b=d.measureText(a).width;d.restore();return b}function Yc(a,b,c){l(a,g.width/2-11-13-xa(a),70);$.setTimeout(function(){d.drawImage(n,283,199,20,20,337,80,10,10)},q);l(b,331-xa(b),88);$.setTimeout(function(){d.drawImage(n,260,199,
20,20,337,98,10,10)},q);l(c,331-xa(c),106);$("#leftWanLink").hide()}function Zc(a,b,c){l(a,g.width/2+24,70);$.setTimeout(function(){d.drawImage(n,283,199,20,20,396,80,10,10)},q);l(b,412,88);$.setTimeout(function(){d.drawImage(n,260,199,20,20,396,98,10,10)},q);l(c,412,106);$("#rightWanLink").hide()}function $c(a,b,c){d.clearRect(0,ca.height+8,V/2,60);LINK_UP==a?(d.beginPath(),d.strokeStyle="rgba(255,255,255,1)",d.lineWidth=2,d.moveTo(g.width/2-11,54),d.lineTo(g.width/2-11,115),d.stroke(),d.closePath(),
Ra||Yc("WAN1",b,c)):ac();LINKING_UP==a&&cc();LINKING_DOWN==a&&cc();LINK_CODE_AUTH_ERR!=a&&LINK_DOWN_EXPT!=a||Wc("WAN1",errStr.linkNoEcho);LINK_DOWN==a&&Uc()}function ad(a,b,c){d.clearRect(V/2,ca.height+8,V/2,60);LINK_UP==a?(d.beginPath(),d.strokeStyle="rgba(255,255,255,1)",d.lineWidth=2,d.moveTo(g.width/2+11,54),d.lineTo(g.width/2+11,115),d.stroke(),d.closePath(),Ra||Zc("WAN2",b,c)):bc();LINKING_UP==a&&dc();LINKING_DOWN==a&&dc();LINK_CODE_AUTH_ERR!=a&&LINK_DOWN_EXPT!=a||Xc("WAN2",errStr.linkNoEcho);
LINK_DOWN==a&&Vc()}function bd(a,b,c){d.clearRect(0,ca.height+8,V,60);LINK_UP==a?(sb(),Ra||($.setTimeout(function(){d.drawImage(n,283,199,20,20,382,65,10,10)},q),l(b,395,75),$.setTimeout(function(){d.drawImage(n,260,199,20,20,382,82,10,10)},q),l(c,395,91))):ba();LINKING_UP==a&&($.setTimeout(function(){d.drawImage(n,334,392,20,20,362,70,20,20)},q),l(statusStr.connting,395,86));LINKING_DOWN==a&&($.setTimeout(function(){d.drawImage(n,334,392,20,20,362,70,20,20)},q),l(statusStr.disconcting,395,86));if(LINK_CODE_AUTH_ERR==
a||LINK_DOWN_EXPT==a)$.setTimeout(function(){d.drawImage(n,334,413,20,20,362,70,20,20)},q),l(LINK_CODE_AUTH_ERR==a?errStr.pppoeUserPwdErr:errStr.linkNoEcho,395,76),l(label.netSet+" >",395,96,"#FEEB1A"),p.click.wan.legal=!0,p.mousemove.wan.legal=!0,rb();LINK_DOWN==a&&($.setTimeout(function(){d.drawImage(n,334,413,20,20,362,70,20,20)},q),l(statusStr.wanNetworkDown,395,86))}function tb(a,b){var c=parseInt(a[uciNetwork.optName.code]),f=parseInt(a[uciNetwork.optName.wanStatus]),d=parseInt(a[uciNetwork.optName.phyStatus]);
switch(f){case LINK_DOWN:0==d&&(c=LINK_CODE_PHYDOWN);switch(c){case LINK_CODE_PHYDOWN:b(LINK_DOWN);break;case LINK_CODE_AUTH_ERR:b(LINK_CODE_AUTH_ERR);break;default:b(LINK_DOWN_EXPT)}break;case LINK_UP:b(LINK_UP,Xb(a[uciNetwork.optName.upSpeed]),Xb(a[uciNetwork.optName.downSpeed]));break;case LINKING_UP:switch(c){case LINK_CODE_AUTH_ERR:b(LINK_CODE_AUTH_ERR);break;case LINK_CODE_NOECHO:case LINK_CODE_UNKNOWN:case LINK_CODE_DENY:case LINK_CODE_SRVDOWN:case LINK_CODE_OPT_UNSUPPORT:case LINK_CODE_AUTH_UNSUPPORT:b(LINK_DOWN_EXPT);
break;default:b(LINKING_UP)}break;case LINKING_DOWN:b(LINKING_DOWN);break;default:b(LINK_DOWN)}}function ub(a,b){"undefined"==typeof b?tb(a,bd):"left"==b?tb(a,$c):tb(a,ad)}function cd(a,b){var c={},f={};c[uciPlc.fileName]={};c[uciPlc.fileName][uciPlc.actionName.setExtInfo]=f;f[uciPlc.optName.mac]=a;f[uciPlc.optName.name]=b;showLoading("正在保存，请稍候...",void 0,void 0,!1);$.action(c);$.setTimeout(function(){closeLoading()},2E3)}function Ja(){var a=$("#cldRtOperation");"none"!=a.css("display")&&(a.hide(),
W=!1)}function dd(a){var b={},c={};b[uciProto.fileName]={};b[uciProto.fileName][uciProto.secName.dhcp]=c;c[uciProto.optName.hostName]=a;showLoading("正在保存，请稍候...",void 0,void 0,!1);$.modify(b);$.setTimeout(function(){closeLoading()},2E3)}function ed(a){showCover(function(b){b=$("#"+b.id);var c=id("Con"),f,d,e,k;b.css("opacity",0.45);b=el("div");b.className="editNameDiv";c.appendChild(b);f=el("div");f.className="editNameCon";b.appendChild(f);b=el("label");b.innerHTML=label.equipName;f.appendChild(b);
b=el("input");b.id="devNameInput";b.value=a.text;b.maxLength=ec;f.appendChild(b);k=el("div");k.className="errorDiv";f.appendChild(k);e=el("span");k.appendChild(e);b=el("div");f.appendChild(b);d=el("button");d.innerHTML=btn.save;d.onclick=function(){var b=id("devNameInput").value;!0==/[^0-9a-z_\-\u00b7\u4E00-\u9FFFF\s]/gi.test(b)?(k.style.display="block",e.innerHTML=errStr.hostNameErr):getCNStrLen(b)>ec?(k.style.display="block",e.innerHTML="设备名称最大长度为63个字符，一个中文字代表3个字符"):0==b.length?(k.style.display=
"block",e.innerHTML="设备名称不能为空"):(a.text=b,a.mac===da?dd(b):cd(a.mac,b),hideCover(function(){c.removeChild(f.parentNode)}),W=!1)};b.appendChild(d);d=el("button");d.innerHTML=btn.gridCancel;d.className="cancel";d.onclick=function(){hideCover(function(){c.removeChild(f.parentNode)});W=!1};b.appendChild(d)})}function vb(a,b){var c=$("#nodeTextTips");c.css({top:a.y+154,left:745<a.x+16+120?a.x-25:a.x+16}).show();c[0].innerText=b}function wb(){$("#nodeTextTips").hide()}function fd(a){null!=a.target&&showConfirm(label.reorganizeNetworkTips,
function(a){!0==a&&addChildRt(!0)},btn.reorganizeNetwork,btn.notNow)}function fc(a){var b=a.target;if(null!=b){W=!0;da===b.mac?(id("rebootCldRt").style.display="none",id("kickCldRt").style.display="none",id("resetCldRt").style.display="none",id("cldRtOperation").style.height="26px",id("editDevName").style.borderBottom="none"):(id("rebootCldRt").style.display="block",id("kickCldRt").style.display="block",id("resetCldRt").style.display="block",id("cldRtOperation").style.height="104px",id("editDevName").style.borderBottom=
"solid 1px #F2F2F2");var c=$("#cldRtOperation");c.css({top:b.y+105,left:b.x+b.width+10}).show();id("editDevName").onclick=function(){ed(b);c.hide()};id("rebootCldRt").onclick=function(){Nc(b.mac);c.hide();W=!1};id("kickCldRt").onclick=function(){Pc(b.mac);c.hide();W=!1};id("resetCldRt").onclick=function(){Oc(b.mac);c.hide();W=!1}}}function gc(a){var b=new JTopo.Node(""==a.hostname?label.anonymousHost:a.hostname);if(a.is_mesh&&"1"==a.is_mesh)b.isMeshSta=!0,b.setImagePosition(263,318,47,41,38,33),b.setSize(64,
64),b.onclick=fd;else{if(a.is_iptv&&"1"==a.is_iptv)b.setImagePosition(206,358,50,50);else{for(var c=MacFactoryArr,f=c.length-2,d,e=c[f+1],k=a.mac.substring(0,8).toUpperCase(),g,k=k.replace(/:/g,"-"),h=0;h<f;h++)if(d=c[h],"0"==a[gd]&&void 0!=(g=MacBrands[d.name])&&0<=g.indexOf(k)){e=d;break}a.posX=-e.posX;a.posY=-e.posY;b.setImagePosition(a.posX,a.posY,50,50)}b.setSize(64,64);b.showOperation=!1}a[hd]==R.inet?b.setWifiImagePosition(355,308):b.setWifiImagePosition(334,329);a.is_iptv&&"1"==a.is_iptv&&
b.setWifiImagePosition(355,308);b.textOffsetY=10;b.mac=a.mac;b.blocked=a.blocked;b.up_limit=a.up_limit;b.down_limit=a.down_limit;b.onmouseover=vb;b.onmouseout=wb;return b}function hc(a){var b=new JTopo.Node(a.name);b.setImagePosition(263,318,47,41,38,33);b.setSize(64,64);var c=parseInt(a.sta_num_host)+parseInt(a.sta_num_guest),c=10>c?" "+c:99>c?c.toString():"99+";b.number=c;b.textOffsetY=10;b.mac=a.mac;b.onmouseover=vb;b.onmouseout=wb;b.onclick=fc;1==a.uplink_type?b.setWifiImagePosition(355,308):
2==a.uplink_type&&(a=a.rate,a=parseInt(a),b.setWifiImagePosition(80<=a/1024/1024?334:355,329));return b}function ic(){var a=new JTopo.Node(Ba);a.setImagePosition(263,318,47,41,38,33);a.setBound((g.width-64)/2,5,64,64);a.mac=da;a.textOffsetY=10;a.onclick=fc;a.onmouseover=vb;a.onmouseout=wb;return a}function jc(a){var b;if(!W){null!=ea&&a.unshift(ea);z.clear();var c=ic();c.layout={width:110,height:52};z.add(c);var f=[];if(6>=a.length)b=null!=ea?a.length-1:a.length,c.number=" "+b,f=a.slice(0,a.length),
id("leftUnfoldBtn").style.display="none",id("rightUnfoldBtn").style.display="none",v=1,5==a.length?(id("rightCldUnfoldBtn").style.left="582px",id("leftCldUnfoldBtn").style.left="167px"):1==a.length%2||6==a.length?(id("rightCldUnfoldBtn").style.left="582px",id("leftCldUnfoldBtn").style.left="142px"):(id("rightCldUnfoldBtn").style.left="527px",id("leftCldUnfoldBtn").style.left="92px");else{b=null!=ea?a.length-1:a.length;c.number=10>b?" "+b:99>b?b:"99+";f.push(a[0]);var d;v+4>=a.length?(d=a.length-5,
id("rightUnfoldBtn").style.display="none"):(d=v,id("rightUnfoldBtn").style.display="block");1>=v?id("leftUnfoldBtn").style.display="none":id("leftUnfoldBtn").style.display="block";void 0!=u&&6<u.length?(id("rightCldUnfoldBtn").style.display="block",id("leftCldUnfoldBtn").style.display="block",id("rightCldUnfoldBtn").style.left="582px",id("leftCldUnfoldBtn").style.left="142px"):(id("rightCldUnfoldBtn").style.display="none",id("leftCldUnfoldBtn").style.display="none");for(b=d;b<d+4;++b)f.push(a[b]);
f.push(a[a.length-1])}for(b=0;b<f.length;b++){if(void 0==f[b].parent_router)a=gc(f[b]);else{a=hc(f[b]);a.layout={width:110,height:52};d=[];if(6>=u.length)d=u.slice(0,u.length),id("leftCldUnfoldBtn").style.display="none",id("rightCldUnfoldBtn").style.display="none",G=1;else{var e;d.push(u[0]);G+4>=u.length?(e=u.length-5,id("rightCldUnfoldBtn").style.display="none"):(e=G,id("rightCldUnfoldBtn").style.display="block");1>=G?id("leftCldUnfoldBtn").style.display="none":id("leftCldUnfoldBtn").style.display=
"block";for(var k=e;k<e+4;++k)d.push(u[k]);d.push(u[u.length-1])}for(k=0;k<d.length;++k){e=gc(d[k]);z.add(e);e=new JTopo.FlexionalLink(a,e);if(0===k||d.length-1===k)e.roundLine=!0;z.add(e)}}z.add(a);e=new JTopo.FlexionalLink(c,a);if(0===b||f.length-1===b)e.roundLine=!0;z.add(e)}setTimeout(function(){Sa.repaint()},100);JTopo.layout.layoutNode(z,c,!0)}}function jd(a,b){var c=a.parent_router,d=b.length;if("00-00-00-00-00-00"===c)return!0;if(da.toUpperCase()==c)return!1;for(var e=0;e<d;e++)if(c.toUpperCase()===
b[e].mac.toUpperCase())return!1;return!0}function kd(a){for(var b=0;b<a.length;b++)if(da.toUpperCase()!=a[b].parent_router)return!1;return!0}function O(){if(!W){var a={};a[uciPlc.fileName]={};a[uciPlc.fileName][KEY_TABLE]=[uciPlc.secType.connectedExt];a[uciHostsInfo.fileName]={};a[uciHostsInfo.fileName][KEY_TABLE]=uciHostsInfo.dynData.online_host;a[uciHostsInfo.fileName][KEY_NAME]=uciHostsInfo.dynData.capHostNum;$.query(a,function(a){if(ENONE==a.error_code){r=formatTableData(a.hyfi.connected_ext);
r.sort(function(a,b){return a.mac>b.mac?1:-1});var c=formatTableData(a[uciHostsInfo.fileName][uciHostsInfo.dynData.online_host]);xc(c);kc(c,void 0,function(){if(1>=r.length)Ta||(id("nodeTextTips").style.display="none",id("cldRtOperation").style.display="none",$("#addNewDevBtn").removeClass("disabled"),id("addNewDevBtn").onclick=addChildRt,v=1),Ta=!0,c.sort(function(a,b){if(a.is_iptv&&"1"==a.is_iptv)return 1;if(b.is_iptv&&"1"==b.is_iptv||a.is_mesh&&"1"==a.is_mesh)return-1;if(b.is_mesh&&"1"==b.is_mesh)return 1;
for(var c=a.ip.split("."),d=b.ip.split("."),f=0;4>f;f++)if(parseInt(c[f],10)!=parseInt(d[f],10))return parseInt(c[f],10)>parseInt(d[f],10)?1:-1;return 0}),1==r.length?(ea=r[0],$.action({hosts_info:{get_ext_host:{mac:ea.mac}}},function(a){ENONE==a[ERR_CODE]&&(u=formatTableData(a.hosts_info.get_ext_host),u.sort(function(a,b){for(var c=a.ip.split("."),d=b.ip.split("."),f=0;4>f;f++)if(parseInt(c[f],10)!=parseInt(d[f],10))return parseInt(c[f],10)>parseInt(d[f],10)?1:-1;return 0}));kc(u,ea.mac,function(){0<
u.length?550!=X.height&&(X.height=550):360!=X.height&&(X.height=360);for(var a=[],b=0;b<c.length;b++){for(var d=!1,f=0;f<u.length;f++)if(c[b].mac.toUpperCase()==u[f].mac.toUpperCase()){d=!0;break}d&&""!=c[b].mac||a.push(c[b])}jc(a)})})):(360!=X.height&&(X.height=360),ea=null,jc(c));else{Ta&&(id("leftUnfoldBtn").style.display="none",id("rightUnfoldBtn").style.display="none",id("nodeTextTips").style.display="none",id("cldRtOperation").style.display="none",v=1,Ta=!1);z.clear();var d=[],e=ic(),g=a[uciHostsInfo.fileName][uciHostsInfo.dynData.capHostNum],
g=g.host_num+g.guest_num;e.number=10>g?" "+g:99>g?g:"99+";z.add(e);d.push(e);r&&r.length>=ld?($("#addNewDevBtn").addClass("disabled"),id("addNewDevBtn").onclick=null):($("#addNewDevBtn").removeClass("disabled"),id("addNewDevBtn").onclick=addChildRt);e=[];if(6>=r.length)e=r.slice(0,r.length),id("leftUnfoldBtn").style.display="none",id("rightUnfoldBtn").style.display="none";else if(kd(r)){e.push(r[0]);var k;v+4>=r.length?(k=r.length-5,id("rightUnfoldBtn").style.display="none"):(k=v,id("rightUnfoldBtn").style.display=
"block");1>=v?id("leftUnfoldBtn").style.display="none":id("leftUnfoldBtn").style.display="block";for(g=k;g<k+4;++g)e.push(r[g]);e.push(r[r.length-1])}else e=r.slice(0,r.length),id("leftUnfoldBtn").style.display="none",id("rightUnfoldBtn").style.display="none";k={};for(g=0;g<e.length;g++)if(!jd(e[g],e)){var h=hc(e[g]);z.add(h);d.push(h);var l=k[e[g].parent_router];null==l?(k[e[g].parent_router]=[],k[e[g].parent_router].push(h)):l.push(h)}for(var p in k)for(g=0;g<d.length;++g)if(p==d[g].mac)for(h=0;h<
k[p].length;h++){l=new JTopo.FlexionalLink(d[g],k[p][h]);if(0===h||k[p].length-1===h)l.roundLine=!0;z.add(l)}setTimeout(function(){Sa.repaint()},100);0<e.length&&z.doLayout(JTopo.layout.TreeLayout(98,176))}})}})}}function kc(a,b,c){$.query({port_manage:{table:["dev_info"]}},function(d){if(d.error_code==ENONE){d=d.port_manage.dev_info;var e=[],g="";if("undefined"==typeof b)for(var k=0;k<d.length;k++){if("1"==d[k].cap){g=d[k].mac;e=d[k].phy_info;break}}else for(g=b,k=0;k<d.length;k++)if(d[k].mac==b){e=
d[k].phy_info;break}for(k=0;k<e.length;k++)"DOW"==e[k].role.slice(0,3).toUpperCase()&&"1"==e[k].status&&a.push({blocked:"0",down_limit:"0",down_speed:"0",forbid_domain:"",forbid_time:"",hostname:"IPTV设备",is_cur_host:"0",is_mesh:"0",limit_time:"",mac:"",plan_rule:[],ssid:"",type:"0",up_limit:"0",up_speed:"0",wifi_mode:"0",is_iptv:"1",parent_mac:g,port_index:k});"function"==typeof c&&c()}})}function lc(){$.query(Ua,function(a){mc(a);null!=id(nc)&&$.setTimeout(lc,md)})}function oc(){ca=new Image;ca.src=
"../web-static/images/cloud.png";ca.onload=function(){$.setTimeout(function(){d.drawImage(ca,(g.width-ca.width)/2,8,76,46)},q)};d.save();d.fillStyle="#009188";d.JTopoRoundRect((g.width-64)/2,115,64,64,12);d.fill();d.restore();d.drawImage(n,263,318,47,41,(g.width-64)/2+13,130.5,38,33)}function xb(){ya=new Image;ya.src="../web-static/images/ap_router.png";ya.onload=function(){$.setTimeout(function(){d.drawImage(ya,(g.width-ya.width)/2,0,64,64)},q)};d.save();d.fillStyle="#009188";d.JTopoRoundRect((g.width-
64)/2,115,64,64,12);d.fill();d.restore();d.drawImage(n,263,318,47,41,(g.width-64)/2+13,130.5,38,33)}function pc(a){if(qc!=a){d.clearRect(0,ya.height,V,50);qc=a;switch(a){case "connecting":ba();$.setTimeout(function(){d.drawImage(n,334,413,20,20,362,75,20,20)},q);l(statusStr.relayConnecting,395,80);break;case "success":sb(),$.setTimeout(function(){d.drawImage(n,354,392,20,20,362,75,20,20)},q),l(statusStr.relaySuccess,395,80)}l(btn.wiredAP+" >",395,96,"#FEEB1A");rb()}}function yb(a){if(rc==a)"connecting"==
a&&(d.clearRect(g.width/2-2,54,4,22),d.clearRect(g.width/2-2,94,4,30),setTimeout(function(){ba()},Va));else{d.clearRect(0,ya.height,V,50);rc=a;switch(a){case "unfinished":ba();$.setTimeout(function(){d.drawImage(n,334,413,20,20,362,75,20,20)},q);l(gSysModeSupport?statusStr.relayUnfinish:statusStr.wdsUnfinish,395,80);break;case "1":case "connecting":ba();$.setTimeout(function(){d.drawImage(n,334,392,20,20,362,75,20,20)},q);l(gSysModeSupport?statusStr.relayConnecting:statusStr.wdsConnecting,395,80);
break;case "0":case "connect_fail":ba();$.setTimeout(function(){d.drawImage(n,334,413,20,20,362,75,20,20)},q);l(gSysModeSupport?statusStr.relayFail:statusStr.wdsFail,395,80);break;case "2":case "success":sb();$.setTimeout(function(){d.drawImage(n,354,392,20,20,362,75,20,20)},q);l(gSysModeSupport?statusStr.relaySuccess:statusStr.wdsSuccess,395,80);break;default:ba(),$.setTimeout(function(){d.drawImage(n,334,413,20,20,362,75,20,20)},q)}l(gSysModeSupport?btn.wirelessRepeater:btn.wds+" >",395,96,"#FEEB1A");
rb()}}function nd(){for(var a=(parseInt(da.replace(/-/g,""),16)+1).toString(16).toUpperCase(),b=a.length,c=0;c<12-b;c++)a="0"+a;a=a.split("");for(c=0;5>c;c++)a.splice(10-2*c,0,"-");da=a=a.join("")}function od(){p.click.wan.legal=!1;p.mousemove.wan.legal=!1;p.click.ap.legal=!1;p.mousemove.ap.legal=!1;p.click.wds.legal=!0;p.mousemove.wds.legal=!0;A&&xb();var a=[],b=[],c={protocol:{name:"dhcp"},wireless:{}};BAND_2==gBandNum?(a=["wds_cfg_status_2g","wds_cfg_status_5g"],b=["wlan_wds_2g_status","wlan_wds_5g_status"]):
(a=["wds_cfg_status_2g","wds_cfg_status_5g_1","wds_cfg_status_5g_4"],b=["wlan_wds_2g_status","wlan_wds_5g_1_status","wlan_wds_5g_4_status"]);c.wireless.name=a.concat(b);$.query(c,function(c){Ba=c.protocol.dhcp.hostname;for(var d=0,e=0,g,h=0;h<a.length;++h)switch(c.wireless[a[h]].status){case "idle":0>=d&&(d=0,g="idle");break;case "unfinished":4>=d&&(d=4,g="unfinished");break;case "connecting":3>=d&&(d=3,g="connecting");break;case "connect_fail":1>=d&&(d=1,g="connect_fail");break;case "success":2>=
d&&(d=2,g="success");var l=c.wireless[b[h]].status;2<l&&(l=0);e=Math.max(e,l)}2==d?A&&yb(e.toString()):A&&yb(g);O()});$("#netStateMbtn i").first().css("visibility","hidden")}function pd(){p.click.wan.legal=!1;p.mousemove.wan.legal=!1;p.click.ap.legal=!0;p.mousemove.ap.legal=!0;p.click.wds.legal=!1;p.mousemove.wds.legal=!1;A&&xb();$.query({protocol:{name:"dhcp"},wired_extender:{name:"status"}},function(a){Ba=a.protocol.dhcp.hostname;3!=a.wired_extender.status.state?A&&pc("connecting"):A&&pc("success");
O()});$("#netStateMbtn i").first().css("visibility","hidden")}function qd(a,b){p.click.wan.legal=!1;p.mousemove.wan.legal=!1;p.click.wds.legal=!0;p.mousemove.wds.legal=!0;A&&xb();$.query({wireless:{name:[a,b]},protocol:{name:"dhcp"}},function(c){Ba=c.protocol.dhcp.hostname;var d=c.wireless[a].status;"success"==d&&(d=c.wireless[b].status);A&&yb(d);O()});$("#netStateMbtn i").first().css("visibility","hidden")}function rd(){A&&oc();$.query({network:{name:["wan_status","wan_status_2"]},protocol:{name:"dhcp"}},
function(a){!1==compareObj(a.network.wan_status,zb)?(zb=a.network.wan_status,A&&ub(zb,"left")):a.network.wan_status.link_status==LINKING_UP&&(d.clearRect(g.width/2-2-11,54,4,16),d.clearRect(g.width/2-2-11,90,4,30),setTimeout(function(){ac()},Va));!1==compareObj(a.network.wan_status_2,Ab)?(Ab=a.network.wan_status_2,A&&ub(Ab,"right")):a.network.wan_status_2.link_status==LINKING_UP&&(d.clearRect(g.width/2-2+11,54,4,16),d.clearRect(g.width/2-2+11,90,4,30),setTimeout(function(){bc()},Va));Ba=a.protocol.dhcp.hostname;
O()});$("#netStateMbtn i").first().css("visibility","visible")}function sd(){p.click.wan.legal=!0;p.mousemove.wan.legal=!0;p.click.ap.legal=!1;p.mousemove.ap.legal=!1;p.click.wds.legal=!1;p.mousemove.wds.legal=!1;A&&oc();$.query({network:{name:["wan_status"]},protocol:{name:"dhcp"}},function(a){!1==compareObj(a.network.wan_status,Bb)?(Bb=a.network.wan_status,A&&ub(Bb)):a.network.wan_status.link_status==LINKING_UP&&(d.clearRect(g.width/2-2,54,4,16),d.clearRect(g.width/2-2,90,4,30),setTimeout(function(){ba()},
Va));Ba=a.protocol.dhcp.hostname;O()});$("#netStateMbtn i").first().css("visibility","visible")}function td(){n=new Image;n.src="../web-static/images/routerBg.png";$.query({network:{name:"lan"}},function(a){da=a.network.lan.macaddr.toUpperCase();gModeSwitchSupport&&sc==uciCustomNetwork.optValue.mode.bridge&&nd();var b,c,d,e,g;BAND_2==gBandNum?(b=["wlan_wds_2g","wlan_wds_5g"],c=["wds_cfg_status_2g","wds_cfg_status_5g"],d=["wlan_wds_2g_status","wlan_wds_5g_status"]):(b=["wlan_wds_2g","wlan_wds_5g_1",
"wlan_wds_5g_4"],c=["wds_cfg_status_2g","wds_cfg_status_5g_1","wds_cfg_status_5g_4"],d=["wlan_wds_2g_status","wlan_wds_5g_1_status","wlan_wds_5g_4_status"]);Ua.wireless={name:b};gSysModeSupport&&(Ua.system={name:"sys_mode"});gMulWanSupport&&(Ua.port_manage={table:"mwan"});mc=function(a){for(var h=!1,l=uciSystem.optValue.sysMode.routerMode,p=!1,n=0;n<b.length;++n)if(1==parseInt(a.wireless[b[n]].enable)){p=!0;e=c[n];g=d[n];break}gSysModeSupport&&(l=a.system.sys_mode.mode);if(gMulWanSupport)for(h=!0,
n=0;2>n;n++)if(0==a.port_manage.mwan[n]["mwan_"+(n+1)].enable){h=!1;break}p?gSysModeSupport?od():qd(e,g):l==uciSystem.optValue.sysMode.apMode?pd():h?rd():sd()};lc()})}function ud(a){Y=new Switch("hostSwitchBs",parseInt(a[ab]),function(a){ib(a,B)});P.value=a[uciWireless.dynOptName.ssid];za.value=a[uciWireless.dynOptName.key];ra=P.value;sa=za.value;if(gWifiSwitchSupport||gCustomWifiSwitchSupport)gWifiSwitchSplit?ha!=e&&ia!=e&&ga(!0):E!=e&&ga(!0);id("hostWifiSaveBs").onclick=function(){var a=P.value;
replaceUnicodeBlank(U);if(ra!=a||sa!=za.value)0==a.length?(showAlert(errStr.wlanSsidErr,P),P.value=ra,za.value=sa):!0==/^ +$/gi.test(a)?(showAlert(errStr.wlanSsidBlank,P),P.value=ra,za.value=sa):32<getCNStrLen(a)?(showAlert(errStr.wlanSsidLenErr,P),P.value=ra,za.value=sa):showConfirm(label.wifiSaveConfirmTip,function(a){!0==a&&jb(P,za,B,"hostWifiSaveBs")})}}function vd(){var a={};a[Cb]={};a[Cb][KEY_NAME]=[B];$.query(a,function(a){a=a[Cb][B];(Ia=a[wd]==tc)?(id("bsDisableDiv").style.display="none",
id("bsEnableDiv").style.display="block",ud(a)):(id("bsDisableDiv").style.display="block",id("bsEnableDiv").style.display="none",nb(),ob());mb();gGuest5GSupport&&Vb();if(gWifiSwitchSupport||gCustomWifiSwitchSupport)t=$.setTimeout(y,0)})}function xd(a){var b={};b[uciCustomNetwork.fileName]={};b[uciCustomNetwork.fileName][KEY_NAME]=uciCustomNetwork.dynData.bridgestatus;$.query(b,function(b){ENONE==b[ERR_CODE]&&(sc=b[uciCustomNetwork.fileName][uciCustomNetwork.dynData.bridgestatus][uciCustomNetwork.optName.enable],
"function"==typeof a&&a())})}function Db(){if(gSupportBS)vd();else if(id("bsDisableDiv").style.display="block",id("bsEnableDiv").style.display="none",gWifiSwitchSplit?(nb(),mb(),ob()):(nb(),ob(),mb()),gGuest5GSupport&&Vb(),gWifiSwitchSupport||gCustomWifiSwitchSupport)t=$.setTimeout(y,0)}function uc(){var a={};a[Eb]={};a[Eb][KEY_NAME]=[vc];$.query(a,function(a){ENONE==a[ERR_CODE]&&(Ra=a[Eb][vc][yd]==tc);Db()})}function wc(){try{var a=new NiceScroll("topoCon");a.scrollTipOpacity(1);a.scrollTipSet({background:"#22A794"});
a.init();if(A){d=g.getContext("2d");var b=$("#bNetStateTopoCon");Fb=b.height()+20;V=b.width();g.height=Fb-25;g.width=V;X.height=Fb-130;X.width=V;Sa=new JTopo.Stage(X);z=new JTopo.Scene(Sa);z.onclick=Ja;window.addEventListener?(g.addEventListener("click",Ja),g.addEventListener("touchstart",Ja)):(g.onclick=Ja,g.ontouchstart=Ja)}td()}catch(c){}}var Cb=uciWireless.fileName,B=uciWireless.secName.wlanBS,wd=uciWireless.optName.bsEnable,ab=uciWireless.optName.wifiEnable,E,ha,ia,fb={},e=1,Wa,C=uciWireless.fileName,
Da=uciCustomWireless.fileName,Mb=!0,Kb=!0,Lb=!0,Aa=uciWireless.dynData.wifi_switch,Ea,bb,cb,Fa=id("wifiAllSwitchDes"),Ma=id("wifiAllSwitch2GDes"),Na=id("wifiAllSwitch5GDes"),t=null,Kc=3E3,Ob=!0,w=uciWireless.dynData.host_2g,Zb=uciAppInfo.dynOptName.id,pb=!1,qb=!1,H,ka=id("hostSwitchDes"),M=id("hostWifiName"),U=id("hostWifiPwd"),Pb=!0,x=uciWireless.dynData.host_5g,I,la=id("hostSwitchDes5G"),N=id("hostWifiName5G"),aa=id("hostWifiPwd5G"),gb=uciWireless.dynData.wds_2g,hb=uciWireless.dynData.wds_5g,Qb=
!0,Ec=uciWireless.secName.wlanBS,Y,ma=id("hostSwitchDesBs"),P=id("hostWifiNameBs"),za=id("hostWifiPwdBs"),zc=id("hostWifiNum2G"),Ac=id("hostWifiNum5G"),Bc=id("hostWifiNumBs"),Cc=id("guestWifiNum"),Dc=id("guestWifiNum5G"),Ka=uciHostsInfo.optName.wifiMode,g=id("canvasCloud"),X=id("canvasRouter"),ca,ya,n,Sa,z;id("hostWifiNum");var F,S,D=uciGuestNet.fileName,s=uciGuestNet.secName.wireless2G,J=id("guestWifiName"),K=id("guestWifiPwd"),Oa=id("guestSwitchDes"),Lc=id("netStateGuestNet"),T=uciGuestNet.secName.wireless5G,
L=id("guestWifiName5G"),Z=id("guestWifiPwd5G"),Pa=id("guestSwitchDes5G"),Mc=id("netStateGuestNet5G"),d,Va=100,md=1E3,Fb,V,Tb=!0,Ub=!0,yc=uciHostsInfo.optName.mac,gd=uciHostsInfo.optName.blocked,hd=uciHostsInfo.optName.type,R={inet:uciHostsInfo.optValue.linkType.wired,wirelessH:uciHostsInfo.optValue.linkType.hostWireless,wirelessG:uciHostsInfo.optValue.linkType.guestWireless,block:uciHostsInfo.optValue.isBlocked.yes,unBlock:uciHostsInfo.optValue.isBlocked.no,wireless2G:uciHostsInfo.optValue.wifiMode.h2G,
wireless5G:uciHostsInfo.optValue.wifiMode.h5G},Ua={},mc,Bb={},zb={},Ab={},na="",oa="",pa="",qa="",ra="",sa="",ta="",va="",ua="",wa="",q=20,Qa=1,Hc=0,lb=0,da,Ba,rc="",qc="",db,Ga,Ha,sc;id("title2G").innerHTML=!0==gGuest5GSupport?"2.4G访客网络":"访客网络";var Ia=!1,ec=63,ld=7,W=!1,Ta=!1,v=1,G=1,ea=null,u,r=[],Ra=!1,tc="1",Eb="hnat",vc="main",yd="enable",A=!isIE||isIENormal,p={click:{wan:{pos:[395,455,86,116],callBack:function(){setBasicSubMenuUrl("WanCfg.htm");id("routerSetMbtn").onclick()},legal:!1},wds:{pos:[395,
455,86,116],callBack:function(){Sc(function(a){gSetLoadAppDetail("wds",a);id("appsMgtMbtn").onclick()})},legal:!1},ap:{pos:[395,455,86,116],callBack:function(){Tc(function(a){gSetLoadAppDetail("wiredExtender",a);id("appsMgtMbtn").onclick()})},legal:!1}},mousemove:{wan:{pos:[395,455,86,116],legal:!1},wds:{pos:[395,455,86,116],legal:!1},ap:{pos:[395,455,86,116],legal:!1}}};Wa=new NiceScroll("netStateLCon");Wa.scrollTipOpacity(1);Wa.scrollTipSet({background:"#1FA793"});Wa.init();var nc="wifiLogo"+(new Date).getTime();
$("i.wifiLogo")[0].id=nc;id("leftWanLink").onclick=function(){$b(1)};id("rightWanLink").onclick=function(){$b(2)};id("leftUnfoldBtn").onclick=function(){v-=4;v=1>v?1:v;O()};id("rightUnfoldBtn").onclick=function(){v+=4;O()};id("leftCldUnfoldBtn").onclick=function(){G-=4;G=1>G?1:G;O()};id("rightCldUnfoldBtn").onclick=function(){G+=4;O()};if(gWifiSwitchSupport||gCustomWifiSwitchSupport)gWifiSwitchSplit?$("#wifiSwitchSplit").removeClass("disNone"):$("#wifiSwitchUnity").removeClass("disNone"),Ic(),t=$.setTimeout(y,
0);gModeSwitchSupport?xd(function(){gHnatSupport?uc():Db();wc()}):(gHnatSupport?uc():Db(),wc())}init();
</script><style type="text/css">div.bConfLBC{background:#29c4b2}div.bConfRBC{background:#00b8a2}h1.bMdelTitle{text-shadow:2px 2px #27baa8}div.menuCon{height:34.2em;overflow:hidden;margin:20px 5px 0 0;padding-right:7px;position:relative}div.allSwitchCon5GState{margin-left:19px}ul.netStateMenuItem{color:#fff;padding:7px 20px 10px 29px;list-style:none;position:relative;*zoom:1}ul.netStateMenuItemWifiAll{padding-left:30px}ul.netStateMenuItem i.wifiLogo{background:url("../web-static/images/routerBg.png") no-repeat scroll -456px -34px rgba(0,0,0,0);height:20px;left:0;position:absolute;top:2px;width:28px}ul.netStateMenuItem li{font-size:0;margin-bottom:10px}ul.netStateMenuItem li.bottom{border-bottom:1px solid #1fa793;padding-bottom:10px;margin-bottom:0!important}@media screen and (-webkit-min-device-pixel-ratio:0){ul.netStateMenuItem li input{line-height:0!important}}ul.netStateMenuItem li label{font-size:12px;vertical-align:middle}ul.netStateMenuItem li span{font-size:12px;vertical-align:middle}ul.netStateMenuItem li span.wifiModelName{font-size:14px;vertical-align:middle}ul.netStateMenuItem li span.switchDes{font-size:12px;margin-left:3px}ul.netStateMenuItem li input{background:#1fa793;border:0;border-radius:3px;color:#fff;height:20px;font-size:12px;line-height:15px;padding:1px 5px;margin-left:7px;width:120px;vertical-align:middle}ul.netStateMenuItem input.bottomSaveBtn{background:#fbeb1a;border-radius:3px;margin-left:110px;width:50px;height:22px;color:#000;padding:0}span.wifiModelName{display:inline-block;width:88px;font-size:14px;font-weight:bold}div.topoCon{width:100%;height:100%}div.bNetStateTopoCon{height:100%;width:745px;position:relative;zoom:1}#canvasCloud,#canvasRouter{moz-user-select:-moz-none;-moz-user-select:none;-o-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}canvas.coverCanvas{position:absolute;top:110px;left:0}h1.canvasNotSupportTip{padding-top:150px;font-size:14px;color:#fff;text-align:center}input.subBtnDis{color:#fff!important;border:1px solid #fff!important}.textfield{position:absolute;background-color:#22a794;border-radius:4px;border:0;color:#fff;font-family:PingFangSC-Regula;font-size:12px;resize:none;display:none;overflow:hidden;text-indent:2px;z-index:9999}.nodeTextTips{position:absolute;background-color:#f6f0c0;border-color:#695233;color:#3b231b;font-family:PingFangSC-Regula;font-size:12px;display:none;z-index:9999;padding:6px 10px;max-width:100px;overflow-wrap:break-word}table.dataGrid2{width:100%;margin:15px 0 0 0;border-collapse:collapse;border:1px solid #01b8a2;text-align:center}table.dataGrid2 tr{background:transparent;border-bottom:1px solid #01b8a2}table.dataGrid2 td{height:30px;color:#343434;border:1px solid #01b8a2;vertical-align:middle;white-space:pre}@media screen and (-webkit-min-device-pixel-ratio:0){table.dataGrid input.text,table.dataGrid2 input.text{line-height:0!important}}table.dataGrid2 input.text{color:#fff;height:21px;line-height:21px;border:0;border-radius:3px;padding:0 2px;font-size:12px;background:transparent}div.pageListPo span.ListSpan{color:#01b8a2}.cldRtDiv{position:absolute;display:none;width:88px;height:104px;background:#fff;border-radius:4px;color:#333;box-shadow:0 0 5px #888;z-index:999}.cldRtDiv Ul{width:100%;list-style:none}.cldRtDiv Ul Li{border-bottom:solid 1px #f2f2f2;height:25px;cursor:pointer;text-align:left;line-height:25px;padding-left:8px}.cldRtDiv Ul .cldRtLiLast{border-bottom:0}#addNewDevBtn{position:absolute;top:0;right:10px;background:url("../web-static/images/add_router_normal.png");width:101px;height:30px;border:0;display:block;cursor:pointer}#addNewDevBtn.disabled{background:url("../web-static/images/add_router_disable.png");cursor:auto}#addNewDevBtn:focus{outline:0}div.unfoldCon{color:#fff;cursor:pointer}div.unfoldBtn{background:#feeb1a;border-radius:4px;width:22px;text-align:center;margin-bottom:2px}div.unfoldBtn label{font-size:12px;color:#333;letter-spacing:0;line-height:12px;vertical-align:super}#leftUnfoldBtn{position:absolute;top:243px;left:142px;z-index:1200;display:none}#rightUnfoldBtn{position:absolute;top:243px;left:581px;z-index:1200;display:none}#leftCldUnfoldBtn{position:absolute;top:420px;left:92px;z-index:1200;display:none}#rightCldUnfoldBtn{position:absolute;top:420px;left:527px;z-index:1200;display:none}div.editNameDiv{position:absolute;z-index:1011;width:100%;min-width:980px;top:219px}div.editNameDiv div.editNameCon{background:#fff;width:420px;min-height:97px;padding:42px 0;margin:0 auto}div.editNameDiv div.editNameCon label{font-size:14px;color:#000;letter-spacing:-0.43px;margin-right:14px;margin-left:29px}div.editNameDiv div.editNameCon input{border:1px solid #01b8a2;border-radius:4px;width:221px;height:31px;text-indent:11px}div.editNameDiv div.editNameCon div.errorDiv{margin-top:8px;text-align:left;padding:0 98px;display:none}div.editNameDiv div.editNameCon div.errorDiv span{background:url(../web-static/images/routerBg.png) -467px -189px no-repeat transparent;padding-left:18px}div.editNameDiv div.editNameCon div{margin-top:34px;text-align:center}div.editNameDiv div.editNameCon div button{background:#feeb1a;border-radius:3px;border:0;width:80px;height:28px;cursor:pointer}div.editNameDiv div.editNameCon div button.cancel{background:#d9d9d9;margin-left:24px}div.resultDiv{position:absolute;z-index:1011;width:100%;min-width:980px;top:190px}div.resultDiv div.resultCon{background:#fff;width:666px;height:290px;margin:0 auto;text-align:center}div.resultDiv div.resultCon i.alertImg{background:url(../web-static/images/routerBg.png) -318px -41px no-repeat;display:inline-block;height:70px;margin-top:51px;width:70px;transform:scale(1.4)}div.resultDiv div.resultCon p.detail{min-height:35px;color:#000;font-size:12px;line-height:22px;margin-top:52px;word-wrap:break-word;word-break:break-all}#leftWanLink{position:absolute;top:97px;left:292px;display:none;cursor:pointer}#rightWanLink{position:absolute;top:93px;left:396px;display:none;cursor:pointer}.wanLink label{font-family:PingFangSC-Semibold;font-size:10px;color:#feeb1a;line-height:9px;cursor:pointer}.wanLink .arrow{font-size:17px;top:1px;position:relative}div.netStateCon{width:223px;margin-left:auto}</style>